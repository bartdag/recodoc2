<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">













 
 
 
 
 






<html>
  <head>
    
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<title>Unit Testing GWT Applications with JUnit - Google Web Toolkit - Google Code</title>
<script type="text/javascript"><!--
(function(){function a(){this.t={};this.tick=function(c){this.t[c]=(new Date).getTime()};this.tick("start")}var b=new a;window.jstiming={Timer:a,load:b};if(window.external&&window.external.pageT)window.jstiming.pt=window.external.pageT;})();

var _tocPath_ = '/webtoolkit/_doc_toc.ezt';
var codesite_token = null;
var logged_in_user_email = null;
//--></script>
<link href="/css/codesite.pack.04102009.css" type="text/css" rel="stylesheet">
<script src="/js/codesite_head.pack.04102009.js" type="text/javascript"></script>
<script type="text/javascript">CODESITE_CSITimer['load'].tick('bhs');</script>
<link rel="search" type="application/opensearchdescription+xml" title="Google Code" href="/osd.xml">

<!--[if IE]><link rel="stylesheet" type="text/css" href="/css/iehacks.css"><![endif]-->

  </head>

  <body class="gc-documentation">

    <div id="gb">
 <span>
  
   
    <a href="#"
       id="projects-dropdown" onclick="return false;"
       ><span style="text-decoration:underline">My favorites</span> <span style="font-size:.75em;">&#9660;</span></a>
    |
  
    <a id="lang-dropdown" href="/" onclick="return false;"><span style="text-decoration:underline">English</span> <span style="font-size:.75em;">&#9660;</span></a>
  
   
    | <a href="https://www.google.com/accounts/Login?continue=http%3A%2F%2Fcode.google.com%2Fwebtoolkit%2Fdoc%2Flatest%2Ftutorial%2FJUnit.html&amp;followup=http%3A%2F%2Fcode.google.com%2Fwebtoolkit%2Fdoc%2Flatest%2Ftutorial%2FJUnit.html" onclick="CODESITE_click('/gb/sc/signin');"><span style="style:text-decoration:underline">Sign in</span></a>
   
  
 </span>
</div>

<div class="gbh" style="left:0px;"></div>
<div class="gbh" style="right:0px;"></div>

<div id="gc-container">
<a id="top"></a>
<div id="skipto">
  
  
</div>

<div id="gc-header">
  <div id="logo"><a href="/">
  
  
     <img src="//www.google.com/images/logos/code_logo.gif" height="40" width="167" alt="Google Code" style="border:0;margin:3px 0 0 0;">
  
  
  </a></div>
  <div id="search">
    <div id="searchForm" class="searchForm">
      <form id="cse" action="http://www.google.com/cse" accept-charset="utf-8" class="gsc-search-box" onsubmit="executeGSearch(document.getElementById('gsearchInput').value); return false;">
      <noscript>
      <input type="hidden" name="cref" value="http://code.google.com/cse/googlecode-context.xml">
      </noscript>
      <div id="gsc-search-box">
        <input id="gsearchInput" type="text" name="q" maxlength="2048" class="gsc-input" autocomplete="off" title="Google Code Search" style="width:345px">
        <div id="cs-searchresults" onclick="event.cancelBubble = true;"></div>
        <input title="Search" id="gsearchButton" class="gsc-search-button" name="sa" value="Search" type="submit">
        <div class="greytext">e.g. "ajax apis" or "open source"</div>
      </div>
      </form>
    </div> <!-- end searchForm -->
  </div> <!-- end search -->




</div> <!-- end gc-header -->


<div id="codesiteContent">

<a id="gc-topnav-anchor"></a>
<div id="gc-topnav">
  <h1 style="padding:0 0 0 6px;">Google Web Toolkit</h1>
  <ul id="docs" class="gc-topnav-tabs">

    <li id="home_link">
      <a href="/webtoolkit/" title="Google Web Toolkit home page">Home</a>
    </li>
  
    <li id="docs_link">
      <a href="/webtoolkit/overview.html" class="selected" title="Official Google Web Toolkit documentation">Docs</a>
    </li>
  
    <li>
      <a href="http://googlewebtoolkit.blogspot.com/" title="Official Google Web Toolkit blog">Blog</a>
    </li>
  
    <li>
      <a href="/webtoolkit/community.html" title="Community home for Google Web Toolkit">Community</a>
    </li>
  
    <li>
      <a href="/webtoolkit/terms.html" title="Google Web Toolkit terms of service">Terms</a>
    </li>
  
    <li>
      <a href="/webtoolkit/download.html" title="Download Google Web Toolkit">Download</a>
    </li>
  

  </ul>
</div> <!-- end gc-topnav -->

    <div class="g-section g-tpl-230">

      <a name="gc-toc"></a>
      <div class="g-unit g-first" id="gc-toc">
        <ul>
  <li>
    <ul>
      <li><a href="/webtoolkit/download.html">Downloads</a></li>
    </ul>
  </li>
</ul>

<div class="line"></div>

<ul>
  <li><h2>Learn More</h2>
    <ul>
      <li><a href="/webtoolkit/overview.html">Overview</a></li>
      <li><a href="/webtoolkit/business.html">Business Apps</a></li>
      <li><a href="/webtoolkit/learnmore-sdk.html">SDK</a></li>
      <li><a href="/webtoolkit/speedtracer/">Speed Tracer</a></li>
      <li><a href="/eclipse/index.html">Plugin for Eclipse</a></li>
      <li><a href="/webtoolkit/examples/">Examples</a></li>
    </ul>
  </li>
    <li><h2>Get Started</h2>
    <ul>
      <li><a href="/webtoolkit/gettingstarted.html">SDK</a></li>
      <li><a href="/webtoolkit/usingeclipse.html">Set up Eclipse</a></li>
      <li><a href="/webtoolkit/speedtracer/get-started.html">Speed Tracer</a></li>
      <li><a href="/webtoolkit/doc/latest/tutorial/index.html">Tutorials</a>
        <ul>
          <li><a href="/webtoolkit/doc/latest/tutorial/gettingstarted.html">Get Started</a>
            <ul>
              <li><a href="/webtoolkit/doc/latest/tutorial/create.html">Create a GWT Project</a></li>
              <li><a href="/webtoolkit/doc/latest/tutorial/design.html">Design the Application</a></li>
              <li><a href="/webtoolkit/doc/latest/tutorial/buildui.html">Build the User Interface</a></li>
              <li><a href="/webtoolkit/doc/latest/tutorial/manageevents.html">Manage Events on the Client</a></li>
              <li><a href="/webtoolkit/doc/latest/tutorial/codeclient.html">Code Functionality on the Client</a></li>
              <li><a href="/webtoolkit/doc/latest/tutorial/debug.html">Debug a GWT Application</a></li>
              <li><a href="/webtoolkit/doc/latest/tutorial/style.html">Apply Style</a></li>
              <li><a href="/webtoolkit/doc/latest/tutorial/compile.html">Compile a GWT Application</a></li>
            </ul>
          </li>
          <li><a href="/webtoolkit/doc/latest/tutorial/i18n.html">Internationalization</a></li>
          <li><a href="/webtoolkit/doc/latest/tutorial/clientserver.html">Client-Server Communication</a>
            <ul>
              <li><a href="/webtoolkit/doc/latest/tutorial/RPC.html">GWT RPC</a></li>
              <li><a href="/webtoolkit/doc/latest/tutorial/JSON.html">JSON</a></li>
              <li><a href="/webtoolkit/doc/latest/tutorial/JSONphp.html">JSON - PHP</a></li>
              <li><a href="/webtoolkit/doc/latest/tutorial/Xsite.html">Cross-Site</a></li>
            </ul>
          </li>
          <li><a href="/webtoolkit/doc/latest/tutorial/JUnit.html">JUnit Testing</a></li>
          <li><a href="/webtoolkit/doc/latest/tutorial/appengine.html">Google App Engine</a></li>
          <li><a href="/webtoolkit/doc/latest/tutorial/mvp-architecture.html">MVP Architecture</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><h2>Documentation</h2>
    <ul>
      <li><a href="/webtoolkit/doc/latest/ReleaseNotes.html">What's Coming in 2.1?</a>
        <ul>
          <li><a href="/webtoolkit/release-notes.html">Release Notes</a></li>
        </ul>
      </li>
      <li><a href="/webtoolkit/doc/latest/DevGuideOrganizingProjects.html">Organize Projects</a></li>
      <li><a href="/webtoolkit/doc/latest/DevGuideCompilingAndDebugging.html">Compile &amp; Debug</a></li>
      <li><a href="/webtoolkit/doc/latest/DevGuideCodingBasics.html">Coding Basics</a>
        <ul>
          <li><a href="/webtoolkit/doc/latest/DevGuideCodingBasicsClient.html">Client-Side Code</a></li>
          <li><a href="/webtoolkit/doc/latest/DevGuideCodingBasicsCompatibility.html">Compatibility with the Java Language and Libraries</a></li>
          <li><a href="/webtoolkit/doc/latest/DevGuideCodingBasicsHistory.html">History</a></li>
          <li><a href="/webtoolkit/doc/latest/DevGuideCodingBasicsFormatting.html">Number and Date Formatting</a></li>
          <li><a href="/webtoolkit/doc/latest/DevGuideCodingBasicsDelayed.html">Programming Delayed Logic</a></li>
          <li><a href="/webtoolkit/doc/latest/DevGuideCodingBasicsJSON.html">Working with JSON</a></li>
          <li><a href="/webtoolkit/doc/latest/DevGuideCodingBasicsXML.html">Working with XML</a></li>
          <li><a href="/webtoolkit/doc/latest/DevGuideCodingBasicsJSNI.html">JavaScript Native Interface (JSNI)</a></li>
          <li><a href="/webtoolkit/doc/latest/DevGuideCodingBasicsOverlay.html">JavaScript Overlay Types</a></li>
          <li><a href="/webtoolkit/doc/latest/DevGuideCodingBasicsDeferred.html">Deferred Binding</a></li>
        </ul>
      </li>
      <li><a href="/webtoolkit/doc/latest/DevGuideUi.html">Build User Interfaces</a>
        <ul>
          <li><a href="/webtoolkit/doc/latest/DevGuideUiBrowser.html">Cross-Browser Support</a></li>
          <li><a href="/webtoolkit/doc/latest/DevGuideUiPanels.html">Layout Using Panels</a></li>
          <li><a href="/webtoolkit/doc/latest/DevGuideUiWidgets.html">Widgets</a></li>
          <li><a href="/webtoolkit/doc/latest/DevGuideUiCustomWidgets.html">Creating Custom Widgets</a></li>
          <li><a href="/webtoolkit/doc/latest/DevGuideUiDom.html">Working with the DOM</a></li>
          <li><a href="/webtoolkit/doc/latest/DevGuideUiHandlers.html">Events and Handlers</a></li>
          <li><a href="/webtoolkit/doc/latest/DevGuideUiCss.html">Working with CSS</a></li>
          <li><a href="/webtoolkit/doc/latest/DevGuideUiBinder.html">Declarative UI with UiBinder</a></li>
          <li><a href="/webtoolkit/doc/latest/DevGuideUiImageBundles.html">Bundling Image Resources</a></li>
        </ul>
      </li>
      <li><a href="/webtoolkit/doc/latest/DevGuideA11y.html">Accessibility</a></li>
      <li><a href="/webtoolkit/doc/latest/DevGuideI18n.html">Internationalization</a>
        <ul>
         <li><a href="/webtoolkit/doc/latest/DevGuideI18nLocale.html">Locale</a></li>
         <li><a href="/webtoolkit/doc/latest/DevGuideI18nConstants.html">Constants</a></li>
         <li><a href="/webtoolkit/doc/latest/DevGuideI18nMessages.html">Messages</a></li>
         <li><a href="/webtoolkit/doc/latest/DevGuideI18nPluralForms.html">Plural Forms</a></li>
         <li><a href="/webtoolkit/doc/latest/DevGuideUiBinderI18n.html">UiBinder</a></li>
        </ul>
      </li>
      <li><a href="/webtoolkit/doc/latest/DevGuideServerCommunication.html">Communicate with a Server</a></li>
      <li><a href="/webtoolkit/doc/latest/DevGuideTesting.html">Test with JUnit</a>
        <ul>
          <li><a href="/webtoolkit/doc/latest/DevGuideTestingHtmlUnit.html">HtmlUnit</a></li>
          <li><a href="/webtoolkit/doc/latest/DevGuideTestingRemoteTesting.html">Remote Testing</a></li>
          <li><a href="/webtoolkit/doc/latest/DevGuideTestingCoverage.html">Code Coverage</a></li>
        </ul>
      </li>
      <li><a href="/webtoolkit/doc/latest/DevGuideDeploying.html">Deploy</a></li>
      <li><a href="/webtoolkit/doc/latest/DevGuideOptimizing.html">Optimize</a>
        <ul>
          <li><a href="/webtoolkit/doc/latest/DevGuideCodeSplitting.html">Code Splitting</a></li>
          <li><a href="/webtoolkit/doc/latest/DevGuideCompileReport.html">Compile Report</a></li>
          <li><a href="/webtoolkit/doc/latest/DevGuideClientBundle.html">Client Bundle</a></li>
          <li><a href="/webtoolkit/doc/latest/DevGuideLightweightMetrics.html">Lightweight Metrics</a></li>
        </ul>
      </li>
      <li><a href="/webtoolkit/doc/latest/RefGuide.html">Reference</a>
        <ul>
          <li><a href="http://google-web-toolkit.googlecode.com/svn/javadoc/2.1/index.html?overview-summary.html">SDK API Reference (Javadoc)</a></li>
          <li><a href="/webtoolkit/doc/latest/RefJreEmulation.html">JRE Emulation Reference</a></li>
          <li><a href="/webtoolkit/doc/latest/RefWidgetGallery.html">Widget List</a></li>
        </ul>
      </li>
      <li><a href="/webtoolkit/doc/latest/FAQ.html">FAQ</a>
        <ul>
          <li><a href="/webtoolkit/doc/latest/FAQ_GettingStarted.html">Get Started</a></li>
          <li><a href="/webtoolkit/doc/latest/FAQ_DebuggingAndCompiling.html">Debug and Compile</a></li>
          <li><a href="/webtoolkit/doc/latest/FAQ_UI.html">Build the User Interface</a></li>
          <li><a href="/webtoolkit/doc/latest/FAQ_Client.html">Develop Client-side Code</a></li>
          <li><a href="/webtoolkit/doc/latest/FAQ_Server.html">Communicate with a Server</a></li>
          <li><a href="/webtoolkit/doc/latest/FAQ_Troubleshooting.html">Troubleshoot</a></li>
        </ul>
      </li>
      <li><a href="/webtoolkit/doc/latest/DevGuideGlossary.html">Glossary</a></li>
      <li><a href="/webtoolkit/previousdocs.html">Docs for Previous Versions</a></li>
    </ul>
  </li>
  <li><h2>Tools</h2>
    <ul>
      <li><a href="/eclipse/">Plugin for Eclipse</a></li>    
      <li><a href="/webtoolkit/doc/latest/RefCommandLineTools.html">SDK Command-line Tools</a></li>
      <li><a href="/webtoolkit/speedtracer/">Speed Tracer</a>
        <ul>
          <li><a href="/webtoolkit/speedtracer/get-started.html">Getting Started</a></li>
          <li><a href="/webtoolkit/speedtracer/speed-tracer-examples.html">Examples</a></li>
          <li><a href="/webtoolkit/speedtracer/hint-description.html">Hints</a></li>
          <li><a href="/webtoolkit/speedtracer/data-dump-format.html">Data Dump Format</a></li>
          <li><a href="/webtoolkit/speedtracer/logging-api.html">Logging API</a></li>
          <li><a href="/webtoolkit/speedtracer/faq.html">FAQ</a></li>
        </ul>
      </li>
      <li><a href="/webtoolkit/tools/gwtdesigner/index.html">GWT Designer</a></li>
      <li><a href="/webtoolkit/tools/wbpro/index.html">WindowBuilder Pro</a></li>
      <li><a href="/webtoolkit/tools/wintester/html/index.html">WindowTester Pro</a></li>
      <li><a href="/webtoolkit/tools/codepro/doc/index.html">CodePro AnalytiX</a></li>
    </ul>
  </li>



  <li><h2>Resources</h2>
    <ul>
      <li><a href="/webtoolkit/articles.html">Articles</a></li>
      <li><a href="/webtoolkit/books.html">Books</a></li>
      <li><a href="/webtoolkit/community.html">Community</a>
        <ul>
          <li><a href="http://gwtgallery.appspot.com">App Gallery</a></li>
          <li><a href="/webtoolkit/developer_spotlight.html">Developer Spotlight</a></li>
         </ul>
      </li>
      <li><a href="/webtoolkit/googleapilibraries.html">Google API Libraries</a></li>
      <li><a href="/webtoolkit/tools.html">Tools &amp; Libraries</a></li>
      <li><a href="/webtoolkit/media_gallery.html">Presentations</a></li>
      <li><a href="/webtoolkit/makinggwtbetter.html">Making GWT Better</a></li>
      <li><a href="/webtoolkit/lifeofanissue.html">Issue Tracking</a></li>
    </ul>
  </li>
</ul>



      </div>

      <a name="gc-pagecontent"></a>
      <div class="g-unit" id="gc-pagecontent">
        <script type="text/javascript">CODESITE_docEarlyProcessing();</script>
        <h1 class="page_title">Unit Testing GWT Applications with JUnit</h1>


<style>
code, .code {font-size: 9pt; font-family: Courier, Courier New, monospace; color:#007000;}
.highlight {background-color: #ffc;}
.strike {text-decoration:line-through; color:red;}
.header {margin-top: 1.5ex;}
.details {margin-top: 1ex;}
</style>

<p>
At this point, you've created the initial implementation of the StockWatcher application and it seems pretty stable.
</p>
<p>
As the code base evolves, how can you ensure that you don't break existing functionality? The solution is unit testing.
Creating a battery of good unit test cases is an important part of ensuring the quality of your application over its lifecycle.
</p>
<p>
To aid you with your testing efforts, GWT provides integration with the open-source <a href="http://www.junit.org/">JUnit</a> testing framework.
You'll be able to create units test that you can run in both development mode and production mode.
</p>
<p>
In this section, you'll add a JUnit unit test to the StockWatcher project.
</p>
<ol>
    <li><a href="#create">Create a JUnit test class for StockWatcher and the scripts to run it either in development mode or production mode.</a></li>
    <li><a href="#run">Run the unit test.</a></li>
    <li><a href="#write">Write a unit test.</a></li>
    <li><a href="#resolve">Resolve a problem identified by the unit test.</a></li>
</ol>

<h2>Before you begin</h2>
<h3>The StockWatcher project</h3>
<p>
This tutorial builds on the GWT concepts and the StockWatcher application created in the <a href="gettingstarted.html">Getting Started</a> tutorial. If you have not completed the Getting Started tutorial and are familiar with basic GWT concepts, you can import the StockWatcher project as coded to this point.
</p>
<ol class="instructions">
    <li>
        <div class="header">Download the <a href="projects/GettingStarted.zip">StockWatcher project</a>.</div>
    </li>
    <li>
        <div class="header">Unzip the file.</div>
    </li>
    <li>
        <div class="header">Import the project into Eclipse</div>
        <ol>
            <li>From the <code>File</code> menu, select the  <code>Import...</code> menu option.</li>
            <li>Select the import source General &gt; Existing Projects into Workspace. Click the <code>Next</code> button.</li>
            <li>For the root directory, browse to and select the StockWatcher directory (from the unzipped file). Click the <code>Finish</code> button.</li>
        </ol>
    </li>
</ol>
<p>
If you are using ant, edit the <code>gwt.sdk</code> property in StockWatcher/build.xml to point to where you unzipped GWT.
</p>

If you are using ant, replace all references to <code>path_to_the_junit_jar</code> to point to the location of junit on your system. 

<p class="note">
<b>Note:</b> If you just completed the Getting Started tutorial but did not specify the <code>-junit</code> option with webAppCreator, uncomment the <code>javac.tests</code>, <code>test.dev</code>, <code>test.prod</code>, and <code>test</code> targets in StockWatcher/build.xml and 
replace all references to <code>path_to_the_junit_jar</code> to point to the location of junit on your system before continuing.
</p>

<a name="create"></a>
<h1>1. Creating a JUnit test</h1>
<p>
When you specified the <code>-junit</code> option, webAppCreator created all the files you need to begin developing JUnit tests. It generates a starter test class, ant targets to run the tests from the command line, and launch configuration files for Eclipse.
</p>
<p class="note">Starting with GWT 2.0, the former command-line tool junitCreator has been combined into webAppCreator.</p>
<p>
In Eclipse, navigate down to the StockWatcherTest class by expanding the
<code>test/</code> directory. If you are adding JUnit testing to an existing
application you will need add the <code>test/</code> directory as a source
folder within you Eclipse project and update your Build Path to include a
reference to an existing JUnit library.
<p>
<div class="details"><img src="images/JUnitcreatetest.png" alt="screenshot: JUnit tests in Package Explorer" /></div>
</p>
<h2>Examining the test class: StockWatcherTest.java</h2>
<p>
Take a look inside StockWatcherTest.java.
This test class was generated in the com.google.gwt.sample.stockwatcher.client package under the StockWatcher/test directory.
This is where you will write the unit tests for StockWatcher.
Currently it contains a single, simple test: the method testSimple.
</p>
<ol class="instructions">
    <li>
        <div class="header">Open the StockWatcherTest.java file.</div>

        <div class="details"><pre class="code">
package com.google.gwt.sample.stockwatcher.client;

import com.google.gwt.junit.client.GWTTestCase;

/**
 * GWT JUnit tests must extend GWTTestCase.
 */
public class StockWatcherTest <span class="highlight">extends GWTTestCase</span> {                       <span style="color:black;"><b>[1]</b></span>

  /**
   * Must refer to a valid module that sources this class.
   */
  public String getModuleName() {                                         <span style="color:black;"><b>[2]</b></span>
    <span class="highlight">return "com.google.gwt.sample.stockwatcher.StockWatcher";</span>
  }

  /**
   * Add as many tests as you like.
   */
  public void testSimple() {                                              <span style="color:black;"><b>[3]</b></span>
    <span class="highlight">assertTrue(true);</span>
  }

}</pre>
    </li>
</ol>
<h3>Notes</h3>
<p>
[1] Like all GWT JUnit test cases, the StockWatcherTest class extends the <a href="http://google-web-toolkit.googlecode.com/svn/javadoc/2.0/com/google/gwt/junit/client/GWTTestCase.html">GWTTestCase</a> class in the com.google.gwt.junit.client package.
You can create additional test cases by extending this class. 
</p>
<p>
[2] The StockWatcherTest class has an abstract method (getModuleName) that must return the name of the GWT module. For StockWatcher, that is com.google.gwt.sample.stockwatcher.StockWatcher.
</p>
<p>
[3] The StockWatcherTest class is generated with one sample test case&mdash;a tautological test, testSimple.
This testSimple method uses one of the many assert* functions that it inherits from the JUnit Assert class, which is an ancestor of GWTTestCase.
The assertTrue(boolean) function asserts that the boolean argument passed in evaluates to true. If not, the testSimple test will fail when run in JUnit.
</p>
<a name="run"></a>
<h1>2. Running unit tests</h1>
<p>
Before you start writing your own unit tests for StockWatcher, make sure the components of the test environment are in place. You can do that by running StockWatcherTest.java which will execute the starter test, testSimple.
</p>
<p>
You can run JUnit tests four ways:
</p>
<ul>
    <li>from the command line&mdash;using the scripts generated by junitCreator</li>
    <li>in Eclipse&mdash;using the Google Plugin for Eclipse</li>
    <li>in Eclipse&mdash;using the Eclipse launch configuration files generated by webAppCreator</li>
    <li>in manual test mode</li>
</ul>

<h2>From the command line</h2>
<p>
The build.xml file generated by GWT webAppCreator includes three generated targets used for testing:
<ul>
    <li>
        <div class="header">test.dev</div>
        <div class="details">Runs all test classes in development mode.</div>
    </li>
    <li>
        <div class="header">test.prod</div>
        <div class="details">Runs all test classes in production mode.</div>
    </li>
    <li>
        <div class="header">test</div>
        <div class="details">Runs both test.dev and test.prod</div>
    </li>
</ul>
</p>
<p class="note">
<b>Note:</b> In order to run tests from the command-line, you will need to have <a href="http://www.junit.org/">JUnit</a> installed on your system.
If you just downloaded the StockWatcher project, you must first open build.xml and replace all references to <code>/path/to/junit-3.8.1.jar</code>
with the path to junit on your system.
</p>
<ol class="instructions">
    <li>
        <div class="header">In the command shell, browse to the StockWatcher directory.</div>
    </li>
    <li>
        <div class="header">Run the JUnit test in development mode.</div>
        <div class="details">At the command line, enter <code>ant test.dev</code></div>
    </li>
    <li>
        <div class="header">The test runs as Java bytecode in a JVM.</div>
        <div class="details">The simpleTest executes without error.</div>
        <div class="details"><pre class="code">
&#91;junit&#93; Running com.google.gwt.sample.stockwatcher.client.StockWatcherTest
&#91;junit&#93; Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 15.851 sec</pre></div>
    </li>
    <li>
        <div class="header">Run the JUnit test in production mode.</div>
        <div class="details">At the command line, enter <code>ant test.prod</code></div>
    </li>
    <li>
        <div class="header">The test runs as compiled JavaScript.</div>
        <div class="details">The simpleTest executes without error.</div>
        <div class="details"><pre class="code">
&#91;junit&#93; Running com.google.gwt.sample.stockwatcher.client.StockWatcherTest
&#91;junit&#93; Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 37.042 sec</pre></div>
    </li>
</ol>

<h2>In Eclipse (using the Google Pluging for Eclipse)</h2>
<p>
The Google Plugin for Eclipse makes it easy to run tests in Eclipse.
</p>
<ol>
    <li>
        <div class="header">Run the JUnit test in development mode.</div>
        <div class="details">From Package Explorer, right click on the test case you want to run, select <code>Run As &gt; GWT Junit Test</code></div>
    </li>
    <li>
        <div class="header">The simpleTest executes without error.</div>
        <div class="details"><img src="images/JUnitSimpleTestDev.png" alt="screenshot: JUnit tests in Eclipse" /></div>
    </li>
    <li>
        <div class="header">Run the JUnit test in production mode.</div>
        <div class="details">From Package Explorer, right click on the test case you want to run, select <code>Run As &gt; GWT Junit Test (production mode)</code></div>
    </li>
    <li>
        <div class="header">The simpleTest executes without error.</div>
    </li>
</ol>

<h2>In Eclipse (using generated launch configurations)</h2>
<p>
You can run unit tests in Eclipse using the launch configurations generated by webAppCreator for both development mode and production mode.
</p>

<ol class="instructions">
    <li>
        <div class="header">Run the JUnit test in development mode.</div>
        <div class="details">From the Eclipse menu bar, select <code>Run &gt; Run Configurations...</code></div>
    </li>
    <li>
        <div class="header">In the Run window, select <code>StockWatcherTest-dev</code></div>
    </li>


    <li>
        <div class="header">If you are using Mac OSX, add the argument to invoke the Java virtual machine.</div>
        <div class="details">Display the Arguments tab.</div>
        <div class="details">At VM argument, enter <code>-XstartOnFirstThread -Xmx256M</code></div>
        <div class="details">To save the changes to the Arguments, press <code>Apply</code></div>
        <div class="details">To run the test, press <code>Run</code></div>
    </li>
    <li>
        <div class="header">The simpleTest executes without error.</div>
        <div class="details"><img src="images/JUnitSimpleTestDev.png" alt="screenshot: JUnit tests in Eclipse" /></div>
    </li>
        <li>
        <div class="header">Run the JUnit test in production mode.</div>
        <div class="details">From the Eclipse menu bar, select <code>Run &gt; Run Configurations...</code></div>
    </li>
    <li>
        <div class="header">In the Run window, select <code>StockWatcherTest-prod</code></div>
    </li>
    <li>
        <div class="header">If you are using Mac OSX, add the argument to invoke the Java virtual machine.</div>
        <div class="details">Display the Arguments tab.</div>
        <div class="details">At VM argument, enter <code>-XstartOnFirstThread -Xmx256M</code></div>
        <div class="details">To save the changes to the Arguments, press <code>Apply</code></div>
        <div class="details">To run the test, press <code>Run</code></div>
    </li>
    <li>
        <div class="header">The simpleTest executes without error.</div>
    </li>

</ol>


<h2>In manual test mode</h2>
<p>
If you want to select the browser on which to run unit tests, use manual test mode.

In manual test mode, the JUnitShell main class runs as usual on a specified GWT module, but instead of running the test immediately, it prints out a URL and waits for a browser to connect. You can manually cut and paste this URL into the browser of your choice, and the unit tests will run in that browser.

<p class="note">
<b>In Depth:</b> To learn how to run unit tests in manual mode, see the Developer's Guide, <a href="/webtoolkit/doc/latest/DevGuideTesting.html#DevGuideJUnitCreation">Creating a Test Case</a>.
</p>


<a name="write"></a>
<h1>3. Writing a unit test</h1>
<p>
In a real testing scenario, you would want to verify the behavior of as much of StockWatcher as possible. You could add a number of unit tests to the StockWatcherTest class. You would write each test in the form of a public method.
</p>
<p>
If you had a large number of test cases, you could organize them by grouping them into different test classes.
</p>
<p>
However, to learn the process of setting up JUnit tests in GWT, in this tutorial you'll write just one test and run it.
</p>
<ol class="instructions">
    <li>
        <div class="header">Write a JUnit test to verify that the constructor of the StockPrice class is correctly setting the new object's instance fields.</div>
        <div class="details">To the StockWatcherTest class, add the testStockPriceCtor method as shown below.</div>
        <div class="details"><pre class="code">
/**
 * Verify that the instance fields in the StockPrice class are set correctly.
 */
public void testStockPriceCtor() {
  String symbol = "XYZ";
  double price = 70.0;
  double change = 2.0;
  double changePercent = 100.0 * change / price;

  StockPrice sp = new StockPrice(symbol, price, change);
  assertNotNull(sp);
  assertEquals(symbol, sp.getSymbol());
  assertEquals(price, sp.getPrice(), 0.001);
  assertEquals(change, sp.getChange(), 0.001);
  assertEquals(changePercent, sp.getChangePercent(), 0.001);
}</pre></div>
    </li>
    <li>
        <div class="header">Rerun StockWatcherTest in development mode.</div>
        <div class="details">Both tests should pass.</div>
        <div class="details"><pre class="code">
&#91;junit&#93; Running com.google.gwt.sample.stockwatcher.client.StockWatcherTest
&#91;junit&#93; Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 16.601 sec</pre></div>
    </li>
</ol>


<a name="resolve"></a>
<h1>4. Resolving problems identified in unit tests</h1>
<p>
To see what happens when a unit test fails, you'll reintroduce the arithmetic bug you fixed in the <a href="debug.html">Getting Started</a> tutorial. Originally, the  percentage of change was not calculated correctly in the getChangePercent method. To make the unit test fail, you'll break this bit of code again.
</p>
<ol class="instructions">
    <li>
        <div class="header">Introduce a bug into StockWatcher.</div>
        <div class="details">In StockPrice.java, make the change highlighted below.</div>
        <div class="details"><pre class="code">
  public double getChangePercent() {
    return <span class="highlight">10.0</span> * this.change / this.price;
  }
</pre></div>
    </li>
        <li>
        <div class="header">Run StockWatcherTest in development mode (either in Eclipse of from the command line).</div>
        <div class="details">JUnit identifies the failed test case (testStockPriceCtor).<br />(Output if run in Eclipse.)</div>
        <div class="details"><img src="images/JUnitFailed.png" alt="screenshot: JUnit tests failed" /></div>
        <div class="details">...and provides a full-stack trace for the exception that resulted&mdash;an AssertionFailedError.<br />(Output if run from the command line.)</div>
        <div class="details"><pre class="code">
Testsuite: com.google.gwt.sample.stockwatcher.client.StockWatcherTest
Tests run: 2, Failures: 1, Errors: 0, Time elapsed: 16.443 sec

Testcase: testSimple took 16.238 sec
Testcase: testStockPriceCtor took 0.155 sec
  FAILED
Remote test failed at 172.29.212.75 / Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.0.1) Gecko/2008070208 Firefox/3.0.1
 expected=2.857142857142857 actual=0.2857142857142857 delta=0.0010
junit.framework.AssertionFailedError: Remote test failed at 172.29.212.75 / Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.0.1) Gecko/2008070208 Firefox/3.0.1
 expected=2.857142857142857 actual=0.2857142857142857 delta=0.0010
  at com.google.gwt.sample.stockwatcher.client.StockWatcherTest.testStockPriceCtor(StockWatcherTest.java:38)
  at com.google.gwt.sample.stockwatcher.client.__StockWatcherTest_unitTestImpl.doRunTest(__StockWatcherTest_unitTestImpl.java:7)
  ...
</pre></div>
<p class="note">
<b>Note:</b> When running from the command line, complete test reports (including stack traces) will be located in the <code>reports/htmlunit.dev/</code> directory for development mode
tests and <code>reports/htmlunit.prod/</code> directory for production mode tests. 
</p>
    </li>
    <li>
        <div class="header">Correct the error.</div>
    </li>
    <li>
        <div class="header">Rerun the tests.</div>
        <div class="details">Both the JUnit tests should complete successfully again.</div>
        <div class="details"><pre class="code">
&#91;junit&#93; Running com.google.gwt.sample.stockwatcher.client.StockWatcherTest
&#91;junit&#93; Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 16.114 sec</pre></div>
    </li>
</ol>

<p class="note">
<b>Best Practices:</b> Because there can be subtle differences between the way GWT applications work when compiled to JavaScript and when running as Java bytecode, make sure you run your unit tests in both development and production modes as you develop your application. Be aware, though, that if your test cases fail when running in production mode, you won't get the full stack trace that you see in development mode.
</p>

<h1>More about testing</h1>
<p>
At this point, you've created a JUnit test for StockWatcher and added a simple test case to it.
</p>
<p>
To learn more about all kinds of unit testing in GWT, see the Developer's Guide:
</p>
<ul>
    <li><a href="/webtoolkit/doc/latest/DevGuideTesting.html#DevGuideJUnitCreation">Creating a Test Case</a></li>
    <li><a href="/webtoolkit/doc/latest/DevGuideTesting.html#DevGuideJUnitSuites">Creating Test Suites</a></li>
    <li><a href="/webtoolkit/doc/latest/DevGuideTesting.html#DevGuideAsynchronousTesting">Asynchronous testing</a></li>
    <li><a href="/webtoolkit/doc/latest/DevGuideTesting.html#DevGuideJUnitSetUp">Setting up and tearing down JUnit test cases that use GWT code</a></li>
    <li><a href="/webtoolkit/doc/latest/DevGuideTesting.html#DevGuideJUnitBenchmarking">Performance Benchmarking</a></li>

</ul>


      </div><!-- end gc-pagecontent -->
   </div><!-- end gooey wrapper -->

    </div> <!-- end codesite content -->


<div id="gc-footer" dir="ltr">
  <div class="text">
    
      <div class="notice"><div id="notice" style="text-align: center; border: 1em 0em 1em 0em">
  Except as otherwise <a
  href="http://code.google.com/policies.html#restrictions">noted</a>,
  the content of this page is licensed under the <a rel="license"
  href="http://creativecommons.org/licenses/by/3.0/">Creative Commons
  Attribution 3.0 License</a>.
<!-- <rdf:RDF xmlns="http://web.resource.org/cc/" 
              xmlns:dc="http://purl.org/dc/elements/1.1/"
              xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
  <Work rdf:about="">
    <license rdf:resource="http://creativecommons.org/licenses/by/3.0/" />
  </Work>
  <License rdf:about="http://creativecommons.org/licenses/by/3.0/">
    <permits rdf:resource="http://web.resource.org/cc/Reproduction"/>
    <permits rdf:resource="http://web.resource.org/cc/Distribution"/>
    <requires rdf:resource="http://web.resource.org/cc/Notice"/>
    <requires rdf:resource="http://web.resource.org/cc/Attribution"/>
    <permits rdf:resource="http://web.resource.org/cc/DerivativeWorks"/>
  </License>
</rdf:RDF> -->
</div>
</div>
    
    &copy;2010 Google -
    <a href="/">Code Home</a> -
    <a href="/terms.html">Terms of Service</a> -
    <a href="/privacy.html">Privacy Policy</a> -
    <a href="/more/">Site Directory</a>
    <br> <br>
    Google Code offered in:
    <a href="/intl/en/">English</a> -
    <a href="/intl/es/">Español</a> -
    <a href="/intl/ja/">日本語</a> -
    <a href="/intl/ko/">한국어</a> -
    <a href="/intl/pt-BR/">Português</a> -
    <a href="/intl/ru/">Pусский</a> -
    <a href="/intl/zh-CN/">中文(简体)</a> -
    <a href="/intl/zh-TW/">中文(繁體)</a>
  </div>
</div><!-- end gc-footer -->

</div><!-- end gc-container -->

<script type="text/javascript">CODESITE_CSITimer['load'].tick('ats');</script>
<script src="/js/codesite_tail.pack.04102009.js" type="text/javascript"></script>




<script type="text/javascript">
var _gaq = _gaq || [];

_gaq.push(


    ['siteTracker._setAccount', 'UA-18071-1'],
    ['siteTracker._setDomainName', 'code.google.com'],
    ['siteTracker._setCookiePath', window.location.pathname.substring(0,
        window.location.pathname.lastIndexOf('/') + 1)],
    ['siteTracker._trackPageview']
);
(function() {
  var ga = document.createElement('script');

  ga.type = 'text/javascript';
  ga.async = true;
  ga.src = 'http://www.google-analytics.com/ga.js';
  (document.getElementsByTagName('head')[0] ||
   document.getElementsByTagName('body')[0]).appendChild(ga);
 })();
</script>




  </body>
</html>

