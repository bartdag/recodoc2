<!DOCTYPE html>













 
 
 
 
 





<html>
  <head>
    
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<title>Developer&#39;s Guide - Accessibility Support - Google Web Toolkit - Google Code</title>
<script type="text/javascript"><!--
(function(){function a(){this.t={};this.tick=function(c){this.t[c]=(new Date).getTime()};this.tick("start")}var b=new a;window.jstiming={Timer:a,load:b};if(window.external&&window.external.pageT)window.jstiming.pt=window.external.pageT;})();

var _tocPath_ = '/webtoolkit/_doc_toc.ezt';
var codesite_token = null;
var logged_in_user_email = null;
//--></script>
<link href="/css/codesite.pack.04102009.css" type="text/css" rel="stylesheet">
<script src="/js/codesite_head.pack.04102009.js" type="text/javascript"></script>
<script type="text/javascript">CODESITE_CSITimer['load'].tick('bhs');</script>
<link rel="search" type="application/opensearchdescription+xml" title="Google Code" href="/osd.xml">

<!--[if IE]><link rel="stylesheet" type="text/css" href="/css/iehacks.css"><![endif]-->

    <link href="/css/semantic_headers.css" rel="stylesheet" type="text/css" />
       <link href="/webtoolkit/css/local_extensions.css" rel="stylesheet" type="text/css"/>
  </head>

  <body class="gc-documentation">
    
    

    <div id="gb">
 <span>
  
   
    <a href="#"
       id="projects-dropdown" onclick="return false;"
       ><span style="text-decoration:underline">My favorites</span> <span style="font-size:.75em;">&#9660;</span></a>
    |
  
    <a id="lang-dropdown" href="/" onclick="return false;"><span style="text-decoration:underline">English</span> <span style="font-size:.75em;">&#9660;</span></a>
  
   
    | <a href="https://www.google.com/accounts/Login?continue=http%3A%2F%2Fcode.google.com%2Fwebtoolkit%2Fdoc%2Flatest%2FDevGuideA11y.html&amp;followup=http%3A%2F%2Fcode.google.com%2Fwebtoolkit%2Fdoc%2Flatest%2FDevGuideA11y.html" onclick="CODESITE_click('/gb/sc/signin');"><span style="style:text-decoration:underline">Sign in</span></a>
   
  
 </span>
</div>

<div class="gbh" style="left:0px;"></div>
<div class="gbh" style="right:0px;"></div>

<div id="gc-container">
<a id="top"></a>
<div id="skipto">
  <a href="#gc-pagecontent">Skip to page content</a>
  <a href="#gc-toc">Skip to main navigation</a>
</div>

<div id="gc-header">
  <div id="logo"><a href="/">
  
  
     <img src="//www.google.com/images/logos/code_logo.gif" height="40" width="167" alt="Google Code" style="border:0;margin:3px 0 0 0;">
  
  
  </a></div>
  <div id="search">
    <div id="searchForm" class="searchForm">
      <form id="cse" action="http://www.google.com/cse" accept-charset="utf-8" class="gsc-search-box" onsubmit="executeGSearch(document.getElementById('gsearchInput').value); return false;">
      <noscript>
      <input type="hidden" name="cref" value="http://code.google.com/cse/googlecode-context.xml">
      </noscript>
      <div id="gsc-search-box">
        <input id="gsearchInput" type="text" name="q" maxlength="2048" class="gsc-input" autocomplete="off" title="Google Code Search" style="width:345px">
        <div id="cs-searchresults" onclick="event.cancelBubble = true;"></div>
        <input title="Search" id="gsearchButton" class="gsc-search-button" name="sa" value="Search" type="submit">
        <div class="greytext">e.g. "ajax apis" or "open source"</div>
      </div>
      </form>
    </div> <!-- end searchForm -->
  </div> <!-- end search -->




</div> <!-- end gc-header -->


<div id="codesiteContent">

<a id="gc-topnav-anchor"></a>
<div id="gc-topnav">
  <h1 style="padding:0 0 0 6px;">Google Web Toolkit</h1>
  <ul id="docs" class="gc-topnav-tabs">

    <li id="home_link">
      <a href="/webtoolkit/" title="Google Web Toolkit home page">Home</a>
    </li>
  
    <li id="docs_link">
      <a href="/webtoolkit/overview.html" class="selected" title="Official Google Web Toolkit documentation">Docs</a>
    </li>
  
    <li>
      <a href="http://googlewebtoolkit.blogspot.com/" title="Official Google Web Toolkit blog">Blog</a>
    </li>
  
    <li>
      <a href="/webtoolkit/community.html" title="Community home for Google Web Toolkit">Community</a>
    </li>
  
    <li>
      <a href="/webtoolkit/terms.html" title="Google Web Toolkit terms of service">Terms</a>
    </li>
  
    <li>
      <a href="/webtoolkit/download.html" title="Download Google Web Toolkit">Download</a>
    </li>
  

  </ul>
</div> <!-- end gc-topnav -->


    <div class="g-section g-tpl-230">

      <div class="g-unit g-first" id="gc-toc">
        <ul>
  <li>
    <ul>
      <li><a href="/webtoolkit/download.html">Downloads</a></li>
    </ul>
  </li>
</ul>

<div class="line"></div>

<ul>
  <li><h2>Learn More</h2>
    <ul>
      <li><a href="/webtoolkit/overview.html">Overview</a></li>
      <li><a href="/webtoolkit/business.html">Business Apps</a></li>
      <li><a href="/webtoolkit/learnmore-sdk.html">SDK</a></li>
      <li><a href="/webtoolkit/speedtracer/">Speed Tracer</a></li>
      <li><a href="/eclipse/index.html">Plugin for Eclipse</a></li>
      <li><a href="/webtoolkit/examples/">Examples</a></li>
    </ul>
  </li>
    <li><h2>Get Started</h2>
    <ul>
      <li><a href="/webtoolkit/gettingstarted.html">SDK</a></li>
      <li><a href="/webtoolkit/usingeclipse.html">Set up Eclipse</a></li>
      <li><a href="/webtoolkit/speedtracer/get-started.html">Speed Tracer</a></li>
      <li><a href="/webtoolkit/doc/latest/tutorial/index.html">Tutorials</a>
        <ul>
          <li><a href="/webtoolkit/doc/latest/tutorial/gettingstarted.html">Get Started</a>
            <ul>
              <li><a href="/webtoolkit/doc/latest/tutorial/create.html">Create a GWT Project</a></li>
              <li><a href="/webtoolkit/doc/latest/tutorial/design.html">Design the Application</a></li>
              <li><a href="/webtoolkit/doc/latest/tutorial/buildui.html">Build the User Interface</a></li>
              <li><a href="/webtoolkit/doc/latest/tutorial/manageevents.html">Manage Events on the Client</a></li>
              <li><a href="/webtoolkit/doc/latest/tutorial/codeclient.html">Code Functionality on the Client</a></li>
              <li><a href="/webtoolkit/doc/latest/tutorial/debug.html">Debug a GWT Application</a></li>
              <li><a href="/webtoolkit/doc/latest/tutorial/style.html">Apply Style</a></li>
              <li><a href="/webtoolkit/doc/latest/tutorial/compile.html">Compile a GWT Application</a></li>
            </ul>
          </li>
          <li><a href="/webtoolkit/doc/latest/tutorial/i18n.html">Internationalization</a></li>
          <li><a href="/webtoolkit/doc/latest/tutorial/clientserver.html">Client-Server Communication</a>
            <ul>
              <li><a href="/webtoolkit/doc/latest/tutorial/RPC.html">GWT RPC</a></li>
              <li><a href="/webtoolkit/doc/latest/tutorial/JSON.html">JSON</a></li>
              <li><a href="/webtoolkit/doc/latest/tutorial/JSONphp.html">JSON - PHP</a></li>
              <li><a href="/webtoolkit/doc/latest/tutorial/Xsite.html">Cross-Site</a></li>
            </ul>
          </li>
          <li><a href="/webtoolkit/doc/latest/tutorial/JUnit.html">JUnit Testing</a></li>
          <li><a href="/webtoolkit/doc/latest/tutorial/appengine.html">Google App Engine</a></li>
          <li><a href="/webtoolkit/doc/latest/tutorial/mvp-architecture.html">MVP Architecture</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><h2>Documentation</h2>
    <ul>
      <li><a href="/webtoolkit/doc/latest/ReleaseNotes.html">What's Coming in 2.1?</a>
        <ul>
          <li><a href="/webtoolkit/release-notes.html">Release Notes</a></li>
        </ul>
      </li>
      <li><a href="/webtoolkit/doc/latest/DevGuideOrganizingProjects.html">Organize Projects</a></li>
      <li><a href="/webtoolkit/doc/latest/DevGuideCompilingAndDebugging.html">Compile &amp; Debug</a></li>
      <li><a href="/webtoolkit/doc/latest/DevGuideCodingBasics.html">Coding Basics</a>
        <ul>
          <li><a href="/webtoolkit/doc/latest/DevGuideCodingBasicsClient.html">Client-Side Code</a></li>
          <li><a href="/webtoolkit/doc/latest/DevGuideCodingBasicsCompatibility.html">Compatibility with the Java Language and Libraries</a></li>
          <li><a href="/webtoolkit/doc/latest/DevGuideCodingBasicsHistory.html">History</a></li>
          <li><a href="/webtoolkit/doc/latest/DevGuideCodingBasicsFormatting.html">Number and Date Formatting</a></li>
          <li><a href="/webtoolkit/doc/latest/DevGuideCodingBasicsDelayed.html">Programming Delayed Logic</a></li>
          <li><a href="/webtoolkit/doc/latest/DevGuideCodingBasicsJSON.html">Working with JSON</a></li>
          <li><a href="/webtoolkit/doc/latest/DevGuideCodingBasicsXML.html">Working with XML</a></li>
          <li><a href="/webtoolkit/doc/latest/DevGuideCodingBasicsJSNI.html">JavaScript Native Interface (JSNI)</a></li>
          <li><a href="/webtoolkit/doc/latest/DevGuideCodingBasicsOverlay.html">JavaScript Overlay Types</a></li>
          <li><a href="/webtoolkit/doc/latest/DevGuideCodingBasicsDeferred.html">Deferred Binding</a></li>
        </ul>
      </li>
      <li><a href="/webtoolkit/doc/latest/DevGuideUi.html">Build User Interfaces</a>
        <ul>
          <li><a href="/webtoolkit/doc/latest/DevGuideUiBrowser.html">Cross-Browser Support</a></li>
          <li><a href="/webtoolkit/doc/latest/DevGuideUiPanels.html">Layout Using Panels</a></li>
          <li><a href="/webtoolkit/doc/latest/DevGuideUiWidgets.html">Widgets</a></li>
          <li><a href="/webtoolkit/doc/latest/DevGuideUiCustomWidgets.html">Creating Custom Widgets</a></li>
          <li><a href="/webtoolkit/doc/latest/DevGuideUiDom.html">Working with the DOM</a></li>
          <li><a href="/webtoolkit/doc/latest/DevGuideUiHandlers.html">Events and Handlers</a></li>
          <li><a href="/webtoolkit/doc/latest/DevGuideUiCss.html">Working with CSS</a></li>
          <li><a href="/webtoolkit/doc/latest/DevGuideUiBinder.html">Declarative UI with UiBinder</a></li>
          <li><a href="/webtoolkit/doc/latest/DevGuideUiImageBundles.html">Bundling Image Resources</a></li>
        </ul>
      </li>
      <li><a href="/webtoolkit/doc/latest/DevGuideA11y.html">Accessibility</a></li>
      <li><a href="/webtoolkit/doc/latest/DevGuideI18n.html">Internationalization</a>
        <ul>
         <li><a href="/webtoolkit/doc/latest/DevGuideI18nLocale.html">Locale</a></li>
         <li><a href="/webtoolkit/doc/latest/DevGuideI18nConstants.html">Constants</a></li>
         <li><a href="/webtoolkit/doc/latest/DevGuideI18nMessages.html">Messages</a></li>
         <li><a href="/webtoolkit/doc/latest/DevGuideI18nPluralForms.html">Plural Forms</a></li>
         <li><a href="/webtoolkit/doc/latest/DevGuideUiBinderI18n.html">UiBinder</a></li>
        </ul>
      </li>
      <li><a href="/webtoolkit/doc/latest/DevGuideServerCommunication.html">Communicate with a Server</a></li>
      <li><a href="/webtoolkit/doc/latest/DevGuideTesting.html">Test with JUnit</a>
        <ul>
          <li><a href="/webtoolkit/doc/latest/DevGuideTestingHtmlUnit.html">HtmlUnit</a></li>
          <li><a href="/webtoolkit/doc/latest/DevGuideTestingRemoteTesting.html">Remote Testing</a></li>
          <li><a href="/webtoolkit/doc/latest/DevGuideTestingCoverage.html">Code Coverage</a></li>
        </ul>
      </li>
      <li><a href="/webtoolkit/doc/latest/DevGuideDeploying.html">Deploy</a></li>
      <li><a href="/webtoolkit/doc/latest/DevGuideOptimizing.html">Optimize</a>
        <ul>
          <li><a href="/webtoolkit/doc/latest/DevGuideCodeSplitting.html">Code Splitting</a></li>
          <li><a href="/webtoolkit/doc/latest/DevGuideCompileReport.html">Compile Report</a></li>
          <li><a href="/webtoolkit/doc/latest/DevGuideClientBundle.html">Client Bundle</a></li>
          <li><a href="/webtoolkit/doc/latest/DevGuideLightweightMetrics.html">Lightweight Metrics</a></li>
        </ul>
      </li>
      <li><a href="/webtoolkit/doc/latest/RefGuide.html">Reference</a>
        <ul>
          <li><a href="http://google-web-toolkit.googlecode.com/svn/javadoc/2.1/index.html?overview-summary.html">SDK API Reference (Javadoc)</a></li>
          <li><a href="/webtoolkit/doc/latest/RefJreEmulation.html">JRE Emulation Reference</a></li>
          <li><a href="/webtoolkit/doc/latest/RefWidgetGallery.html">Widget List</a></li>
        </ul>
      </li>
      <li><a href="/webtoolkit/doc/latest/FAQ.html">FAQ</a>
        <ul>
          <li><a href="/webtoolkit/doc/latest/FAQ_GettingStarted.html">Get Started</a></li>
          <li><a href="/webtoolkit/doc/latest/FAQ_DebuggingAndCompiling.html">Debug and Compile</a></li>
          <li><a href="/webtoolkit/doc/latest/FAQ_UI.html">Build the User Interface</a></li>
          <li><a href="/webtoolkit/doc/latest/FAQ_Client.html">Develop Client-side Code</a></li>
          <li><a href="/webtoolkit/doc/latest/FAQ_Server.html">Communicate with a Server</a></li>
          <li><a href="/webtoolkit/doc/latest/FAQ_Troubleshooting.html">Troubleshoot</a></li>
        </ul>
      </li>
      <li><a href="/webtoolkit/doc/latest/DevGuideGlossary.html">Glossary</a></li>
      <li><a href="/webtoolkit/previousdocs.html">Docs for Previous Versions</a></li>
    </ul>
  </li>
  <li><h2>Tools</h2>
    <ul>
      <li><a href="/eclipse/">Plugin for Eclipse</a></li>    
      <li><a href="/webtoolkit/doc/latest/RefCommandLineTools.html">SDK Command-line Tools</a></li>
      <li><a href="/webtoolkit/speedtracer/">Speed Tracer</a>
        <ul>
          <li><a href="/webtoolkit/speedtracer/get-started.html">Getting Started</a></li>
          <li><a href="/webtoolkit/speedtracer/speed-tracer-examples.html">Examples</a></li>
          <li><a href="/webtoolkit/speedtracer/hint-description.html">Hints</a></li>
          <li><a href="/webtoolkit/speedtracer/data-dump-format.html">Data Dump Format</a></li>
          <li><a href="/webtoolkit/speedtracer/logging-api.html">Logging API</a></li>
          <li><a href="/webtoolkit/speedtracer/faq.html">FAQ</a></li>
        </ul>
      </li>
      <li><a href="/webtoolkit/tools/gwtdesigner/index.html">GWT Designer</a></li>
      <li><a href="/webtoolkit/tools/wbpro/index.html">WindowBuilder Pro</a></li>
      <li><a href="/webtoolkit/tools/wintester/html/index.html">WindowTester Pro</a></li>
      <li><a href="/webtoolkit/tools/codepro/doc/index.html">CodePro AnalytiX</a></li>
    </ul>
  </li>



  <li><h2>Resources</h2>
    <ul>
      <li><a href="/webtoolkit/articles.html">Articles</a></li>
      <li><a href="/webtoolkit/books.html">Books</a></li>
      <li><a href="/webtoolkit/community.html">Community</a>
        <ul>
          <li><a href="http://gwtgallery.appspot.com">App Gallery</a></li>
          <li><a href="/webtoolkit/developer_spotlight.html">Developer Spotlight</a></li>
         </ul>
      </li>
      <li><a href="/webtoolkit/googleapilibraries.html">Google API Libraries</a></li>
      <li><a href="/webtoolkit/tools.html">Tools &amp; Libraries</a></li>
      <li><a href="/webtoolkit/media_gallery.html">Presentations</a></li>
      <li><a href="/webtoolkit/makinggwtbetter.html">Making GWT Better</a></li>
      <li><a href="/webtoolkit/lifeofanissue.html">Issue Tracking</a></li>
    </ul>
  </li>
</ul>



        <a class="hidden" href="#gc-topnav-anchor">More Google Web Toolkit resource links</a>
      </div>

      <div class="g-unit" id="gc-pagecontent">
        <script type="text/javascript">CODESITE_docEarlyProcessing();</script>


        <h1 class="page_title">Developer&#39;s Guide - Accessibility Support</h1>





<ol class="toc" id="pageToc">
  <li><a href="#DevGuideAccessibility">Overview</a></li>
  <li><a href="#DevGuideAccessibilityHowTo">Making Widgets Accessible</a></li>
  <li><a href="#AccessibilityClass">Class com.google.gwt.user.client.ui.Accessibility</a></li>
  <li><a href="#ariaRoles">Adding ARIA Roles</a></li>
  <li><a href="#ariaStates">Adding ARIA States</a></li>
  <li><a href="#kbdA11y">Adding Keyboard Accessibility</a></li>
  <li><a href="#selectionChanges">Indicating Selection Changes</a></li>
  <li><a href="#labels">Associating Meaningful Labels</a></li>
  <li><a href="#speaking">Automatically Speaking Highlighted Content</a></li>
  <li><a href="#widgets">General Advice For Widget Developers</a></li>
</ol>


<h1 id="DevGuideAccessibility">Overview</h1>

<h2>Screen Readers</h2>

<p>A screen reader is an assistive application that interprets what is displayed on the screen for a blind or visually impaired user. Screen readers can interact with the user in
a variety of ways, including speaking out loud or even producing a braille output.</p>

<h3>Who uses screen readers?</h3>

<p>Many people find it helpful to be able to interact with their computers in multiple ways. Though Google does not keep statistics on how many of our users are using screen
readers, as the population ages, more people will require assistive technology. It is important to make sure that our applications are accessible for everybody.</p>

<h3>How do screen readers work?</h3>

<p>Screen readers listen for a standard set of events that are raised by platform-specific APIs. For example, when an alert window pops up on your screen, Microsoft Windows would
expose this event using the Microsoft Active Accessibility API, while a Linux machine would use the Linux Access Toolkit. A screen reader will then communicate this change to the
user.</p>

<h2>GWT and Screen Readers</h2>

<p>Ajax applications are often written in ways that screen readers have difficulty interpreting correctly. A GWT developer writing a tree widget, for example, might use a list
element that has been altered to behave like a tree control. But a screen reader would present the control as a list - an incorrect description that renders the tree unusable.
Screen readers will also treat HTML span or div elements as regular static text elements, regardless of the presence of JavaScript event handlers for user interaction; you can
easily imagine how this causes problems.</p>

<h2>ARIA</h2>

<p>ARIA is a specification for making rich Internet applications accessible via a standard set of DOM properties. It is currently <a href="http://www.w3.org/WAI/intro/aria">a work in progress at the W3C</a>. More information can be found at this <a href="http://wiki.codetalks.org/wiki/index.php/Main_Page">ARIA page referenced by
the Mozilla Developer Center</a>.</p>

<p>Adding accessibility support to GWT widgets involves adding the relevant properties to DOM elements that can be used by browsers to raise events during user interaction. Screen
readers can react to these events to represent the function of GWT widgets. The DOM properties specified by ARIA are classified into Roles and States.</p>

<p>The ARIA property <tt>role</tt> is an indication of the widget type, and therefore describes the way the widget should behave. A role is static and does not change over the
lifetime of widget. Some examples of ARIA roles: <tt>tree</tt>, <tt>menubar</tt>, <tt>menuitem</tt>, <tt>tab</tt>. The ARIA role of a widget is expressed as a DOM attribute named
<tt>role</tt> with its value set to one of the ARIA role strings.</p>

<p>There are also ARIA properties that describe the state of a widget. For example, a checkbox widget could be in the states &quot;checked&quot; or &quot;unchecked&quot;. A state is dynamic and
should be updated during user interaction. Some examples of ARIA states: <tt>aria-disabled</tt>, <tt>aria-pressed</tt>, <tt>aria-expanded</tt>, <tt>aria-haspopup</tt>. Note that
an ARIA state itself a DOM attribute -- for example, a toggle button widget that wants to express that it has been pressed will have an attribute <tt>aria-pressed</tt> set to
true.</p>

<p>The role of a widget determines the set of states that it supports. A widget with the role of <tt>list</tt>, for example, would not expose the <tt>aria-pressed</tt> state.</p>

<p>Also, accessible widgets require keyboard support. Screen readers will speak the element that has keyboard focus, so keyboard accessibility can be accomplished by moving focus
to different elements in response to keyboard commands.</p>

<h2>GWT and ARIA</h2>

<p>Once ARIA roles and states are added to the DOM of a GWT widget, browsers will raise the appropriate events to the screen reader. As ARIA is still a work in progress, browsers
may not raise an event for every ARIA property, and screen readers may not recognize all of the events being raised.</p>

<p>Many GWT widgets now have keyboard accessibility and ARIA properties. These include <a href="http://google-web-toolkit.googlecode.com/svn/javadoc/2.0/com/google/gwt/user/client/ui/CustomButton.html">CustomButton</a>,
 <a href="http://google-web-toolkit.googlecode.com/svn/javadoc/2.0/com/google/gwt/user/client/ui/Tree.html">Tree</a>, <a href="http://google-web-toolkit.googlecode.com/svn/javadoc/2.0/com/google/gwt/user/client/ui/TreeItem.html">TreeItem</a>,
 <a href="http://google-web-toolkit.googlecode.com/svn/javadoc/2.0/com/google/gwt/user/client/ui/MenuBar.html">MenuBar</a>, <a href="http://google-web-toolkit.googlecode.com/svn/javadoc/2.0/com/google/gwt/user/client/ui/MenuItem.html">MenuItem</a>,
 <a href="http://google-web-toolkit.googlecode.com/svn/javadoc/2.0/com/google/gwt/user/client/ui/TabBar.html">TabBar</a>, and <a href="http://google-web-toolkit.googlecode.com/svn/javadoc/2.0/com/google/gwt/user/client/ui/TabPanel.html">TabPanel</a>.
 Also, all widgets that inherit from FocusWidget now have a tabindex by default, allowing for better keyboard navigation.</p>


<h1 id="DevGuideAccessibilityHowTo">Making Widgets Accessible</h1>

<p>The remainder of this page describes how to add accessibility
support to your GWT application and widgets. A variety of different
techniques are discussed; there is not yet a standard and
generally-applicable approach for making AJAX applications accessible,
but we provide some suggestions.</p>

<h1 id="AccessibilityClass">Class com.google.gwt.user.client.ui.Accessibility</h1>

<p>The <a href="http://google-web-toolkit.googlecode.com/svn/javadoc/2.0/com/google/gwt/user/client/ui/Accessibility.html">Accessibility</a> class implements the needed accessor
and modifier methods for manipulating DOM attributes defined by the ARIA specifications. It also defines constants for the ARIA role and state names, which are used by GWT widgets.</p>

<h1 id="ariaRoles">Adding ARIA Roles</h1>

<p>The ARIA attribute <tt>role</tt> is an indication of the widget type; it describes the way the widget should behave. Roles are static and should not change during the lifetime
of a widget. Widget authors should:</p>

<ul>
<li>Pick the right role for the widget from the list of supported ARIA roles.</li>

<li>Set this attribute at construction time.</li>
</ul>

<p>The following is an example taken from the <a href="http://google-web-toolkit.googlecode.com/svn/javadoc/2.0/com/google/gwt/user/client/ui/CustomButton.html">CustomButton</a> widget.
Adding the <tt>button</tt> role indicates to an assistive technology that the widget will behave like a
button.</p>

<pre class="prettyprint">
  protected CustomButton() {
    ...
    // Add a11y role &quot;button&quot;. Accessibility.ROLE_BUTTON is the String constant
    // &quot;button&quot;
    Accessibility.setRole(getElement(), &quot;role&quot;, Accessibility.ROLE_BUTTON);
    ...
  }
</pre>

<p>Note that some of the role names have already been defined as constants in the Accessibility class.</p>

<h1 id="ariaStates">Adding ARIA States</h1>

<p>An ARIA state is an additional attribute that reflects the current state of a widget; for example, whether a checkbox is checked or unchecked. A state should be initialized at
the time a widget is constructed and updated during user interaction.</p>

<p>Note that:</p>

<ul>
<li>A widget can have numerous state attributes, whereas a widget can only ever have one role attribute.</li>

<li>State attributes are dynamic and change during the widget's lifetime. A role once set does not change.</li>
</ul>



<p>Also, some of the relevant state names are defined as constants in the Accessibility class.</p>

<h3>Initializing States</h3>

<p>Once a specific ARIA role has been associated with a widget, it is important to check which states are associated with that role. For example, the <tt>button</tt> role has two
state attributes:</p>

<dl>
<dt><code>aria-disabled</code></dt>
<dd>Indicates that the widget is present, but is not allowed for user actions.</dd>

<dt><code>aria-pressed</code></dt> 
<dd>Used for buttons that are toggleable to indicate their current pressed state.</dd>
</dl>


<p>The <tt>aria-pressed</tt> state is not used in the <a href="http://google-web-toolkit.googlecode.com/svn/javadoc/2.0/com/google/gwt/user/client/ui/CustomButton.html">CustomButton</a> widget,
as it is not supported by most screen readers yet. However, the code in the example below is the code
that we would write when the <tt>aria-pressed</tt> state is better supported.</p>

<p>In the CustomButton widget, the <tt>aria-pressed</tt> ARIA state is initialized as follows:</p>

<pre class="prettyprint">
  protected CustomButton() {
    ...
    // Add a11y state &quot;aria-pressed&quot; using the constant in the Accessibility class
    Accessibility.setState(getElement(), Accessibility.STATE_PRESSED, &quot;false&quot;);
  }
</pre>

<h3>Updating States During User Interaction</h3>

<p>The <a href="http://google-web-toolkit.googlecode.com/svn/javadoc/2.0/com/google/gwt/user/client/ui/CustomButton.html">CustomButton</a> widget has support for multiple button faces, giving developers more stylistic control. Also, unlike the
<a href="http://google-web-toolkit.googlecode.com/svn/javadoc/2.0/com/google/gwt/user/client/ui/Button.html">Button</a> widget, a CustomButton can be toggleable, as is
the case with the CustomButton subclass <a href="http://google-web-toolkit.googlecode.com/svn/javadoc/2.0/com/google/gwt/user/client/ui/ToggleButton.html">ToggleButton</a>. Event handlers attached
to the underlying DOM element update the button faces when the button is pressed. At the same time,
the <a href="http://google-web-toolkit.googlecode.com/svn/javadoc/2.0/com/google/gwt/user/client/ui/Accessibility.html#setState(com.google.gwt.user.client.Element, java.lang.String, java.lang.String)">Accessibility.setState(Element, String, String)</a>
method should be used to manipulate the DOM and update the value of the ARIA state <tt>aria-pressed</tt>:</p>

<pre class="prettyprint">
  void toggleDown() {
    ...
    // Update a11y state &quot;aria-pressed&quot; using the constant in the Accessibility class
    Accessibility.setState(getElement(), Accessibility.STATE_PRESSED, isDown() ? &quot;true&quot; : &quot;false&quot;);
  }
</pre>

<p>It is important to make sure that all event handlers that change the state of the widget also change the ARIA state.</p>

<h1 id="kbdA11y">Adding Keyboard Accessibility</h1>

<p>Keyboard accessibility is a key requirement when access-enabling GWT widgets. When developing a new widget, ensure that it is keyboard accessible from the outset; adding
keyboard accessibility later can be difficult. Screen readers will speak the element that has keyboard focus, so keyboard accessibility can be accomplished by moving focus to
different elements in response to keyboard commands.</p>

<p>Proper keyboard accessibility affords the following end-user behavior:</p>

<ul>
<li>Users can tab to move focus to the widget.</li>

<li>When the widget receives focus, the screen reader will interpret the ARIA roles and states that are set on the widget.</li>

<li>The screen reader will speak a description of the widget, and its textual content.</li>
</ul>



<p>By default, the only elements in the HTML DOM that can receive keyboard focus are anchor and form fields. However, setting the DOM property <tt>tabIndex</tt> (note that this
corresponds to HTML attribute <tt>tabindex</tt>) to 0 will place such elements in the default tab sequence and thereby enable them to receive keyboard focus. Setting <tt>tabIndex
= -1</tt>, while removing the element from the tab sequence, still allows the element to receive keyboard focus programmatically.</p>

<p>In GWT, any widget that extends the <a href="http://google-web-toolkit.googlecode.com/svn/javadoc/2.0/com/google/gwt/user/client/ui/FocusWidget.html">FocusWidget</a> abstract class will be keyboard focusable by default. The FocusWidget abstract class includes a
<a href="http://google-web-toolkit.googlecode.com/svn/javadoc/2.0/com/google/gwt/user/client/ui/FocusWidget.html#setFocus(boolean)">setFocus(boolean)</a> method that
can be used to programmatically set the focus or remove focus on the widget. FocusWidget also includes a 
<a href="http://google-web-toolkit.googlecode.com/svn/javadoc/2.0/com/google/gwt/user/client/ui/FocusWidget.html##setTabIndex(int)">setTabIndex(int)</a> method that allows the user to set the DOM property
<tt>tabIndex</tt> for the widget.</p>

<p>Keep in mind that extending FocusWidget does not guarantee focusability for your widget. The base element of the the FocusWidget (passed to the superclass constructor) must be
a naturally focusable HTML element.</p>

<p>For widgets that don't extend the FocusWidget abstract class, ensuring keyboard accessibility can be more difficult. Different browsers set focus in different ways, and focus
on arbitrary elements is not supported everywhere. You can use <a href="http://google-web-toolkit.googlecode.com/svn/javadoc/2.0/com/google/gwt/user/client/ui/FocusPanel.html">FocusPanel</a> to enclose elements that need to receive keyboard
focus; just be sure to test your widget on different browsers.</p>

<p>For an example of using the <tt>tabIndex</tt> property, see the MenuBar widget. The root menu is the only one that should be in the tab sequence; its sub-menus are not. To
achieve this, the tab index is set to 0 in the MenuBar's constructor, and as new MenuBars are added as sub-menus, their tab indexes are reset to -1.</p>

<h1 id="selectionChanges">Indicating Selection Changes</h1>

<p>Some widgets, such as GWT's <a href="http://google-web-toolkit.googlecode.com/svn/javadoc/2.0/com/google/gwt/user/client/ui/Tree.html">Tree</a> and <a href="http://google-web-toolkit.googlecode.com/svn/javadoc/2.0/com/google/gwt/user/client/ui/MenuBar.html">MenuBar</a> widgets,
consist of a container with a set of items. The container has a naturally focusable DOM element, but the items themselves
do not. The focusable element receives all keyboard input, and causes visual changes in the contained items to indicate a change in item selection. For example, GWT's Tree widget
contains <a href="http://google-web-toolkit.googlecode.com/svn/javadoc/2.0/com/google/gwt/user/client/ui/TreeItem.html">TreeItems</a>; both of these elements are made up of divs.
However, the Tree also has a naturally focusable hidden element which receives keyboard events. Whenever the user
hits the arrow keys, this element handles the event and causes the appropriate TreeItem to be highlighted.</p>

<p>While this technique holds up for sighted users, it plays havoc with screen readers. Since the TreeItems themselves never get natural focus when selected, there is no way for
the screen reader to know that the item selection has changed. One possible way to remedy this would be to have each TreeItem be naturally focusable. Unfortunately, TreeItems can
contain more than just text -- they can contain other widgets, which themselves can be focusable. Here, delegating focus properly would be fairly complex -- each TreeItem would
have to handle all of the key events for its child widget, and decide whether or not to delegate key events to its child (for user interaction with the child widget), or to handle
the key events itself (for Tree navigation). Keep in mind that hooking up keyboard event handlers for each item would become unwieldy, as Trees may become very large. One can
avoid doing this by relying on the natural event bubbling of key events, and having an element at the root of the Tree widget be responsible for receiving events.</p>

<p>Another way to remedy the situation is to use the ARIA <tt>aria-activedescendant</tt> state. This state is set on an element that is naturally focusable, and its value is the
HTML id of the currently-selected item. Whenever the item changes, the <tt>aria-activedescendant</tt> value should be updated to the id of the newly-selected item. The screen
reader will notice the change in the value and read the element corresponding to the id. Below is an example of how this technique is used on the GWT Tree and TreeItem
widgets.</p>

<p>First, we set roles on the Tree's root element and its focusable element:</p>

<pre class="prettyprint">
  // Called from Tree(...) constructor
  private void init(TreeImages images, boolean useLeafImages) {
    
    ...
    
    // Root element of Tree is a div
    setElement(DOM.createDiv());

    ...
    
    // Create naturally-focusable element
    focusable = FocusPanel.impl.createFocusable();

    ...
    
    // Hide element and append it to root div
    DOM.setIntStyleAttribute(focusable, &quot;zIndex&quot;, -1);
    DOM.appendChild(getElement(), focusable);

    // Listen for key events on the root element
    sinkEvents(Event.MOUSEEVENTS | Event.ONCLICK | Event.KEYEVENTS);
    
    ...
    
    // Add a11y role &quot;tree&quot; to root element
    Accessibility.setRole(getElement(), Accessibility.ROLE_TREE);
    
    // Add a11y role &quot;treeitem&quot; to focusable element. This is necessary for some screen 
    // readers to interpret the aria-activedescendant state of this element.     
    Accessibility.setRole(focusable, Accessibility.ROLE_TREEITEM);       
 }
</pre>

<p>Whenever an item selection changes, the value of the aria-activedescendant state is set on the focusable element, and the ARIA states of the currently-selected item are
set:</p>

<pre class="prettyprint">
  // Called after a new item has been selected
  private void updateAriaAttributes() {

    // Get the element which contains the text (or widget) content within
    // the currently-selected TreeItem
    Element curSelectionContentElem = curSelection.getContentElem();

    ...
    
    // Set the 'aria-level' state. To do this, we need to compute the level of
    // the currently selected item.    
    Accessibility.setState(curSelectionContentElem, Accessibility.STATE_LEVEL,
        String.valueOf(curSelectionLevel + 1));

    // Set other ARIA states
    ...
    
    // Update the 'aria-activedescendant' state for the focusable element to
    // match the id of the currently selected item.
    
    Accessibility.setState(focusable, Accessibility.STATE_ACTIVEDESCENDANT,
        DOM.getElementAttribute(curSelectionContentElem, &quot;id&quot;));
  }
</pre>

<p>Though it is not shown in this code snippet, when TreeItems are created, they are constructed out of several divs, only one of which contains the content that we wish to be
interpreted by the screen reader. This div is assigned a unique DOM id (which is generated using the
<a href="http://google-web-toolkit.googlecode.com/svn/javadoc/2.0/com/google/gwt/user/client/DOM.html#createUniqueId()">DOM.createUniqueId()</a> method), and a role of <tt>treeitem</tt>. These
attributes are not set on the root TreeItem div because it contains a child image, which we do not want to be read.</p>

<h3>Caveats with this Approach</h3>

<p>The obvious problem with this approach is that unique DOM ids need to be assigned to all of the possible items that could be selected. While this is easy enough to implement,
it seems unwieldy to assign a DOM id to each item.</p>

<p>Also, there is a subtle problem with using the <tt>aria-activedescendant</tt> state. Originally, the intended use-case for this state was the implementation of a listbox with
divs. Whenever the <tt>aria-activedescendant</tt> value of the parent div (which was the one with natural focus) would change, the screen reader would read out the text of the
list item with the corresponding id, ignoring any roles or states set on the selected item. This is fine for widgets as simple as a listbox; the selected item has enough text for
the user to understand what is selected. However, in the case of a Tree, the selected item's text may not be enough. For example, which level of the tree is the selected item
on?</p>

<p>Some screen readers have started to do more than just read the text of items selected with <tt>aria-activedescendant</tt>, interpreting the item just as they would any other
element that received keyboard focus. However, not all screen readers do this yet.</p>

<h1 id="labels">Associating Meaningful Labels</h1>

<p>A web page will often include human-readable descriptive elements (such as <a href="http://google-web-toolkit.googlecode.com/svn/javadoc/2.0/com/google/gwt/user/client/ui/Label.html">Label</a> and
<a href="http://google-web-toolkit.googlecode.com/svn/javadoc/2.0/com/google/gwt/user/client/ui/HTML.html">HTML</a> widgets) that explain the purpose of a particular widget. However, the association
between a widget and its description may not be obvious to a browser or a screen reader. ARIA defines the <tt>aria-labelledby</tt> state which can be used to explicitly associate
a widget with one or more descriptive elements.</p>

<p>In order to associate a label with a widget, ensure that descriptive elements all have a unique id. The assigned id can later be used with to set the <tt>aria-labelledby</tt>
state of a widget to refer to the id values of any descriptive elements, thereby associating those descriptive elements with the widget.</p>

<h1 id="speaking">Automatically Speaking Highlighted Content</h1>

<p>AJAX components often highlight an item of interest without moving keyboard focus to that item. This creates a good end-user experience when using components such as
autocomplete widgets; the user can continue to type and obtain further refinements to the available set of choices. Because screen readers traditionally attempt to speak the item
that has keyboard focus, they will not read highlighted items. ARIA live regions help make widgets such as autocomplete boxes usable for visually impaired users.</p>

<h3>How It Works</h3>

<p>The ARIA role <tt>region</tt> is used to declare areas that hold such live content, i.e., content that updates dynamically without having keyboard focus. The ARIA state
<tt>aria-live</tt> on such regions specifies the priority of such updates; think of this as a politeness setting. Here is a code example that should provide the general idea of
how to implement this technique for an auto-complete widget:</p>

<h3>Initialize Live Region</h3>

<p>The ARIA role <tt>region</tt> is added when instantiating the relevant DOM nodes in the AutoCompleteWidget constructor:</p>

<pre class="prettyprint">
  public AutoCompleteWidget() {
    ...
    // Create a hidden div where we store the current item text for a
    // screen reader to speak
    ariaElement = DOM.createDiv();
    DOM.setStyleAttribute(ariaElement, &quot;display&quot;, &quot;none&quot;);
    Accessibility.setRole(ariaElement, &quot;role&quot;, &quot;region&quot;);
    Accessibility.setState(ariaElement, &quot;aria-live&quot;, &quot;rude&quot;);
    DOM.appendChild(getElement(), ariaElement);
  }
</pre>

<p>Here, we have created a hidden div element that holds the content to be spoken. We've declared it to have <tt>role = 'region'</tt> and <tt>live = 'rude'</tt>; the latter
setting specifies that updates to this content have the highest priority. Next, we set up the needed associations so that the set of suggestions returned as the user types into
the AutoCompleteWidget's text box are put in hidden div:</p>

<pre class="prettyprint">
    // This method is called via a keyboard event handler
    private void showSuggestions(Collection suggestions) {
      if (suggestions.size() &gt; 0) {
    
        // Popupulate the visible suggestion pop-up widget with the new selections
        // and show them
        ....
    
        // Generate the hidden div content based on the suggestions
    
        String hiddenDivText = &quot;Suggestions &quot;;

        for (Suggestion curSuggestion : suggestions) {
          hiddenDivText += &quot; &quot; + curSuggestion.getDisplayString();
        }
    
        DOM.setInnerText(ariaElement, hiddenDivText);
      }
    }
</pre>

<h3>Problems with this Approach</h3>

<p>With this technique, the developer has complete control over the text that is spoken by the screen reader. While this seems like a good thing for the developer, it's not great
for users of screen readers. Taking this approach, developers of AutoComplete widgets may decide on different text that the screen reader should read. For example, another screen
reader might prefix each suggestion with the &quot;Suggestion x&quot;, where x is the index of the suggestion in the list. This leads to an inconsistent experience across applications. If
both developers were able to make use of ARIA roles and states, then a more consistent experience would result, in accordance with the ARIA specification.</p>

<p>A more direct problem with this approach is internationalization. Most developers would realize that the list of suggestions needs to be translated into different languages;
this list is directly displayed on the screen. However, the word 'Suggestions', which is the first word on the live region, could easily be missed, since it is never visually
displayed to the user. These sorts of descriptive terms must also be translated. If ARIA roles and states could be used, then translation of the spoken terms associated with the
roles and states would be the screen reader's job; developers would only need to be responsible for translating their content.</p>

<h1 id="widgets">General Advice For Widget Developers</h1>

<p>First and foremost, use native HTML controls whenever possible. Native HTML controls are well understood by screen readers. They do not require ARIA roles and states, which has
two main benefits:</p>

<ul>
<li>ARIA is not yet supported by all major browsers. Screen reader and browser developers have already done the work to make HTML controls accessible.</li>

<li>Reimplementing native HTML controls using divs (for example) can cause poor performance. For example, suppose a developer were to re-implement a listbox using divs. One of the
ARIA states that applies to the <tt>listitem</tt> role is <tt>aria-posinset</tt>. This value indicates the position of the item within its parent container, which corresponds to
the item's index in the listbox. The problem is that every time an item is added or removed from the listbox, one has to iterate through all of the items in the list, adjusting
their <tt>aria-posinset</tt> values. Though there are some optimizations that can be done, this is still much slower than native HTML select elements.</li>
</ul>

<p>If native HTML controls cannot be used and a custom widget has to be built, keep in mind that it is much easier to develop an accessible widget from the beginning than to go
back and add accessibility support to an existing widget. While adding ARIA roles and states is relatively easy, ensuring that the appropriate elements receive keyboard focus
during user interaction can be more complicated.</p>

<p>Also, widgets that subclass other widgets should end up with the appropriate ARIA roles and states. Your superclass widget might already specify a certain ARIA role, and while
the Accessibility.setRole(Element, String) method will overwrite a previous ARIA role in the same element, a complicated DOM configuration may result in different ARIA roles being
placed in different elements.</p>

<p>Make sure to test that a new widget is accessible! There are three basic steps in the translation between the DOM and the screen reader:</p>

<ul>
  <li>
    <p>
      <b>DOM</b><br/>
      Since ARIA attributes are being added directly to the DOM, an easy way to check that the attributes are in the right location is to use a DOM inspector like
      <a href="http://getfirebug.com/">Firebug</a>.
    </p>
  </li>

  <li>
    <p>
      <b>Events</b><br/>
      It is important to make sure that the browser raises the appropriate events in response to ARIA attributes, changes in focus, and changes in the widget itself. A Microsoft
      tool called the <a href="http://msdn.microsoft.com/en-us/library/dd317979(VS.85).aspx">Accessible Event Watcher</a>, or AccEvent, can allow you to check which
      events are being raised.
    </p>
  </li>

  <li>
    <p>
      <b>Screen Reader</b><br/>
      In the end, the best way to verify that your GWT widgets are accessible is by using a screen reader. Some screen readers may not be listening for all of the
      events raised by the browser, or they might expect the ARIA attributes to be added to the DOM in certain locations. The most widely used screen readers with some support for ARIA are
      <a href="http://www.freedomscientific.com/products/fs/jaws-product-page.asp">JAWS</a> and <a href="http://www.gwmicro.com/Window-Eyes/">Window-Eyes</a>.
      <a href="http://www.firevox.clcworld.net/">FireVox</a>, a free text-to-speech add-on for Firefox, also includes support for ARIA.
    </p>
  </li>
</ul>



      </div><!-- end gc-pagecontent -->
    </div><!-- end gooey wrapper -->

    </div> <!-- end codesite content -->


<div id="gc-footer" dir="ltr">
  <div class="text">
    
      <div class="notice"><div id="notice" style="text-align: center; border: 1em 0em 1em 0em">
  Except as otherwise <a
  href="http://code.google.com/policies.html#restrictions">noted</a>,
  the content of this page is licensed under the <a rel="license"
  href="http://creativecommons.org/licenses/by/3.0/">Creative Commons
  Attribution 3.0 License</a>.
<!-- <rdf:RDF xmlns="http://web.resource.org/cc/" 
              xmlns:dc="http://purl.org/dc/elements/1.1/"
              xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
  <Work rdf:about="">
    <license rdf:resource="http://creativecommons.org/licenses/by/3.0/" />
  </Work>
  <License rdf:about="http://creativecommons.org/licenses/by/3.0/">
    <permits rdf:resource="http://web.resource.org/cc/Reproduction"/>
    <permits rdf:resource="http://web.resource.org/cc/Distribution"/>
    <requires rdf:resource="http://web.resource.org/cc/Notice"/>
    <requires rdf:resource="http://web.resource.org/cc/Attribution"/>
    <permits rdf:resource="http://web.resource.org/cc/DerivativeWorks"/>
  </License>
</rdf:RDF> -->
</div>
</div>
    
    &copy;2010 Google -
    <a href="/">Code Home</a> -
    <a href="/terms.html">Terms of Service</a> -
    <a href="/privacy.html">Privacy Policy</a> -
    <a href="/more/">Site Directory</a>
    <br> <br>
    Google Code offered in:
    <a href="/intl/en/">English</a> -
    <a href="/intl/es/">Español</a> -
    <a href="/intl/ja/">日本語</a> -
    <a href="/intl/ko/">한국어</a> -
    <a href="/intl/pt-BR/">Português</a> -
    <a href="/intl/ru/">Pусский</a> -
    <a href="/intl/zh-CN/">中文(简体)</a> -
    <a href="/intl/zh-TW/">中文(繁體)</a>
  </div>
</div><!-- end gc-footer -->

</div><!-- end gc-container -->

<script type="text/javascript">CODESITE_CSITimer['load'].tick('ats');</script>
<script src="/js/codesite_tail.pack.04102009.js" type="text/javascript"></script>




<script type="text/javascript">
var _gaq = _gaq || [];

_gaq.push(


    ['siteTracker._setAccount', 'UA-18071-1'],
    ['siteTracker._setDomainName', 'code.google.com'],
    ['siteTracker._setCookiePath', window.location.pathname.substring(0,
        window.location.pathname.lastIndexOf('/') + 1)],
    ['siteTracker._trackPageview']
);
(function() {
  var ga = document.createElement('script');

  ga.type = 'text/javascript';
  ga.async = true;
  ga.src = 'http://www.google-analytics.com/ga.js';
  (document.getElementsByTagName('head')[0] ||
   document.getElementsByTagName('body')[0]).appendChild(ga);
 })();
</script>




  </body>
</html>


