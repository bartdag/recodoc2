<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html lang="en-US">
    <head>
        <title>MXBeans (The Java&trade; Tutorials &gt;        
            Java Management Extensions (JMX) &gt; Introducing MBeans)
</title>

     <meta name="description" content="This JMX Java tutorial describes the Java Management Extensions (JMX) technology - mbeans, notifications, and remote management " />
     <meta name="keywords" content="java programming, learn java, java sample code, jmx, java management extension, mbeans, mxbeans" />
        
<style type="text/css">
    .FigureCaption   { 
        margin-left: 1in; 
        margin-right: 1in; 
        font-family: sans-serif; 
        font-size: smaller; 
        text-align: justify;
    }
    #TopBar_bl {
        background: url(../../images/java_bar_bl.gif) 0 100% no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_br {
        background: url(../../images/java_bar_br.gif) 100% 100% no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_tl {
        background: url(../../images/java_bar_tl.gif) 0 0 no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_tr {
        background: url(../../images/java_bar_tr.gif) 100% 0 no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar {
        background: #35556B url(../../images/java_bar.gif);
        margin: 10px 10px 0 10px;
        height:60px;
        min-width:700px;
        color: white;
        font-family: sans-serif; 
        font-weight: bold;
    }
    @media print {
        #BreadCrumbs, #Download {
            display: none;
        }
    }
    #TopBar_right {
        line-height: 14px;
        float: right;
        padding-top: 2px;
        padding-right: 30px;
        text-align: center;
    }
    @media print {
        #TopBar_right {
            display: none;
        }
    }
    #TopBar_right a {
        font-size: 12px;
        margin: 3px;
        padding: 0;
    }
    #TopBar a:visited, #TopBar a:link {
        color: white;
        text-decoration: none;
    }
    #TopBar a:hover, #TopBar a:active  {
        background-color: white;
        color: #35556B;
    }
    #BreadCrumbs {
        padding: 4px 5px 0.5em 0;
        font-family: sans-serif; 
        float: right;
    }
    #BreadCrumbs a {
        color: blue;
    }
    #BreadCrumbs a:visited, #BreadCrumbs a:link {
        text-decoration: none;
    }
    #BreadCrumbs a:hover, #BreadCrumbs a:active {
        text-decoration: underline;
    }
    #PageTitle {
        margin: 0 5px 0.5em 0;
        color: #F90000;
    }    
    #PageContent{
        margin: 0 5px 0 20px;
    }
    .LeftBar_shown {
        width: 13em;
        float: left;
        margin-left: 10px;
        margin-top: 4px;
        margin-bottom: 2em;
        margin-right: 10px;
    }
    @media print {
        .LeftBar_shown {
            display: none;
        }
    }
    .LeftBar_hidden {
        display: none;
    }
    #Footer {
        padding-top: 10px;
        padding-left: 10px;
        margin-right: 10px;
    }
    
    .footertext {
        font-size: 10px;
        font-family: sans-serif; 
        margin-top: 1px;
    }
    
    #Footer2 {
        padding-top: 10px;
        padding-left: 10px;
        margin-right: 10px;
    }
    .NavBit  {
        padding: 4px 5px 0.5em 0;
        font-family: sans-serif; 
    }
    @media print {
        .NavBit {
            display: none;
        }
    }
    #TagNotes {
        text-align: right;        
    }
    
    @media print {
        #TagNotes a:visited, #TagNotes a:link {
            color: #35556B;
            text-decoration: none;
        }
    }
    #Contents a, .NavBit a, #TagNotes a {
        color: blue
    }
    #TagNotes a:visited, #TagNotes a:link,
    #Contents a:visited, #Contents a:link,
    .NavBit a:visited, .NavBit a:link {
        text-decoration: none;
    }
    #TagNotes a:hover, #TagNotes a:active,   
    #Contents a:hover, #Contents a:active,   
    .NavBit a:hover, .NavBit a:active {  
        text-decoration: underline;
    }
    #Contents {
        float: left;
        font-family: sans-serif; 
    }
    @media print {
        #Contents {
            display: none;
        }
    }
    @media screen {
        div.PrintHeaders {
            display: none;
        }
    }
    .linkLESSON, .nolinkLESSON {
        margin-left: 0.5em;
        text-indent: -0.5em
    }
    .linkAHEAD, .nolinkAHEAD, .linkQUESTIONS, .nolinkQUESTIONS   {
        margin-left: 1.5em; 
        text-indent: -0.5em
    }
    .linkBHEAD, .nolinkBHEAD   {
        margin-left: 2.5em;
        text-indent: -0.5em
    }
    .linkCHEAD, .nolinkCHEAD   {
        margin-left: 3.5em;
        text-indent: -0.5em
    }
    .nolinkLESSON, .nolinkAHEAD, .nolinkBHEAD, .nolinkCHEAD,
    .nolinkQUESTIONS {
        font-weight: bold;
        color: #F90000;
    }
    .MainFlow_indented {
        margin-right: 10px;
        margin-left: 15em;
        margin-bottom: 2em;

    }
    .MainFlow_wide {
        margin-right: 10px;
        margin-left: 10px;
        margin-bottom: 2em;

    }
    @media print {
        .MainFlow_indented, .MainFlow_wide {
            padding-top: 0;
            margin-top: 10px;
            margin-right: 10px;
            margin-left: 0;
        }
    }
    h1, h2, h3, h4, h5 {
        color: #F90000;
        font-family: sans-serif;
    }

    h1 {
        font-weight: bold;
        font-size: 20px;
    }

    h2 {
        font-weight: bold;
        font-size: 17px;
    }

    h3 {
        font-weight: bold;
        font-size: 14px;
    }

    h4 {
        font-size: 15px;
    }

    h5 {
        font-size: 12px;
    }


    #ToggleLeft {
        display: none;
    }
    
    .note {
        margin: 0 30px 0px 30px;
    }
    
    .codeblock {
        margin: 0 30px 0px 30px;
    }

    /t

</style>
<script type="text/javascript">
    function leftBar() {
        var nameq = 'tutorial_showLeftBar='
        var cookies = document.cookie.split(';');
        for (var i = 0; i < cookies.length; i++) {
            var cookieString = cookies[i];
            while (cookieString.charAt(0) == ' ') {
                cookieString = cookieString.substring(1, cookieString.length);
            }
            if (cookieString.indexOf(nameq) == 0) {
                cookieValue =  cookieString.substring(nameq.length,
                        cookieString.length);
                return cookieValue == 'yes';
            }
        }
        return true;
    }

    function showLeft(b) {
        var contents = document.getElementById("LeftBar");
        var main = document.getElementById("MainFlow");
        var toggle = document.getElementById("ToggleLeft");
        if (b) {
            contents.className = "LeftBar_shown";
            main.className = "MainFlow_indented";
            toggle.innerHTML = "Hide the TOC";
            document.cookie = 'tutorial_showLeftBar=yes; path=/';
        } else {
            contents.className = "LeftBar_hidden";
            main.className = "MainFlow_wide";
            toggle.innerHTML = "Show the TOC";
            document.cookie = 'tutorial_showLeftBar=no; path=/';
        }
    }

    function toggleLeft() {
        showLeft(document.getElementById("LeftBar").className ==
                "LeftBar_hidden");
        document.getElementById("ToggleLeft").blur();
    }

    function load() {
        showLeft(leftBar());
        document.getElementById("ToggleLeft").style.display="inline";
    }
    
</script>
<noscript> 
A browser with JavaScript enabled is required for this page to operate properly.
</noscript>

    </head>
<body onload="load()">
    <div id=TopBar> <div id=TopBar_tr> <div id=TopBar_tl> <div id=TopBar_br> <div id=TopBar_bl> 
                        <div id=TopBar_right> 
                            <a target="_blank"
                                href="http://java.sun.com/javase/6/download.jsp">Download
                                the JDK</a>
                            <br>
                            <a href="../../search.html" target="_blank">Search the
                                Tutorials</a>
                            <br>
                            <a href="javascript:toggleLeft()"
                                id="ToggleLeft">Hide the TOC</a>
                        </div>
                    </div> </div> </div> </div> </div>
    <div class=PrintHeaders>
        <b>Trail:</b> Java Management Extensions (JMX)
        <br><b>Lesson:</b> Introducing MBeans
    </div>

    <div id=LeftBar class=LeftBar_shown>
        <div id=Contents>
            <div class="linkLESSON"><a href="index.html">Introducing MBeans</a></div>
<div class="linkAHEAD"><a href="standard.html">Standard MBeans</a></div>
<div class="nolinkAHEAD">MXBeans</div>
</div>
    </div>
    <div id=MainFlow class=MainFlow_indented>
            <span id=BreadCrumbs>
                <a href=../../index.html target=_top>Home Page</a>
                &gt;
                <a href=../index.html target=_top>Java Management Extensions (JMX)</a>
                &gt;
                <a href=index.html target=_top>Introducing MBeans</a>
            </span>
            <div class=NavBit>
                <a target=_top href=standard.html>&laquo;&nbsp;Previous</a>&nbsp;&bull;&nbsp;<a target=_top href=../TOC.html>Trail</a>&nbsp;&bull;&nbsp;<a target=_top href=../notifs/index.html>Next&nbsp;&raquo;</a>
            </div>
            <div id=PageTitle><h1>MXBeans</h1></div>
            <div id=PageContent>
<p>This section explains a special type of MBean, called <i>MXBeans</i>.

<p>An <i>MXBean</i> is a type of MBean that references only a predefined set of data types. In this way, you can be sure that your MBean will be usable by any client, including remote clients, without any requirement that the client have access to model-specific classes representing the types of your MBeans. MXBeans provide a convenient way to bundle related values together, without requiring clients to be specially configured to handle the bundles.

<p>In the same way as for standard MBeans, an MXBean is defined by writing a Java interface called <code>SomethingMXBean</code> and a Java class that implements that interface. However, unlike standard MBeans, MXBeans do not require the Java class to be called <code>Something</code>. Every method in the interface defines either an attribute or an operation in the MXBean. The annotation <code>@MXBean</code> can be also used to annotate the Java interface, instead of requiring the interface's name to be followed by the MXBean suffix.

<p>MXBeans existed in the Java 2 Platform, Standard Edition (J2SE) 5.0 software, in the package 

<a class="APILink" target="_blank" href="http://download.oracle.com/javase/7/docs/api/java/lang/management/package-summary.html"><code>java.lang.management</code></a>. However, users can now define their own MXBeans, in addition to the standard set that is defined in <code>java.lang.management</code>.

<p>The main idea behind MXBeans is that types such as 

<a class="APILink" target="_blank" href="http://download.oracle.com/javase/7/docs/api/java/lang/management/MemoryUsage.html"><code>java.lang.management.MemoryUsage</code></a> that are referenced in the MXBean interface, 

<a class="APILink" target="_blank" href="http://download.oracle.com/javase/7/docs/api/java/lang/management/MemoryMXBean.html"><code>java.lang.management.MemoryMXBean</code></a> in this case, are mapped into a standard set of types, the so-called <i>Open Types</i> that are defined in the package 

<a class="APILink" target="_blank" href="http://download.oracle.com/javase/7/docs/api/javax/management/openmbean/package-summary.html"><code>javax.management.openmbean</code></a>. The exact mapping rules appear in the MXBean specification. However, the general principle is for simple types such as int or String to remain unchanged, while complex types such as <code>MemoryUsage</code> get mapped to the standard type 

<a class="APILink" target="_blank" href="http://download.oracle.com/javase/7/docs/api/javax/management/openmbean/CompositeDataSupport.html"><code>CompositeDataSupport</code></a>.

<p>The MXBean example consists of the following files, which are found in 


<a class="SourceLink" target="_blank" href="../examples/jmx_examples.zip"><code>jmx_examples.zip</code></a>:

<ul>
<li><code>QueueSamplerMXBean</code> interface</li>
<li><code>QueueSampler</code> class that implements the MXBean interface</li>
<li><code>QueueSample</code> Java type returned by the <code>getQueueSample()</code> method in the MXBean interface</li>
<li><code>Main</code>, the program that sets up and runs the example</li>
</ul>

<p>The MXBean example uses these classes to perform the following actions:

<ul>
<li>Defines a simple MXBean that manages a resource of type <code>Queue&lt;String&gt;</code></li>
<li>Declares a getter, <code>getQueueSample</code>, in the MXBean that takes a snapshot of the queue when invoked and returns a Java class <code>QueueSample</code> that bundles the following values together:
	<ul>
	<li>The time the snapshot was taken</li>
	<li>The queue size</li>
	<li>The head of the queue at that given time</li>
	</ul>
</li>
<li>Registers the MXBean in an MBean server</li>
</ul>

<h2>MXBean Interface</h2>

<p>The following code shows the example 

<a class="SourceLink" target="_blank" href="../examples/QueueSamplerMXBean.java"><code>QueueSamplerMXBean</code></a>
MXBean interface:

<div class="codeblock"><pre>

package com.example; 
 
public interface QueueSamplerMXBean { 
    public QueueSample getQueueSample(); 
    public void clearQueue(); 
} 

</pre></div>

<p>Note that you declare an MXBean interface in exactly the same way as you declare a standard MBean interface. The <code>QueueSamplerMXBean</code> interface declares a getter, <code>getQueueSample</code> and an operation, <code>clearQueue</code>.

<h2>Defining MXBean Operations</h2>

<p>The MXBean operations are declared in the 

<a class="SourceLink" target="_blank" href="../examples/QueueSampler.java"><code>QueueSampler</code></a>
 example class, as follows:


<div class="codeblock"><pre>

package com.example; 
 
import java.util.Date; 
import java.util.Queue; 
 
public class QueueSampler implements QueueSamplerMXBean { 
     
    private Queue<String> queue; 
     
    public QueueSampler(Queue<String> queue) { 
       this.queue = queue; 
    } 
     
    public QueueSample getQueueSample() { 
        synchronized (queue) { 
            return new QueueSample(new Date(), queue.size(), queue.peek()); 
        } 
    } 
     
    public void clearQueue() { 
        synchronized (queue) { 
            queue.clear(); 
        } 
    } 
} 

</pre></div>

<p><code>QueueSampler</code> defines the <code>getQueueSample()</code> getter and <code>clearQueue()</code> operation that were declared by the MXBean interface. The <code>getQueueSample()</code> operation returns an instance of the <code>QueueSample</code> Java type which was created with the values returned by the 

<a class="APILink" target="_blank" href="http://download.oracle.com/javase/7/docs/api/java/util/Queue.html"><code>java.util.Queue</code></a> methods <code>peek()</code> and <code>size()</code>, and an instance of 

<a class="APILink" target="_blank" href="http://download.oracle.com/javase/7/docs/api/java/util/Date.html"><code>java.util.Date</code></a>.


<h2>Defining the Java Type Returned by the MXBean Interface</h2>

<p>The <code>QueueSample</code> instance returned by <code>QueueSampler</code> is defined in the 

<a class="SourceLink" target="_blank" href="../examples/QueueSample.java"><code>QueueSample</code></a>
 class, as follows:
 
<div class="codeblock"><pre>
 
package com.example; 
 
import java.beans.ConstructorProperties; 
import java.util.Date; 
 
public class QueueSample { 
     
    private final Date date; 
    private final int size; 
    private final String head; 
     
    @ConstructorProperties({"date", "size", "head"}) 
    public QueueSample(Date date, int size, String head) { 
        this.date = date; 
        this.size = size; 
        this.head = head; 
    } 
     
    public Date getDate() { 
        return date; 
    } 
     
    public int getSize() { 
        return size; 
    } 
     
    public String getHead() { 
        return head; 
    } 
}  
 
 
</pre></div>


In the <code>QueueSample</code> class, the MXBean framework calls all the getters in <code>QueueSample</code> to convert the given instance into a 

<a class="APILink" target="_blank" href="http://download.oracle.com/javase/7/docs/api/javax/management/openmbean/CompositeData.html"><code>CompositeData</code></a> instance and uses the <code>@ConstructorProperties</code> annotation to reconstruct a <code>QueueSample</code> instance from a <code>CompositeData</code> instance.



<h2>Creating and Registering the MXBean in the MBean Server</h2>

<p>So far, the following have been defined: an MXBean interface and the class that implements it, as well as the Java type that is returned. Next, the MXBean must be created and registered in an MBean server. These actions are performed by the same 

<a class="SourceLink" target="_blank" href="../examples/Main.java"><code>Main</code></a>

 example JMX agent that was used in the standard MBean example, but the relevant code was not shown in the
 
<a class="TutorialLink" target="_top" href="../../jmx/mbeans/standard.html">Standard MBean</a>  lesson.  


<div class="codeblock"><pre>

package com.example; 
 
import java.lang.management.ManagementFactory; 
import java.util.Queue; 
import java.util.concurrent.ArrayBlockingQueue; 
import javax.management.MBeanServer; 
import javax.management.ObjectName; 
 
public class Main { 
 
    public static void main(String[] args) throws Exception { 
        MBeanServer mbs = ManagementFactory.getPlatformMBeanServer(); 
	
	[...]

        ObjectName mxbeanName = new ObjectName("com.example:type=QueueSampler");

        Queue<String> queue = new ArrayBlockingQueue<String>(10);
        queue.add("Request-1");
        queue.add("Request-2");
        queue.add("Request-3");
        QueueSampler mxbean = new QueueSampler(queue);

        mbs.registerMBean(mxbean, mxbeanName);
         
        System.out.println("Waiting..."); 
        Thread.sleep(Long.MAX_VALUE); 
    } 
} 
 


</pre></div>


<p>The <code>Main</code> class performs the following actions:

<ul>
<li>Gets the platform MBean server.</li>
<li>Creates an object name for the MXBean <code>QueueSampler.</code></li>
<li>Creates a <code>Queue</code> instance for the <code>QueueSampler</code> MXBean to process.</li>
<li>Feeds the <code>Queue</code> instance to a newly created <code>QueueSampler</code> MXBean.</li> 
<li>Registers the MXBean in the MBean server in exactly the same way as a standard MBean.</li>
</ul>

<h2>Running the MXBean Example</h2>

<p>The MXBean example uses classes from the 

<a class="SourceLink" target="_blank" href="../examples/jmx_examples.zip"><code>jmx_examples.zip</code></a> bundle that you used in the 

<a class="TutorialLink" target="_top" href="../../jmx/mbeans/standard.html">Standard MBeans</a>  section. This example requires version 6 of the Java SE platform. To run the MXBeans example follow these steps:
 
<ol>

<li>If you have not done so already, save 
<a class="SourceLink" target="_blank" href="../examples/jmx_examples.zip"><code>jmx_examples.zip</code></a> into your <code><i>work_dir</i></code> directory.
 <p>
</li>

<li>Unzip the bundle of sample classes by using the following command in a terminal window.</li>
<div class="codeblock"><pre>
unzip jmx_examples.zip
</pre></div>
 
<li>Compile the example Java classes from within the <code><i>work_dir</i></code> directory.</li>
<div class="codeblock"><pre>
javac com/example/*.java
</pre></div>

<li>Start the <code>Main</code> application. A confirmation that <code>Main</code> 
is waiting for something to happen is generated.</li>
<div class="codeblock"><pre>
java com.example.Main
</pre></div>


<li>Start JConsole in a different terminal window on the same machine.
The New Connection dialog box is displayed, presenting a list of running JMX agents that you can connect to.
</li>
<div class="codeblock"><pre>
jconsole
</pre></div>

<li>In the New Connection dialog box, select <code>com.example.Main</code> from the list and click Connect.
<p>A summary of your platform's current activity is displayed.</li>

<li>Click the MBeans tab.
<p>This panel shows all the MBeans that are currently registered in the MBean server.
</li>

<li>In the left frame, expand the <code>com.example</code> node in the MBean tree.
<p>You see the example MBean <code>QueueSampler</code> that was created and registered by <code>Main</code>. If you click <code>QueueSampler</code>, you see its associated Attributes and Operations nodes in the MBean tree.
</li>

<li>Expand the Attributes node.
<p>You see the <code>QueueSample</code> attribute appear in the right pane, with its value of <code>javax.management.openmbean.CompositeDataSupport</code>.
</li>

<li>Double-click the <code>CompositeDataSupport</code> value.
<p>You see the <code>QueueSample</code> values <code>date</code>, <code>head</code>, and <code>size</code> because the MXBean framework has converted the <code>QueueSample</code> instance into <code>CompositeData</code>. If you had defined <code>QueueSampler</code> as a standard MBean rather than as an MXBean, JConsole would not have found the <code>QueueSample</code> class because it would not be in its class path. If <code>QueueSampler</code> had been a standard MBean, you would have received a <code>ClassNotFoundException</code> message when retrieving the <code>QueueSample</code> attribute value. The fact that JConsole finds <code>QueueSampler</code> demonstrates the usefulness of using MXBeans when connecting to JMX agents through generic JMX clients such as JConsole.
</li>

<li>Expand the Operations node.
<p>A button to invoke the <code>clearQueue</code> operation is displayed.
</li>

<li>Click the <code>clearQueue</code> button.
<p>A confirmation that the method was invoked successfully is displayed.
</li>

<li>Expand the Attributes node again, and double click on the <code>CompositeDataSupport</code> value.
<p>The <code>head</code> and <code>size</code> values have been reset.
</li>

<li>To close JConsole, select Connection -> Exit.
</li>

</ol>




































        </div>
        <div class=NavBit>
            <a target=_top href=standard.html>&laquo; Previous</a>
            &bull;
            <a target=_top href=../TOC.html>Trail</a>
            &bull;
            <a target=_top href=../notifs/index.html>Next &raquo;</a>
        </div>
    </div>
    <div id=Footer2>
<hr>
<div id=TagNotes>
    <p class="footertext">Problems with the examples? Try <a target="_blank"
        href=../../information/run-examples.html>Compiling and Running
        the Examples: FAQs</a>.
    <br>
    Complaints? Compliments? Suggestions? <a target="_blank"
        href="http://download.oracle.com/javase/feedback.html">Give
    us your feedback</a>.
    </p>
</div> 

<div id=Footer>
<p class="footertext"><a name="license_info">Your use of this</a> page and all the material on pages under &quot;The Java Tutorials&quot; banner,
and all the material on pages under &quot;The Java Tutorials&quot; banner is subject to the <a href="../../information/license.html">Java SE Tutorial Copyright
and License</a>.
Additionally, any example code contained in any of these Java
Tutorials pages is licensed under the
<a href="http://developers.sun.com/license/berkeley_license.html">Code
Sample License</a>.
</p>
<table border="0" cellspacing="0" cellpadding="5" summary="">
    <tr>
         <td headers="h1" width="20%">
	 <table width="100%" border="0" cellspacing="0" cellpadding="5">
            <tr>
              <td headers="h1" align="center"><img id=duke src=../../images/DukeWave.gif width=55 height=55 alt="duke image"></td>
              <td headers="h2" align="left" valign="middle"><img id=oracle src=../../images/logo_oracle_footer.gif width=100 height=29 alt="Oracle logo"></td>
           </tr>
          </table>
          </td>

          <td width="55%" valign="middle" align="center">
		<p class="footertext"><a href="http://www.oracle.com/us/corporate/index.html">About Oracle</a> | <a href="http://www.oracle.com/technology/index.html">Oracle Technology Network</a> | <a href="https://www.samplecode.oracle.com/servlets/CompulsoryClickThrough?type=TermsOfService">Terms of Service</a></p> 
	 </td>
          <td width="25%" valign="middle" align="right">
      		<p class="footertext">Copyright &copy; 1995, 2011 Oracle and/or its affiliates. All rights reserved.</p>
	 </td>
     </tr>     
</table>
</div>
    </div>
    <div class=PrintHeaders>
        <b>Previous page:</b> Standard MBeans
        <br><b>Next page:</b> Notifications
    </div>

<!-- Start SiteCatalyst code   -->
<script language="JavaScript" src="http://www.oracle.com/ocom/groups/systemobject/@mktg_admin/documents/systemobject/s_code_download.js"></script>
<script language="JavaScript" src="http://www.oracle.com/ocom/groups/systemobject/@mktg_admin/documents/systemobject/s_code.js"></script>
<noscript> 
A browser with JavaScript enabled is required for this page to operate properly.
</noscript>
 
<!-- ********** DO NOT ALTER ANYTHING BELOW THIS LINE ! *********** -->
<!--  Below code will send the info to Omniture server -->
<script language="javascript">var s_code=s.t();if(s_code)document.write(s_code)</script>

 
<!-- End SiteCatalyst code -->

</body>
</html> 
