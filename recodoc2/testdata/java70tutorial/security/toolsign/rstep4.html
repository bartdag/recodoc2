 
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html lang="en-US">
    <head>
        <title>See the Policy File Effects (The Java&trade; Tutorials &gt;        
            Security Features in Java SE &gt; Signing Code and Granting It Permissions)
</title>

     <meta name="description" content="This security Java tutorial describes usage of digital signatures, keys, and cryptography services" />
     <meta name="keywords" content="java programming, learn java, java sample code, java security, cryptography, digital signature, verifying signature, signing code" />
        
<style type="text/css">
    .FigureCaption   { 
        margin-left: 1in; 
        margin-right: 1in; 
        font-family: sans-serif; 
        font-size: smaller; 
        text-align: justify;
    }
    #TopBar_bl {
        background: url(../../images/java_bar_bl.gif) 0 100% no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_br {
        background: url(../../images/java_bar_br.gif) 100% 100% no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_tl {
        background: url(../../images/java_bar_tl.gif) 0 0 no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_tr {
        background: url(../../images/java_bar_tr.gif) 100% 0 no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar {
        background: #35556B url(../../images/java_bar.gif);
        margin: 10px 10px 0 10px;
        height:60px;
        min-width:700px;
        color: white;
        font-family: sans-serif; 
        font-weight: bold;
    }
    @media print {
        #BreadCrumbs, #Download {
            display: none;
        }
    }
    #TopBar_right {
        line-height: 14px;
        float: right;
        padding-top: 2px;
        padding-right: 30px;
        text-align: center;
    }
    @media print {
        #TopBar_right {
            display: none;
        }
    }
    #TopBar_right a {
        font-size: 12px;
        margin: 3px;
        padding: 0;
    }
    #TopBar a:visited, #TopBar a:link {
        color: white;
        text-decoration: none;
    }
    #TopBar a:hover, #TopBar a:active  {
        background-color: white;
        color: #35556B;
    }
    #BreadCrumbs {
        padding: 4px 5px 0.5em 0;
        font-family: sans-serif; 
        float: right;
    }
    #BreadCrumbs a {
        color: blue;
    }
    #BreadCrumbs a:visited, #BreadCrumbs a:link {
        text-decoration: none;
    }
    #BreadCrumbs a:hover, #BreadCrumbs a:active {
        text-decoration: underline;
    }
    #PageTitle {
        margin: 0 5px 0.5em 0;
        color: #F90000;
    }    
    #PageContent{
        margin: 0 5px 0 20px;
    }
    .LeftBar_shown {
        width: 13em;
        float: left;
        margin-left: 10px;
        margin-top: 4px;
        margin-bottom: 2em;
        margin-right: 10px;
    }
    @media print {
        .LeftBar_shown {
            display: none;
        }
    }
    .LeftBar_hidden {
        display: none;
    }
    #Footer {
        padding-top: 10px;
        padding-left: 10px;
        margin-right: 10px;
    }
    
    .footertext {
        font-size: 10px;
        font-family: sans-serif; 
        margin-top: 1px;
    }
    
    #Footer2 {
        padding-top: 10px;
        padding-left: 10px;
        margin-right: 10px;
    }
    .NavBit  {
        padding: 4px 5px 0.5em 0;
        font-family: sans-serif; 
    }
    @media print {
        .NavBit {
            display: none;
        }
    }
    #TagNotes {
        text-align: right;        
    }
    
    @media print {
        #TagNotes a:visited, #TagNotes a:link {
            color: #35556B;
            text-decoration: none;
        }
    }
    #Contents a, .NavBit a, #TagNotes a {
        color: blue
    }
    #TagNotes a:visited, #TagNotes a:link,
    #Contents a:visited, #Contents a:link,
    .NavBit a:visited, .NavBit a:link {
        text-decoration: none;
    }
    #TagNotes a:hover, #TagNotes a:active,   
    #Contents a:hover, #Contents a:active,   
    .NavBit a:hover, .NavBit a:active {  
        text-decoration: underline;
    }
    #Contents {
        float: left;
        font-family: sans-serif; 
    }
    @media print {
        #Contents {
            display: none;
        }
    }
    @media screen {
        div.PrintHeaders {
            display: none;
        }
    }
    .linkLESSON, .nolinkLESSON {
        margin-left: 0.5em;
        text-indent: -0.5em
    }
    .linkAHEAD, .nolinkAHEAD, .linkQUESTIONS, .nolinkQUESTIONS   {
        margin-left: 1.5em; 
        text-indent: -0.5em
    }
    .linkBHEAD, .nolinkBHEAD   {
        margin-left: 2.5em;
        text-indent: -0.5em
    }
    .linkCHEAD, .nolinkCHEAD   {
        margin-left: 3.5em;
        text-indent: -0.5em
    }
    .nolinkLESSON, .nolinkAHEAD, .nolinkBHEAD, .nolinkCHEAD,
    .nolinkQUESTIONS {
        font-weight: bold;
        color: #F90000;
    }
    .MainFlow_indented {
        margin-right: 10px;
        margin-left: 15em;
        margin-bottom: 2em;

    }
    .MainFlow_wide {
        margin-right: 10px;
        margin-left: 10px;
        margin-bottom: 2em;

    }
    @media print {
        .MainFlow_indented, .MainFlow_wide {
            padding-top: 0;
            margin-top: 10px;
            margin-right: 10px;
            margin-left: 0;
        }
    }
    h1, h2, h3, h4, h5 {
        color: #F90000;
        font-family: sans-serif;
    }

    h1 {
        font-weight: bold;
        font-size: 20px;
    }

    h2 {
        font-weight: bold;
        font-size: 17px;
    }

    h3 {
        font-weight: bold;
        font-size: 14px;
    }

    h4 {
        font-size: 15px;
    }

    h5 {
        font-size: 12px;
    }


    #ToggleLeft {
        display: none;
    }
    
    .note {
        margin: 0 30px 0px 30px;
    }
    
    .codeblock {
        margin: 0 30px 0px 30px;
    }

    /t

</style>
<script type="text/javascript">
    function leftBar() {
        var nameq = 'tutorial_showLeftBar='
        var cookies = document.cookie.split(';');
        for (var i = 0; i < cookies.length; i++) {
            var cookieString = cookies[i];
            while (cookieString.charAt(0) == ' ') {
                cookieString = cookieString.substring(1, cookieString.length);
            }
            if (cookieString.indexOf(nameq) == 0) {
                cookieValue =  cookieString.substring(nameq.length,
                        cookieString.length);
                return cookieValue == 'yes';
            }
        }
        return true;
    }

    function showLeft(b) {
        var contents = document.getElementById("LeftBar");
        var main = document.getElementById("MainFlow");
        var toggle = document.getElementById("ToggleLeft");
        if (b) {
            contents.className = "LeftBar_shown";
            main.className = "MainFlow_indented";
            toggle.innerHTML = "Hide the TOC";
            document.cookie = 'tutorial_showLeftBar=yes; path=/';
        } else {
            contents.className = "LeftBar_hidden";
            main.className = "MainFlow_wide";
            toggle.innerHTML = "Show the TOC";
            document.cookie = 'tutorial_showLeftBar=no; path=/';
        }
    }

    function toggleLeft() {
        showLeft(document.getElementById("LeftBar").className ==
                "LeftBar_hidden");
        document.getElementById("ToggleLeft").blur();
    }

    function load() {
        showLeft(leftBar());
        document.getElementById("ToggleLeft").style.display="inline";
    }
    
</script>
<noscript> 
A browser with JavaScript enabled is required for this page to operate properly.
</noscript>

    </head>
<body onload="load()">
    <div id=TopBar> <div id=TopBar_tr> <div id=TopBar_tl> <div id=TopBar_br> <div id=TopBar_bl> 
                        <div id=TopBar_right> 
                            <a target="_blank"
                                href="http://java.sun.com/javase/6/download.jsp">Download
                                the JDK</a>
                            <br>
                            <a href="../../search.html" target="_blank">Search the
                                Tutorials</a>
                            <br>
                            <a href="javascript:toggleLeft()"
                                id="ToggleLeft">Hide the TOC</a>
                        </div>
                    </div> </div> </div> </div> </div>
    <div class=PrintHeaders>
        <b>Trail:</b> Security Features in Java SE
        <br><b>Lesson:</b> Signing Code and Granting It Permissions
        <br><b>Section:</b> Steps for the Code Receiver
    </div>

    <div id=LeftBar class=LeftBar_shown>
        <div id=Contents>
            <div class="linkLESSON"><a href="index.html">Signing Code and Granting It Permissions</a></div>
<div class="linkAHEAD"><a href="signer.html">Steps for the Code Signer</a></div>
<div class="linkBHEAD"><a href="step1.html">Download and Try the Sample Application</a></div>
<div class="linkBHEAD"><a href="step2.html">Create a JAR File Containing the Class File</a></div>
<div class="linkBHEAD"><a href="step3.html">Generate Keys</a></div>
<div class="linkBHEAD"><a href="step4.html">Sign the JAR File</a></div>
<div class="linkBHEAD"><a href="step5.html">Export the Public Key Certificate</a></div>
<div class="linkAHEAD"><a href="receiver.html">Steps for the Code Receiver</a></div>
<div class="linkBHEAD"><a href="rstep1.html">Observe the Restricted Application</a></div>
<div class="linkBHEAD"><a href="rstep2.html">Import the Certificate as a Trusted Certificate</a></div>
<div class="linkBHEAD"><a href="rstep3.html">Set Up a Policy File to Grant the Required Permission</a></div>
<div class="linkCHEAD"><a href="wstep1.html">Start Policy Tool</a></div>
<div class="linkCHEAD"><a href="wstep2.html">Specify the Keystore</a></div>
<div class="linkCHEAD"><a href="wstep3.html">Add a Policy Entry with a SignedBy Alias</a></div>
<div class="linkCHEAD"><a href="wstep4.html">Save the Policy File</a></div>
<div class="nolinkBHEAD">See the Policy File Effects</div>
</div>
    </div>
    <div id=MainFlow class=MainFlow_indented>
            <span id=BreadCrumbs>
                <a href=../../index.html target=_top>Home Page</a>
                &gt;
                <a href=../index.html target=_top>Security Features in Java SE</a>
                &gt;
                <a href=index.html target=_top>Signing Code and Granting It Permissions</a>
            </span>
            <div class=NavBit>
                <a target=_top href=wstep4.html>&laquo;&nbsp;Previous</a>&nbsp;&bull;&nbsp;<a target=_top href=../TOC.html>Trail</a>&nbsp;&bull;&nbsp;<a target=_top href=../toolfilex/index.html>Next&nbsp;&raquo;</a>
            </div>
            <div id=PageTitle><h1>See the Policy File Effects</h1></div>
            <div id=PageContent>
In the previous steps you created an entry in the <code>exampleraypolicy</code> 
policy file granting code 
signed by <code>susan</code> permission to read files from the 
<code>C:\TestData\</code> directory (or 
the <code>testdata</code> directory in your home directory if
you're working on UNIX).
Now you should be able to successfully
execute the <code>Count</code> program to read and to
count the characters in a file from the specified directory, even when
you run the application with a security manager.

<p>As described at the end of the

<a class="TutorialLink" target="_top" href="../tour1/index.html">Quick Tour of Controlling Applets</a>
lesson, there are two possible ways you can have the 
<code>exampleraypolicy</code> file be considered as part of the overall policy,
in addition to the policy files specified in the security properties file.
The first approach is to specify the additional policy file 
in a property passed to the runtime system.
The second approach is to add a line in the security properties 
file specifying the additional policy file.

<h2><a name="Approach1">Approach 1</a></h2>

You can use a <code>-Djava.security.policy</code> command-line 
argument to specify a policy file that should be used in addition to or
instead of the ones specified in the security properties file.

<p>To run the <code>Count</code> application and have the
<code>exampleraypolicy</code> policy file included, type the
following while in the directory containing the
<code>sCount.jar</code> and <code>exampleraypolicy</code> files:

<div class="codeblock"><pre>
<b>java -Djava.security.manager -Djava.security.policy=exampleraypolicy
  -cp sCount.jar Count C:\TestData\data</b>
</pre></div>

<p>Note: The command should be typed on a single line, with a space
between <code>exampleraypolicy</code> and <code>-cp</code>.

<p>The program should report the number of characters in the specified
file.

<p>If it still reports an error, something is wrong in the policy file.
Use the Policy Tool to check the permission you just created in the
<a href = "rstep3.html">previous step</a>, and change any
typos or other errors.


<h2><a name="Approach2">Approach 2</a></h2>

You can specify a number of URLs -- including ones of the form "http://" --
in <code>policy.url.n</code> properties in the security properties file, and 
all the designated policy files will get loaded. 

<p>So one way to have your <code>exampleraypolicy</code> file's policy entries considered by the
interpreter is to add an entry indicating that file in the security properties file.


<div class="note"><hr><strong>Important:</strong>&nbsp; If you are running your own copy of the JDK, 
you can easily edit your
security properties file. If you are running a version shared
with others, you may only be able to modify the system-wide
security properties file if you have write access to it or if you ask your
system administrator to modify the file when appropriate. However, 
it's probably not appropriate for you to make modifications to a system-wide policy file
for this tutorial test; we suggest that you just read the following to see how it's done
or that you install your own private version of the JDK to use for the tutorial
lessons.
<hr></div>

The security properties file is located at

<div class="codeblock"><pre>
  <b>Windows</b>:
    <i>java.home</i>\lib\security\java.security 
  <b>UNIX</b>:
    <i>java.home</i>/lib/security/java.security
</pre></div>

The <i><code>java.home</code></i> portion indicates the directory into which 
the JRE was installed.

<p>To modify the security properties file, open it in an editor suitable for editing an 
ASCII text file. Then add the following line after the line starting with
<code>policy.url.2</code>:

<div class="codeblock"><pre>
  <b>Windows</b>:
    <b>policy.url.3=file:/C:/Test/exampleraypolicy</b>
  <b>UNIX</b>:
    <b>policy.url.3=file:${user.home}/test/exampleraypolicy</b>
</pre></div>

<p>On a UNIX system you can alternatively explicitly specify your home directory, as in

<div class="codeblock"><pre>
<b>policy.url.3=file:/home/susanj/test/exampleraypolicy</b>
</pre></div>

Next, in your command window, go to the directory containing the
<code>sCount.jar</code> file, that is, the <code>C:\Test</code> 
or <code>~/test</code> directory.
Type the following command on one line:

<div class="codeblock"><pre>
<b>java -Djava.security.manager
        -cp sCount.jar Count C:\TestData\data</b>
</pre></div>

<p>As with approach 1, if the program still reports an error, 
something is wrong with the policy file.
Use the Policy Tool to check the permission you just created in the
<a href = "rstep3.html">previous step</a>, and change any
typos or other errors.

<div class="note"><hr><strong>Important:</strong>&nbsp;Before continuing, you may want to delete the line you just 
added in the security properties file (or comment it out)</b>,
since you probably do not want the <code>exampleraypolicy</code>
file included when you are not running the tutorial lessons. 
<hr></div>
        </div>
        <div class=NavBit>
            <a target=_top href=wstep4.html>&laquo; Previous</a>
            &bull;
            <a target=_top href=../TOC.html>Trail</a>
            &bull;
            <a target=_top href=../toolfilex/index.html>Next &raquo;</a>
        </div>
    </div>
    <div id=Footer2>
<hr>
<div id=TagNotes>
    <p class="footertext">Problems with the examples? Try <a target="_blank"
        href=../../information/run-examples.html>Compiling and Running
        the Examples: FAQs</a>.
    <br>
    Complaints? Compliments? Suggestions? <a target="_blank"
        href="http://download.oracle.com/javase/feedback.html">Give
    us your feedback</a>.
    </p>
</div> 

<div id=Footer>
<p class="footertext"><a name="license_info">Your use of this</a> page and all the material on pages under &quot;The Java Tutorials&quot; banner,
and all the material on pages under &quot;The Java Tutorials&quot; banner is subject to the <a href="../../information/license.html">Java SE Tutorial Copyright
and License</a>.
Additionally, any example code contained in any of these Java
Tutorials pages is licensed under the
<a href="http://developers.sun.com/license/berkeley_license.html">Code
Sample License</a>.
</p>
<table border="0" cellspacing="0" cellpadding="5" summary="">
    <tr>
         <td headers="h1" width="20%">
	 <table width="100%" border="0" cellspacing="0" cellpadding="5">
            <tr>
              <td headers="h1" align="center"><img id=duke src=../../images/DukeWave.gif width=55 height=55 alt="duke image"></td>
              <td headers="h2" align="left" valign="middle"><img id=oracle src=../../images/logo_oracle_footer.gif width=100 height=29 alt="Oracle logo"></td>
           </tr>
          </table>
          </td>

          <td width="55%" valign="middle" align="center">
		<p class="footertext"><a href="http://www.oracle.com/us/corporate/index.html">About Oracle</a> | <a href="http://www.oracle.com/technology/index.html">Oracle Technology Network</a> | <a href="https://www.samplecode.oracle.com/servlets/CompulsoryClickThrough?type=TermsOfService">Terms of Service</a></p> 
	 </td>
          <td width="25%" valign="middle" align="right">
      		<p class="footertext">Copyright &copy; 1995, 2011 Oracle and/or its affiliates. All rights reserved.</p>
	 </td>
     </tr>     
</table>
</div>
    </div>
    <div class=PrintHeaders>
        <b>Previous page:</b> Save the Policy File
        <br><b>Next page:</b> Exchanging Files
    </div>

<!-- Start SiteCatalyst code   -->
<script language="JavaScript" src="http://www.oracle.com/ocom/groups/systemobject/@mktg_admin/documents/systemobject/s_code_download.js"></script>
<script language="JavaScript" src="http://www.oracle.com/ocom/groups/systemobject/@mktg_admin/documents/systemobject/s_code.js"></script>
<noscript> 
A browser with JavaScript enabled is required for this page to operate properly.
</noscript>
 
<!-- ********** DO NOT ALTER ANYTHING BELOW THIS LINE ! *********** -->
<!--  Below code will send the info to Omniture server -->
<script language="javascript">var s_code=s.t();if(s_code)document.write(s_code)</script>

 
<!-- End SiteCatalyst code -->

</body>
</html> 
