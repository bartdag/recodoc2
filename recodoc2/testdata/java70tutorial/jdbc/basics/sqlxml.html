<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html lang="en-US">
    <head>
        <title>Using SQLXML Objects (The Java&trade; Tutorials &gt;        
            JDBC(TM) Database Access &gt; JDBC Basics)
</title>

     <meta name="description" content="This JDBC Java tutorial describes how to use JDBC API to create, insert into, update, and query tables. You will also learn how to use simple and prepared statements, stored procedures and perform transactions" />
     <meta name="keywords" content="java programming, learn java, java sample code, jdbc, prepared statement, result set" />
        
<style type="text/css">
    .FigureCaption   { 
        margin-left: 1in; 
        margin-right: 1in; 
        font-family: sans-serif; 
        font-size: smaller; 
        text-align: justify;
    }
    #TopBar_bl {
        background: url(../../images/java_bar_bl.gif) 0 100% no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_br {
        background: url(../../images/java_bar_br.gif) 100% 100% no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_tl {
        background: url(../../images/java_bar_tl.gif) 0 0 no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_tr {
        background: url(../../images/java_bar_tr.gif) 100% 0 no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar {
        background: #35556B url(../../images/java_bar.gif);
        margin: 10px 10px 0 10px;
        height:60px;
        min-width:700px;
        color: white;
        font-family: sans-serif; 
        font-weight: bold;
    }
    @media print {
        #BreadCrumbs, #Download {
            display: none;
        }
    }
    #TopBar_right {
        line-height: 14px;
        float: right;
        padding-top: 2px;
        padding-right: 30px;
        text-align: center;
    }
    @media print {
        #TopBar_right {
            display: none;
        }
    }
    #TopBar_right a {
        font-size: 12px;
        margin: 3px;
        padding: 0;
    }
    #TopBar a:visited, #TopBar a:link {
        color: white;
        text-decoration: none;
    }
    #TopBar a:hover, #TopBar a:active  {
        background-color: white;
        color: #35556B;
    }
    #BreadCrumbs {
        padding: 4px 5px 0.5em 0;
        font-family: sans-serif; 
        float: right;
    }
    #BreadCrumbs a {
        color: blue;
    }
    #BreadCrumbs a:visited, #BreadCrumbs a:link {
        text-decoration: none;
    }
    #BreadCrumbs a:hover, #BreadCrumbs a:active {
        text-decoration: underline;
    }
    #PageTitle {
        margin: 0 5px 0.5em 0;
        color: #F90000;
    }    
    #PageContent{
        margin: 0 5px 0 20px;
    }
    .LeftBar_shown {
        width: 13em;
        float: left;
        margin-left: 10px;
        margin-top: 4px;
        margin-bottom: 2em;
        margin-right: 10px;
    }
    @media print {
        .LeftBar_shown {
            display: none;
        }
    }
    .LeftBar_hidden {
        display: none;
    }
    #Footer {
        padding-top: 10px;
        padding-left: 10px;
        margin-right: 10px;
    }
    
    .footertext {
        font-size: 10px;
        font-family: sans-serif; 
        margin-top: 1px;
    }
    
    #Footer2 {
        padding-top: 10px;
        padding-left: 10px;
        margin-right: 10px;
    }
    .NavBit  {
        padding: 4px 5px 0.5em 0;
        font-family: sans-serif; 
    }
    @media print {
        .NavBit {
            display: none;
        }
    }
    #TagNotes {
        text-align: right;        
    }
    
    @media print {
        #TagNotes a:visited, #TagNotes a:link {
            color: #35556B;
            text-decoration: none;
        }
    }
    #Contents a, .NavBit a, #TagNotes a {
        color: blue
    }
    #TagNotes a:visited, #TagNotes a:link,
    #Contents a:visited, #Contents a:link,
    .NavBit a:visited, .NavBit a:link {
        text-decoration: none;
    }
    #TagNotes a:hover, #TagNotes a:active,   
    #Contents a:hover, #Contents a:active,   
    .NavBit a:hover, .NavBit a:active {  
        text-decoration: underline;
    }
    #Contents {
        float: left;
        font-family: sans-serif; 
    }
    @media print {
        #Contents {
            display: none;
        }
    }
    @media screen {
        div.PrintHeaders {
            display: none;
        }
    }
    .linkLESSON, .nolinkLESSON {
        margin-left: 0.5em;
        text-indent: -0.5em
    }
    .linkAHEAD, .nolinkAHEAD, .linkQUESTIONS, .nolinkQUESTIONS   {
        margin-left: 1.5em; 
        text-indent: -0.5em
    }
    .linkBHEAD, .nolinkBHEAD   {
        margin-left: 2.5em;
        text-indent: -0.5em
    }
    .linkCHEAD, .nolinkCHEAD   {
        margin-left: 3.5em;
        text-indent: -0.5em
    }
    .nolinkLESSON, .nolinkAHEAD, .nolinkBHEAD, .nolinkCHEAD,
    .nolinkQUESTIONS {
        font-weight: bold;
        color: #F90000;
    }
    .MainFlow_indented {
        margin-right: 10px;
        margin-left: 15em;
        margin-bottom: 2em;

    }
    .MainFlow_wide {
        margin-right: 10px;
        margin-left: 10px;
        margin-bottom: 2em;

    }
    @media print {
        .MainFlow_indented, .MainFlow_wide {
            padding-top: 0;
            margin-top: 10px;
            margin-right: 10px;
            margin-left: 0;
        }
    }
    h1, h2, h3, h4, h5 {
        color: #F90000;
        font-family: sans-serif;
    }

    h1 {
        font-weight: bold;
        font-size: 20px;
    }

    h2 {
        font-weight: bold;
        font-size: 17px;
    }

    h3 {
        font-weight: bold;
        font-size: 14px;
    }

    h4 {
        font-size: 15px;
    }

    h5 {
        font-size: 12px;
    }


    #ToggleLeft {
        display: none;
    }
    
    .note {
        margin: 0 30px 0px 30px;
    }
    
    .codeblock {
        margin: 0 30px 0px 30px;
    }

    /t

</style>
<script type="text/javascript">
    function leftBar() {
        var nameq = 'tutorial_showLeftBar='
        var cookies = document.cookie.split(';');
        for (var i = 0; i < cookies.length; i++) {
            var cookieString = cookies[i];
            while (cookieString.charAt(0) == ' ') {
                cookieString = cookieString.substring(1, cookieString.length);
            }
            if (cookieString.indexOf(nameq) == 0) {
                cookieValue =  cookieString.substring(nameq.length,
                        cookieString.length);
                return cookieValue == 'yes';
            }
        }
        return true;
    }

    function showLeft(b) {
        var contents = document.getElementById("LeftBar");
        var main = document.getElementById("MainFlow");
        var toggle = document.getElementById("ToggleLeft");
        if (b) {
            contents.className = "LeftBar_shown";
            main.className = "MainFlow_indented";
            toggle.innerHTML = "Hide the TOC";
            document.cookie = 'tutorial_showLeftBar=yes; path=/';
        } else {
            contents.className = "LeftBar_hidden";
            main.className = "MainFlow_wide";
            toggle.innerHTML = "Show the TOC";
            document.cookie = 'tutorial_showLeftBar=no; path=/';
        }
    }

    function toggleLeft() {
        showLeft(document.getElementById("LeftBar").className ==
                "LeftBar_hidden");
        document.getElementById("ToggleLeft").blur();
    }

    function load() {
        showLeft(leftBar());
        document.getElementById("ToggleLeft").style.display="inline";
    }
    
</script>
<noscript> 
A browser with JavaScript enabled is required for this page to operate properly.
</noscript>

    </head>
<body onload="load()">
    <div id=TopBar> <div id=TopBar_tr> <div id=TopBar_tl> <div id=TopBar_br> <div id=TopBar_bl> 
                        <div id=TopBar_right> 
                            <a target="_blank"
                                href="http://java.sun.com/javase/6/download.jsp">Download
                                the JDK</a>
                            <br>
                            <a href="../../search.html" target="_blank">Search the
                                Tutorials</a>
                            <br>
                            <a href="javascript:toggleLeft()"
                                id="ToggleLeft">Hide the TOC</a>
                        </div>
                    </div> </div> </div> </div> </div>
    <div class=PrintHeaders>
        <b>Trail:</b> JDBC(TM) Database Access
        <br><b>Lesson:</b> JDBC Basics
    </div>

    <div id=LeftBar class=LeftBar_shown>
        <div id=Contents>
            <div class="linkLESSON"><a href="index.html">JDBC Basics</a></div>
<div class="linkAHEAD"><a href="gettingstarted.html">Getting Started</a></div>
<div class="linkAHEAD"><a href="processingsqlstatements.html">Processing SQL Statements with JDBC</a></div>
<div class="linkAHEAD"><a href="connecting.html">Establishing a Connection</a></div>
<div class="linkAHEAD"><a href="sqldatasources.html">Connecting with DataSource Objects</a></div>
<div class="linkAHEAD"><a href="sqlexception.html">Handling SQLExceptions</a></div>
<div class="linkAHEAD"><a href="tables.html">Setting Up Tables</a></div>
<div class="linkAHEAD"><a href="retrieving.html">Retrieving and Modifying Values from Result Sets</a></div>
<div class="linkAHEAD"><a href="prepared.html">Using Prepared Statements</a></div>
<div class="linkAHEAD"><a href="transactions.html">Using Transactions</a></div>
<div class="linkAHEAD"><a href="rowset.html">Using RowSet Objects</a></div>
<div class="linkAHEAD"><a href="jdbcrowset.html">Using JdbcRowSet Objects</a></div>
<div class="linkAHEAD"><a href="cachedrowset.html">Using CachedRowSetObjects</a></div>
<div class="linkAHEAD"><a href="joinrowset.html">Using JoinRowSet Objects</a></div>
<div class="linkAHEAD"><a href="filteredrowset.html">Using FilteredRowSet Objects</a></div>
<div class="linkAHEAD"><a href="webrowset.html">Using WebRowSet Objects</a></div>
<div class="linkAHEAD"><a href="sqltypes.html">Using Advanced Data Types</a></div>
<div class="linkAHEAD"><a href="blob.html">Using Large Objects</a></div>
<div class="nolinkAHEAD">Using SQLXML Objects</div>
<div class="linkAHEAD"><a href="array.html">Using Array Objects</a></div>
<div class="linkAHEAD"><a href="distinct.html">Using DISTINCT Data Type</a></div>
<div class="linkAHEAD"><a href="sqlstructured.html">Using Structured Objects</a></div>
<div class="linkAHEAD"><a href="sqlcustommapping.html">Using Customized Type Mappings</a></div>
<div class="linkAHEAD"><a href="sqldatalink.html">Using Datalink Objects</a></div>
<div class="linkAHEAD"><a href="sqlrowid.html">Using RowId Objects</a></div>
<div class="linkAHEAD"><a href="storedprocedures.html">Using Stored Procedures</a></div>
<div class="linkAHEAD"><a href="jdbcswing.html">Using JDBC with GUI API</a></div>
</div>
    </div>
    <div id=MainFlow class=MainFlow_indented>
            <span id=BreadCrumbs>
                <a href=../../index.html target=_top>Home Page</a>
                &gt;
                <a href=../index.html target=_top>JDBC(TM) Database Access</a>
                &gt;
                <a href=index.html target=_top>JDBC Basics</a>
            </span>
            <div class=NavBit>
                <a target=_top href=blob.html>&laquo;&nbsp;Previous</a>&nbsp;&bull;&nbsp;<a target=_top href=../TOC.html>Trail</a>&nbsp;&bull;&nbsp;<a target=_top href=array.html>Next&nbsp;&raquo;</a>
            </div>
            <div id=PageTitle><h1>Using SQLXML Objects</h1></div>
            <div id=PageContent>
    <p>
      The <code>Connection</code> interface provides support for the creation
      of <code>SQLXML</code> objects using the method <code>createSQLXML</code>. The object
      that is created does not contain any data. Data may be
      added to the object by calling the <code>setString</code>,
      <code>setBinaryStream</code>, <code>setCharacterStream</code> or <code>setResult</code> method on
      the <code>SQLXML</code> interface.
    </p>

    <p>The following topics are covered:</p>

    <ul>
      <li><a href="#creating_sqlxml">Creating SQLXML Objects</a></li>
      <li><a href="#retrieving_sqlxml">Retrieving SQLXML Values in ResultSet</a></li>
      <li><a href="#accessing_sqlxml">Accessing SQLXML Object Data</a></li>
      <li><a href="#storing_sqlxml">Storing SQLXML Objects</a></li>
      <li><a href="#initializing_sqlxml">Initializing SQLXML Objects</a></li>
      <li><a href="#releasing_sqlxml">Releasing SQLXML Resources</a></li>
      <li><a href="#sample_code">Sample Code</a></li>
    </ul>

<h2><a name="creating_sqlxml">Creating SQLXML Objects</a></h2>

    <p>
      In the following excerpt, the method
      <code>Connection.createSQLXML</code> is used to create an empty <code>SQLXML</code>
      object. The <code>SQLXML.setString</code> method is used to write data to the
      <code>SQLXML</code> object that was created.
    </p>

<div class="codeblock"><pre>
Connection con = DriverManager.getConnection(url, props);
SQLXML <code>SQLXML</code> = con.createSQLXML();
sqlxml.setString(val);
</pre></div>


<h2><a name="retrieving_sqlxml">Retrieving SQLXML Values in ResultSet</a></h2>

    <p>
      The <code>SQLXML</code> data type is treated similarly to the more
      primitive built-in types. A <code>SQLXML</code> value can be retrieved
      by calling the <code>getSQLXML</code> method in the <code>ResultSet</code> or
      <code>CallableStatement</code> interface.
    </p>

    <p>
      For example, the following excerpt retrieves a
      <code>SQLXML</code> value from the first column of the <code>ResultSet</code>
      <i>rs</i>:
    </p>

    <div class="codeblock"><pre>
SQLXML xmlVar = rs.getSQLXML(1);
</pre></div>

    <p>
      <code>SQLXML</code> objects remain valid for at least the duration of
      the transaction in which they are created, unless their
      <code>free</code> method is invoked.
    </p>

<h2><a name="accessing_sqlxml">Accessing SQLXML Object Data</a></h2>

    <p>
      The <code>SQLXML</code> interface provides the <code>getString</code>,
      <code>getBinaryStream</code>, <code>getCharacterStream</code>, and <code>getSource</code> methods
      to access its internal content. The following excerpt retrieves the contents of an
      <code>SQLXML</code> object using the <code>getString</code> method:
    </p>

<div class="codeblock"><pre>
SQLXML xmlVal= rs.getSQLXML(1);
String val = xmlVal.getString();
</pre></div>

    <p>
      The <code>getBinaryStream</code> or <code>getCharacterStream</code> methods can be
      used to obtain an <code>InputStream</code> or a <code>Reader</code> object that can be
      passed directly to an XML parser. The following excerpt obtains an <code>InputStream</code> object from an <code>SQLXML</code> Object and
      then processes the stream using a DOM (Document Object Model) parser:
    </p>

    <div class="codeblock"><pre>

      SQLXML sqlxml = rs.getSQLXML(column);
      InputStream binaryStream = sqlxml.getBinaryStream();
      DocumentBuilder parser = DocumentBuilderFactory.newInstance().newDocumentBuilder();
      Document result = parser.parse(binaryStream);
    
</pre></div>

    <p>
      The <code>getSource</code> method returns a <code>javax.xml.transform.Source</code>
      object. Sources are used as input to XML parsers and XSLT
      transformers.
    </p>
    <p>
      The following excerpt retrieves
      and parses the data from a <code>SQLXML</code> object using the
      <code>SAXSource</code> object returned by invoking the
      <code>getSource</code> method:
    </p>
    <div class="codeblock"><pre>

      SQLXML xmlVal= rs.getSQLXML(1);
      SAXSource saxSource = sqlxml.getSource(SAXSource.class);
      XMLReader xmlReader = saxSource.getXMLReader();
      xmlReader.setContentHandler(myHandler);
      xmlReader.parse(saxSource.getInputSource());
    
</pre></div>

<h2><a name="storing_sqlxml">Storing SQLXML Objects</a></h2>


      <p>A <code>SQLXML</code> object can be passed as an input parameter to a
      <code>PreparedStatement</code> object just like other data types. The
      method <code>setSQLXML</code> sets the designated <code>PreparedStatement</code>
      parameter with a <code>SQLXML</code> object.</p>
    <p>
      In the following excerpt, <code>authorData</code> is
      an instance of the <code>java.sql.SQLXML</code> interface whose data was initialized
      previously.
    </p>
    <div class="codeblock"><pre>

      PreparedStatement pstmt = conn.prepareStatement(
        "INSERT INTO bio (xmlData, authId) VALUES (?, ?)");
      pstmt.setSQLXML(1, authorData);
      pstmt.setInt(2, authorId);
    
</pre></div>

    <p>
      The <code>updateSQLXML</code> method can be used to update a column
      value in an updatable result set.
    </p>

    <p>
      If the <code>java.xml.transform.Result</code>, <code>Writer</code>, or <code>OutputStream</code> object
      for the <code>SQLXML</code> object has not been closed prior to calling
      <code>setSQLXML</code> or <code>updateSQLXML</code>, a <code>SQLException</code> will be thrown.
    </p>

<h2><a name="initializing_sqlxml">Initializing SQLXML Objects</a></h2>

    <p>
      The <code>SQLXML</code> interface provides the methods <code>setString</code>,
      <code>setBinaryStream</code>,
      <code>setCharacterStream</code>, or <code>setResult</code> to initialize the content
      for a <code>SQLXML</code>
      object that has been created by calling the
      <code>Connection.createSQLXML</code> method.
    </p>

    <p>
      The following excerpt uses the method
      <code>setResult</code> to return a <code>SAXResult</code> object to
      populate a newly created <code>SQLXML</code> object:</p>


    <div class="codeblock"><pre>

      SQLXML sqlxml = con.createSQLXML();
      SAXResult saxResult =
      sqlxml.setResult(SAXResult.class);
      ContentHandler contentHandler =
        saxResult.getXMLReader().getContentHandler();
      contentHandler.startDocument();
      // set the XML elements and attributes into the result
      contentHandler.endDocument();
    
</pre></div>

    <p>
      The following excerpt uses the
      <code>setCharacterStream</code> method to obtain a <code>java.io.Writer</code> object
      in order to initialize a <code>SQLXML</code> object:
    </p>
    <div class="codeblock"><pre>

      SQLXML sqlxml = con.createSQLXML();
      Writer out= sqlxml.setCharacterStream();
      BufferedReader in = new BufferedReader(new FileReader("xml/foo.xml"));
      String line = null;
      while((line = in.readLine() != null) {
        out.write(line);
      }
    
</pre></div>

    <p>
      Similarly, the <code>SQLXML</code> <code>setString</code> method can be used to
      initialize a <code>SQLXML</code> object.
    </p>

    <p>
      If an attempt is made to call the <code>setString</code>,
      <code>setBinaryStream</code>, <code>setCharacterStream</code>, and <code>setResult</code> methods
      on a <code>SQLXML</code> object that has previously been initialized, a
      <code>SQLException</code> will be thrown. If more than one call to
      the methods <code>setBinaryStream</code>, <code>setCharacterStream</code>, and <code>setResult</code> occurs for
      the same <code>SQLXML</code> object, a <code>SQLException</code> is thrown and the
      previously returned <code>javax.xml.transform.Result</code>, <code>Writer</code>, or
      <code>OutputStream</code> object is not affected.
    </p>

<h2><a name="releasing_sqlxml">Releasing SQLXML Resources</a></h2>

    <p>
      <code>SQLXML</code> objects remain valid for at least the duration of the transaction in which they are created. This could potentially result in an application running out of resources during a long running transaction. Applications may release <code>SQLXML</code> resources by invoking their <code>free</code> method.
    </p>
    <p>
      In the following excerpt, the <code>method SQLXML.free</code> is called to release the resources held for a previously created <code>SQLXML</code> object.</p>

    <div class="codeblock"><pre>

      SQLXML xmlVar = con.createSQLXML();
      xmlVar.setString(val);
      xmlVar.free();
    
</pre></div>

<h2><a name="sample_code">Sample Code</a></h2>

    <p>MySQL and Java DB and their respective JDBC drivers do not fully support the <code>SQLXML</code> JDBC data type as described on in this section. However, the sample <code><a href="gettingstarted.html">RSSFeedsTable</a></code> demonstrates how to handle XML data with MySQL and Java DB.</p>

    <p>The owner of The Coffee Break follows several RSS feeds from various web sites that cover restaurant and beverage industry news. An RSS (Really Simple Syndication or Rich Site Summary) feed is an XML document that contains a series of articles and associated metadata, such as the date of publication and author for each article. The owner would like to store these RSS feeds into a database table, including the RSS feed from The Coffee Break's blog.</p>

    <p>The file <code><a href="gettingstarted.html">rss-the-coffee-break-blog.xml</a></code> is an example RSS feed from The Coffee Break's blog.</p>

<!-- ******************************** -->

  <h3><a name="working-with-xml-data-in-mysql">Working with XML Data in MySQL</a></h3>

  <p>The sample <code>RSSFeedsTable</code> stores RSS feeds in the table <code>RSS_FEEDS</code>, which is created with the following command:</p>

<div class="codeblock"><pre>
create table RSS_FEEDS
  (RSS_NAME varchar(32) NOT NULL,
  RSS_FEED_XML longtext NOT NULL,
  PRIMARY KEY (RSS_NAME));
</pre></div>

<p>MySQL does not support the XML data type. Instead, this sample stores XML data in a column of type <code>LONGTEXT</code>, which is a <code>CLOB</code> SQL data type. MySQL has four <code>CLOB</code> data types; the <code>LONGTEXT</code> data type holds the greatest amount of characters among the four.</p>

<p>The method <code><a href="gettingstarted.html">RSSFeedsTable.addRSSFeed</a></code> adds an RSS feed to the <code>RSS_FEEDS</code> table. The first statements of this method converts the RSS feed (which is represented by an XML file in this sample) into an object of type <code>org.w3c.dom.Document</code>, which represents a DOM (Document Object Model) document. This class, along with classes and interfaces contained in the package <code>javax.xml</code>, contain methods that enable you to manipulate XML data content. For example, the following statement uses an XPath expression to retrieve the title of the RSS feed from the <code>Document</code> object:</p>

<div class="codeblock"><pre>
    Node titleElement =
      (Node)xPath.evaluate("/rss/channel/title[1]", doc, XPathConstants.NODE);

</pre></div>

<p>The XPath expression <code>/rss/channel/title[1]</code> retrieves the contents of the first <code>&lt;title&gt;</code> element. For the file <code>rss-the-coffee-break-blog.xml</code>, this is the string <code>The Coffee Break Blog</code>.</p>

<p>The following statements add the RSS feed to the table <code>RSS_FEEDS</code>:</p>

<div class="codeblock"><pre>
        // For databases that support the SQLXML data type, this creates a
        // SQLXML object from org.w3c.dom.Document.

        System.out.println("Adding XML file " + fileName);
        String insertRowQuery =
          "insert into RSS_FEEDS (RSS_NAME, RSS_FEED_XML) values" + " (?, ?)";
        insertRow = con.prepareStatement(insertRowQuery);
        insertRow.setString(1, titleString);

        System.out.println("Creating SQLXML object with MySQL");
        rssData = con.createSQLXML();
        System.out.println("Creating DOMResult object");
        DOMResult dom = (DOMResult)rssData.setResult(DOMResult.class);
        dom.setNode(doc);

        insertRow.setSQLXML(2, rssData);
        System.out.println("Running executeUpdate()");
        insertRow.executeUpdate();

</pre></div>

<p>The <code><a href="gettingstarted.html">RSSFeedsTable.viewTable</a></code> method retrieves the contents of <code>RSS_FEEDS</code>. For each row, the method creates an object of type <code>org.w3c.dom.Document</code> named <code>doc</code> in which to store the XML content in the column <code>RSS_FEED_XML</code>. The method retrieves the XML content and stores it in an object of type <code>SQLXML</code> named <code>rssFeedXML</code>. The contents of <code>rssFeedXML</code> are parsed and stored in the <code>doc</code> object.</p>

<!-- ************************************************* -->

  <h3><a name="working-with-xml-data-in-java-db">Working with XML Data in Java DB</a></h3>
  
  <p><strong>Note</strong>: See the section "XML data types and operators" in <a href="http://download.oracle.com/javadb/index.html"><em>Java DB Developer's Guide</em></a> for more information about working with XML data in Java DB.</p>

  <p>The sample <code>RSSFeedsTable</code> stores RSS feeds in the table <code>RSS_FEEDS</code>, which is created with the following command:</p>

<div class="codeblock"><pre>
create table RSS_FEEDS
  (RSS_NAME varchar(32) NOT NULL,
  RSS_FEED_XML xml NOT NULL,
  PRIMARY KEY (RSS_NAME));
</pre></div>

<p>Java DB supports the XML data type, but it does not support the <code>SQLXML</code> JDBC data type. Consequently, you must convert any XML data to a character format, and then use the Java DB operator <code>XMLPARSE</code> to convert it to the XML data type. </p>

<p>The <code><a href="gettingstarted.html">RSSFeedsTable.addRSSFeed</a></code> method adds an RSS feed to the <code>RSS_FEEDS</code> table. The first statements of this method convert the RSS feed (which is represented by an XML file in this sample) into an object of type <code>org.w3c.dom.Document</code>. This is described in the section <a href="#working-with-xml-data-in-mysql">Working with XML Data in MySQL</a>.</p>

<p>The <code><a href="gettingstarted.html">RSSFeedsTable.addRSSFeed</a></code> method converts the RSS feed to a <code>String</code> object with the method <code><a href="gettingstarted.html">JDBCTutorialUtilities.convertDocumentToString</a></code>.</p>

<p>Java DB has an operator named <code>XMLPARSE</code> that parses a character string representation into a Java DB XML value, which is demonstrated by the following excerpt:</p>

<div class="codeblock"><pre>
        String insertRowQuery =
          "insert into RSS_FEEDS (RSS_NAME, RSS_FEED_XML) values" +
          " (?, <strong>xmlparse(document cast (? as clob) preserve whitespace)</strong>)";
</pre></div>

<p>The <code>XMLPARSE</code> operator requires that you convert the character representation of the XML document into a string data type that Java DB recognizes. In this example, it converts it into a <code>CLOB</code> data type. In addition, the <code>XMLPARSE</code> operator requires that Apache Xalan be listed in your Java class path. See <a href="gettingstarted.html">Getting Started</a> and the Java DB documentation for more information about Apache Xalan and Java DB requirements.</p>

<p>The method <code><a href="gettingstarted.html">RSSFeedsTable.viewTable</a></code> retrieves the contents of <code>RSS_FEEDS</code>. Because Java DB does not support the JDBC data type <code>SQLXML</code> you must retrieve the XML content as a string. Java DB has an operator named <code>XMLSERIALIZE</code> that converts an XML type to a character type:</p>

<div class="codeblock"><pre>
        String query =
          "select RSS_NAME, xmlserialize (RSS_FEED_XML as clob) from RSS_FEEDS";
</pre></div>

<p>As with the <code>XMLPARSE</code> operator, the <code>XMLSERIALIZE</code> operator requires that Apache Xalan be listed in your Java class path.</p>


  </body>
</html>
        </div>
        <div class=NavBit>
            <a target=_top href=blob.html>&laquo; Previous</a>
            &bull;
            <a target=_top href=../TOC.html>Trail</a>
            &bull;
            <a target=_top href=array.html>Next &raquo;</a>
        </div>
    </div>
    <div id=Footer2>
<hr>
<div id=TagNotes>
    <p class="footertext">Problems with the examples? Try <a target="_blank"
        href=../../information/run-examples.html>Compiling and Running
        the Examples: FAQs</a>.
    <br>
    Complaints? Compliments? Suggestions? <a target="_blank"
        href="http://download.oracle.com/javase/feedback.html">Give
    us your feedback</a>.
    </p>
</div> 

<div id=Footer>
<p class="footertext"><a name="license_info">Your use of this</a> page and all the material on pages under &quot;The Java Tutorials&quot; banner,
and all the material on pages under &quot;The Java Tutorials&quot; banner is subject to the <a href="../../information/license.html">Java SE Tutorial Copyright
and License</a>.
Additionally, any example code contained in any of these Java
Tutorials pages is licensed under the
<a href="http://developers.sun.com/license/berkeley_license.html">Code
Sample License</a>.
</p>
<table border="0" cellspacing="0" cellpadding="5" summary="">
    <tr>
         <td headers="h1" width="20%">
	 <table width="100%" border="0" cellspacing="0" cellpadding="5">
            <tr>
              <td headers="h1" align="center"><img id=duke src=../../images/DukeWave.gif width=55 height=55 alt="duke image"></td>
              <td headers="h2" align="left" valign="middle"><img id=oracle src=../../images/logo_oracle_footer.gif width=100 height=29 alt="Oracle logo"></td>
           </tr>
          </table>
          </td>

          <td width="55%" valign="middle" align="center">
		<p class="footertext"><a href="http://www.oracle.com/us/corporate/index.html">About Oracle</a> | <a href="http://www.oracle.com/technology/index.html">Oracle Technology Network</a> | <a href="https://www.samplecode.oracle.com/servlets/CompulsoryClickThrough?type=TermsOfService">Terms of Service</a></p> 
	 </td>
          <td width="25%" valign="middle" align="right">
      		<p class="footertext">Copyright &copy; 1995, 2011 Oracle and/or its affiliates. All rights reserved.</p>
	 </td>
     </tr>     
</table>
</div>
    </div>
    <div class=PrintHeaders>
        <b>Previous page:</b> Using Large Objects
        <br><b>Next page:</b> Using Array Objects
    </div>

<!-- Start SiteCatalyst code   -->
<script language="JavaScript" src="http://www.oracle.com/ocom/groups/systemobject/@mktg_admin/documents/systemobject/s_code_download.js"></script>
<script language="JavaScript" src="http://www.oracle.com/ocom/groups/systemobject/@mktg_admin/documents/systemobject/s_code.js"></script>
<noscript> 
A browser with JavaScript enabled is required for this page to operate properly.
</noscript>
 
<!-- ********** DO NOT ALTER ANYTHING BELOW THIS LINE ! *********** -->
<!--  Below code will send the info to Omniture server -->
<script language="javascript">var s_code=s.t();if(s_code)document.write(s_code)</script>

 
<!-- End SiteCatalyst code -->

</body>
</html> 
