<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html lang="en-US">
    <head>
        <title>Character and Byte Streams (The Java&trade; Tutorials &gt;        
            Internationalization &gt; Working with Text)
</title>

     <meta name="description" content="This internationalization Java tutorial describes setting locale, isolating locale-specific data, formatting data, internationalized domain name and resource identifier" />
     <meta name="keywords" content="java programming, learn java, java sample code, i18n, internationalization, locale, text formatting" />
        
<style type="text/css">
    .FigureCaption   { 
        margin-left: 1in; 
        margin-right: 1in; 
        font-family: sans-serif; 
        font-size: smaller; 
        text-align: justify;
    }
    #TopBar_bl {
        background: url(../../images/java_bar_bl.gif) 0 100% no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_br {
        background: url(../../images/java_bar_br.gif) 100% 100% no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_tl {
        background: url(../../images/java_bar_tl.gif) 0 0 no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_tr {
        background: url(../../images/java_bar_tr.gif) 100% 0 no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar {
        background: #35556B url(../../images/java_bar.gif);
        margin: 10px 10px 0 10px;
        height:60px;
        min-width:700px;
        color: white;
        font-family: sans-serif; 
        font-weight: bold;
    }
    @media print {
        #BreadCrumbs, #Download {
            display: none;
        }
    }
    #TopBar_right {
        line-height: 14px;
        float: right;
        padding-top: 2px;
        padding-right: 30px;
        text-align: center;
    }
    @media print {
        #TopBar_right {
            display: none;
        }
    }
    #TopBar_right a {
        font-size: 12px;
        margin: 3px;
        padding: 0;
    }
    #TopBar a:visited, #TopBar a:link {
        color: white;
        text-decoration: none;
    }
    #TopBar a:hover, #TopBar a:active  {
        background-color: white;
        color: #35556B;
    }
    #BreadCrumbs {
        padding: 4px 5px 0.5em 0;
        font-family: sans-serif; 
        float: right;
    }
    #BreadCrumbs a {
        color: blue;
    }
    #BreadCrumbs a:visited, #BreadCrumbs a:link {
        text-decoration: none;
    }
    #BreadCrumbs a:hover, #BreadCrumbs a:active {
        text-decoration: underline;
    }
    #PageTitle {
        margin: 0 5px 0.5em 0;
        color: #F90000;
    }    
    #PageContent{
        margin: 0 5px 0 20px;
    }
    .LeftBar_shown {
        width: 13em;
        float: left;
        margin-left: 10px;
        margin-top: 4px;
        margin-bottom: 2em;
        margin-right: 10px;
    }
    @media print {
        .LeftBar_shown {
            display: none;
        }
    }
    .LeftBar_hidden {
        display: none;
    }
    #Footer {
        padding-top: 10px;
        padding-left: 10px;
        margin-right: 10px;
    }
    
    .footertext {
        font-size: 10px;
        font-family: sans-serif; 
        margin-top: 1px;
    }
    
    #Footer2 {
        padding-top: 10px;
        padding-left: 10px;
        margin-right: 10px;
    }
    .NavBit  {
        padding: 4px 5px 0.5em 0;
        font-family: sans-serif; 
    }
    @media print {
        .NavBit {
            display: none;
        }
    }
    #TagNotes {
        text-align: right;        
    }
    
    @media print {
        #TagNotes a:visited, #TagNotes a:link {
            color: #35556B;
            text-decoration: none;
        }
    }
    #Contents a, .NavBit a, #TagNotes a {
        color: blue
    }
    #TagNotes a:visited, #TagNotes a:link,
    #Contents a:visited, #Contents a:link,
    .NavBit a:visited, .NavBit a:link {
        text-decoration: none;
    }
    #TagNotes a:hover, #TagNotes a:active,   
    #Contents a:hover, #Contents a:active,   
    .NavBit a:hover, .NavBit a:active {  
        text-decoration: underline;
    }
    #Contents {
        float: left;
        font-family: sans-serif; 
    }
    @media print {
        #Contents {
            display: none;
        }
    }
    @media screen {
        div.PrintHeaders {
            display: none;
        }
    }
    .linkLESSON, .nolinkLESSON {
        margin-left: 0.5em;
        text-indent: -0.5em
    }
    .linkAHEAD, .nolinkAHEAD, .linkQUESTIONS, .nolinkQUESTIONS   {
        margin-left: 1.5em; 
        text-indent: -0.5em
    }
    .linkBHEAD, .nolinkBHEAD   {
        margin-left: 2.5em;
        text-indent: -0.5em
    }
    .linkCHEAD, .nolinkCHEAD   {
        margin-left: 3.5em;
        text-indent: -0.5em
    }
    .nolinkLESSON, .nolinkAHEAD, .nolinkBHEAD, .nolinkCHEAD,
    .nolinkQUESTIONS {
        font-weight: bold;
        color: #F90000;
    }
    .MainFlow_indented {
        margin-right: 10px;
        margin-left: 15em;
        margin-bottom: 2em;

    }
    .MainFlow_wide {
        margin-right: 10px;
        margin-left: 10px;
        margin-bottom: 2em;

    }
    @media print {
        .MainFlow_indented, .MainFlow_wide {
            padding-top: 0;
            margin-top: 10px;
            margin-right: 10px;
            margin-left: 0;
        }
    }
    h1, h2, h3, h4, h5 {
        color: #F90000;
        font-family: sans-serif;
    }

    h1 {
        font-weight: bold;
        font-size: 20px;
    }

    h2 {
        font-weight: bold;
        font-size: 17px;
    }

    h3 {
        font-weight: bold;
        font-size: 14px;
    }

    h4 {
        font-size: 15px;
    }

    h5 {
        font-size: 12px;
    }


    #ToggleLeft {
        display: none;
    }
    
    .note {
        margin: 0 30px 0px 30px;
    }
    
    .codeblock {
        margin: 0 30px 0px 30px;
    }

    /t

</style>
<script type="text/javascript">
    function leftBar() {
        var nameq = 'tutorial_showLeftBar='
        var cookies = document.cookie.split(';');
        for (var i = 0; i < cookies.length; i++) {
            var cookieString = cookies[i];
            while (cookieString.charAt(0) == ' ') {
                cookieString = cookieString.substring(1, cookieString.length);
            }
            if (cookieString.indexOf(nameq) == 0) {
                cookieValue =  cookieString.substring(nameq.length,
                        cookieString.length);
                return cookieValue == 'yes';
            }
        }
        return true;
    }

    function showLeft(b) {
        var contents = document.getElementById("LeftBar");
        var main = document.getElementById("MainFlow");
        var toggle = document.getElementById("ToggleLeft");
        if (b) {
            contents.className = "LeftBar_shown";
            main.className = "MainFlow_indented";
            toggle.innerHTML = "Hide the TOC";
            document.cookie = 'tutorial_showLeftBar=yes; path=/';
        } else {
            contents.className = "LeftBar_hidden";
            main.className = "MainFlow_wide";
            toggle.innerHTML = "Show the TOC";
            document.cookie = 'tutorial_showLeftBar=no; path=/';
        }
    }

    function toggleLeft() {
        showLeft(document.getElementById("LeftBar").className ==
                "LeftBar_hidden");
        document.getElementById("ToggleLeft").blur();
    }

    function load() {
        showLeft(leftBar());
        document.getElementById("ToggleLeft").style.display="inline";
    }
    
</script>
<noscript> 
A browser with JavaScript enabled is required for this page to operate properly.
</noscript>

    </head>
<body onload="load()">
    <div id=TopBar> <div id=TopBar_tr> <div id=TopBar_tl> <div id=TopBar_br> <div id=TopBar_bl> 
                        <div id=TopBar_right> 
                            <a target="_blank"
                                href="http://java.sun.com/javase/6/download.jsp">Download
                                the JDK</a>
                            <br>
                            <a href="../../search.html" target="_blank">Search the
                                Tutorials</a>
                            <br>
                            <a href="javascript:toggleLeft()"
                                id="ToggleLeft">Hide the TOC</a>
                        </div>
                    </div> </div> </div> </div> </div>
    <div class=PrintHeaders>
        <b>Trail:</b> Internationalization
        <br><b>Lesson:</b> Working with Text
        <br><b>Section:</b> Converting Non-Unicode Text
    </div>

    <div id=LeftBar class=LeftBar_shown>
        <div id=Contents>
            <div class="linkLESSON"><a href="index.html">Working with Text</a></div>
<div class="linkAHEAD"><a href="charintro.html">Checking Character Properties</a></div>
<div class="linkAHEAD"><a href="collationintro.html">Comparing Strings</a></div>
<div class="linkBHEAD"><a href="locale.html">Performing Locale-Independent Comparisons</a></div>
<div class="linkBHEAD"><a href="rule.html">Customizing Collation Rules</a></div>
<div class="linkBHEAD"><a href="perform.html">Improving Collation Performance</a></div>
<div class="linkAHEAD"><a href="unicode.html">Unicode</a></div>
<div class="linkBHEAD"><a href="terminology.html">Terminology</a></div>
<div class="linkBHEAD"><a href="supplementaryChars.html">Supplementary Characters as Surrogates</a></div>
<div class="linkBHEAD"><a href="characterClass.html">Character and String APIs</a></div>
<div class="linkBHEAD"><a href="usage.html">Sample Usage</a></div>
<div class="linkBHEAD"><a href="design.html">Design Considerations</a></div>
<div class="linkBHEAD"><a href="info.html">More Information</a></div>
<div class="linkAHEAD"><a href="boundaryintro.html">Detecting Text Boundaries</a></div>
<div class="linkBHEAD"><a href="about.html">About the BreakIterator Class</a></div>
<div class="linkBHEAD"><a href="char.html">Character Boundaries</a></div>
<div class="linkBHEAD"><a href="word.html">Word Boundaries</a></div>
<div class="linkBHEAD"><a href="sentence.html">Sentence Boundaries</a></div>
<div class="linkBHEAD"><a href="line.html">Line Boundaries</a></div>
<div class="linkAHEAD"><a href="shapedDigits.html">Converting Latin Digits to Other Unicode Digits</a></div>
<div class="linkAHEAD"><a href="convertintro.html">Converting Non-Unicode Text</a></div>
<div class="linkBHEAD"><a href="string.html">Byte Encodings and Strings</a></div>
<div class="nolinkBHEAD">Character and Byte Streams</div>
<div class="linkAHEAD"><a href="normalizerapi.html">Normalizing Text</a></div>
</div>
    </div>
    <div id=MainFlow class=MainFlow_indented>
            <span id=BreadCrumbs>
                <a href=../../index.html target=_top>Home Page</a>
                &gt;
                <a href=../index.html target=_top>Internationalization</a>
                &gt;
                <a href=index.html target=_top>Working with Text</a>
            </span>
            <div class=NavBit>
                <a target=_top href=string.html>&laquo;&nbsp;Previous</a>&nbsp;&bull;&nbsp;<a target=_top href=../TOC.html>Trail</a>&nbsp;&bull;&nbsp;<a target=_top href=normalizerapi.html>Next&nbsp;&raquo;</a>
            </div>
            <div id=PageTitle><h1>Character and Byte Streams</h1></div>
            <div id=PageContent>
The <CODE>java.io</CODE>
package provides classes that allow you to convert between Unicode
character streams and byte streams of non-Unicode text. With the
<a class="APILink" target="_blank" href="http://download.oracle.com/javase/7/docs/api/java/io/InputStreamReader.html"><code>InputStreamReader</code></a> class, you can convert byte streams to character streams. You use the
<a class="APILink" target="_blank" href="http://download.oracle.com/javase/7/docs/api/java/io/OutputStreamWriter.html"><code>OutputStreamWriter</code></a>class to translate character streams into byte streams. The following
figure illustrates the conversion process:

<p><center><IMG SRC="../../figures/i18n/i18n-6.gif" WIDTH="419" HEIGHT="89" ALIGN="BOTTOM" ALT="This figure represents the conversion process"></center></p>
<P>
When you create <CODE>InputStreamReader</CODE>
and <CODE>OutputStreamWriter </CODE>
objects, you specify the byte encoding that you want to convert. For
example, to translate a text file in the UTF-8 encoding into Unicode,
you create an <CODE>InputStreamReader</CODE> as follows: 
<div class="codeblock"><pre>
FileInputStream fis = new FileInputStream(&quot;test.txt&quot;);
InputStreamReader isr = new InputStreamReader(fis, &quot;UTF8&quot;);
</pre></div>
<P>
If you omit the encoding identifier, <CODE>InputStreamReader</CODE>
and <CODE>OutputStreamWriter</CODE>
rely on the default encoding. You can determine which encoding an
<CODE>InputStreamReader</CODE> or <CODE>OutputStreamWriter</CODE>
uses by invoking the <CODE>getEncoding</CODE> method, as follows: 
<div class="codeblock"><pre>
InputStreamReader defaultReader = new InputStreamReader(fis);
String defaultEncoding = defaultReader.getEncoding();
</pre></div>
<P>
The example that follows shows you how to perform character-set
conversions with the <CODE>InputStreamReader</CODE>
and <CODE>OutputStreamWriter</CODE>
classes. The full source code for this example is in

<a class="SourceLink" target="_blank" href="examples/StreamConverter.java"><code>StreamConverter.java</code></a>.
This program displays Japanese characters. Before trying it out, verify
that the appropriate fonts have been installed on your system. If you
are using the JDK software that is compatible with version 1.1, make a
copy of the <CODE>font.properties</CODE> file and then replace it with the
<CODE>font.properties.ja</CODE> file. 
<P>
The <CODE>StreamConverter</CODE>
program converts a sequence of Unicode characters from a <CODE>String</CODE>
object into a <CODE>FileOutputStream</CODE>
of bytes encoded in UTF-8. The method that performs the conversion is
called <CODE>writeOutput</CODE>: 
<div class="codeblock"><pre>
static void writeOutput(String str) {

    try {
	FileOutputStream fos = new FileOutputStream(&quot;test.txt&quot;);
	Writer out = new OutputStreamWriter(fos, &quot;UTF8&quot;);
	out.write(str);
	out.close();
    } catch (IOException e) {
	e.printStackTrace();
    }
}
</pre></div>
<P>
The <CODE>readInput</CODE>
method reads the bytes encoded in UTF-8 from the file created by the
<CODE>writeOutput</CODE>
method. An <CODE>InputStreamReader </CODE>
object converts the bytes from UTF-8 into Unicode and returns the
result in a <CODE>String</CODE>. The <CODE>readInput</CODE>
method is as follows: 
<div class="codeblock"><pre>
static String readInput() {

    StringBuffer buffer = new StringBuffer();
    try {
	FileInputStream fis = new FileInputStream(&quot;test.txt&quot;);
	InputStreamReader isr = new InputStreamReader(fis,
						      &quot;UTF8&quot;);
	Reader in = new BufferedReader(isr);
	int ch;
	while ((ch = in.read()) &gt; -1) {
		buffer.append((char)ch);
	}
	in.close();
	return buffer.toString();
    } catch (IOException e) {
	e.printStackTrace();
	return null;
    }
}
</pre></div>
<P>
The <CODE>main</CODE>
method of the <CODE>StreamConverter</CODE>
program invokes the <CODE>writeOutput</CODE>
method to create a file of bytes encoded in UTF-8. The <CODE>readInput</CODE>
method reads the same file, converting the bytes back into Unicode.
Here is the source code for the <CODE>main</CODE> method: 
<div class="codeblock"><pre>
public static void main(String[] args) {

    String jaString =	
	new String(&quot;\u65e5\u672c\u8a9e\u6587\u5b57\u5217&quot;);

    writeOutput(jaString); 
    String inputString = readInput();
    String displayString = jaString + &quot; &quot; + inputString;
    new ShowString(displayString, &quot;Conversion Demo&quot;);
}
</pre></div>
<P>
The original string (<CODE>jaString</CODE>)
should be identical to the newly created string (<CODE>inputString</CODE>).
To show that the two strings are the same,
the program concatenates them and displays them with a <CODE>ShowString</CODE>
object. The <CODE>ShowString</CODE> class displays a string with the
<CODE>Graphics.drawString</CODE> method.
The source code for this class is in

<a class="SourceLink" target="_blank" href="examples/ShowString.java"><code>ShowString.java</code></a>.
When the <CODE>StreamConverter</CODE> program instantiates <CODE>ShowString</CODE>,
the following window appears. The repetition of the characters
displayed verifies that the two strings are identical:

<p><center><IMG SRC="../../figures/i18n/conversion.gif" WIDTH="478" HEIGHT="108" ALIGN="BOTTOM" ALT="This is a screens hot of the StreamConverter program"></center></p>
        </div>
        <div class=NavBit>
            <a target=_top href=string.html>&laquo; Previous</a>
            &bull;
            <a target=_top href=../TOC.html>Trail</a>
            &bull;
            <a target=_top href=normalizerapi.html>Next &raquo;</a>
        </div>
    </div>
    <div id=Footer2>
<hr>
<div id=TagNotes>
    <p class="footertext">Problems with the examples? Try <a target="_blank"
        href=../../information/run-examples.html>Compiling and Running
        the Examples: FAQs</a>.
    <br>
    Complaints? Compliments? Suggestions? <a target="_blank"
        href="http://download.oracle.com/javase/feedback.html">Give
    us your feedback</a>.
    </p>
</div> 

<div id=Footer>
<p class="footertext"><a name="license_info">Your use of this</a> page and all the material on pages under &quot;The Java Tutorials&quot; banner,
and all the material on pages under &quot;The Java Tutorials&quot; banner is subject to the <a href="../../information/license.html">Java SE Tutorial Copyright
and License</a>.
Additionally, any example code contained in any of these Java
Tutorials pages is licensed under the
<a href="http://developers.sun.com/license/berkeley_license.html">Code
Sample License</a>.
</p>
<table border="0" cellspacing="0" cellpadding="5" summary="">
    <tr>
         <td headers="h1" width="20%">
	 <table width="100%" border="0" cellspacing="0" cellpadding="5">
            <tr>
              <td headers="h1" align="center"><img id=duke src=../../images/DukeWave.gif width=55 height=55 alt="duke image"></td>
              <td headers="h2" align="left" valign="middle"><img id=oracle src=../../images/logo_oracle_footer.gif width=100 height=29 alt="Oracle logo"></td>
           </tr>
          </table>
          </td>

          <td width="55%" valign="middle" align="center">
		<p class="footertext"><a href="http://www.oracle.com/us/corporate/index.html">About Oracle</a> | <a href="http://www.oracle.com/technology/index.html">Oracle Technology Network</a> | <a href="https://www.samplecode.oracle.com/servlets/CompulsoryClickThrough?type=TermsOfService">Terms of Service</a></p> 
	 </td>
          <td width="25%" valign="middle" align="right">
      		<p class="footertext">Copyright &copy; 1995, 2011 Oracle and/or its affiliates. All rights reserved.</p>
	 </td>
     </tr>     
</table>
</div>
    </div>
    <div class=PrintHeaders>
        <b>Previous page:</b> Byte Encodings and Strings
        <br><b>Next page:</b> Normalizing Text
    </div>

<!-- Start SiteCatalyst code   -->
<script language="JavaScript" src="http://www.oracle.com/ocom/groups/systemobject/@mktg_admin/documents/systemobject/s_code_download.js"></script>
<script language="JavaScript" src="http://www.oracle.com/ocom/groups/systemobject/@mktg_admin/documents/systemobject/s_code.js"></script>
<noscript> 
A browser with JavaScript enabled is required for this page to operate properly.
</noscript>
 
<!-- ********** DO NOT ALTER ANYTHING BELOW THIS LINE ! *********** -->
<!--  Below code will send the info to Omniture server -->
<script language="javascript">var s_code=s.t();if(s_code)document.write(s_code)</script>

 
<!-- End SiteCatalyst code -->

</body>
</html> 
