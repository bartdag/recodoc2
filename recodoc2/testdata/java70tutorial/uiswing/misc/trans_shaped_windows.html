



<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html lang="en-US">
    <head>
        <title>How to Create Translucent and Shaped Windows (The Java&trade; Tutorials &gt;        
            Creating a GUI With JFC/Swing &gt; Using Other Swing Features)
</title>

     <meta name="description" content="This Swing Java Tutorial describes developing graphical user interfaces (GUIs) for applications and applets using Swing components" />
     <meta name="keywords" content="java programming, learn java, java sample code, java swing, java ui, java user interface, swing components, swing events, swing layout  " />
        
<style type="text/css">
    .FigureCaption   { 
        margin-left: 1in; 
        margin-right: 1in; 
        font-family: sans-serif; 
        font-size: smaller; 
        text-align: justify;
    }
    #TopBar_bl {
        background: url(../../images/java_bar_bl.gif) 0 100% no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_br {
        background: url(../../images/java_bar_br.gif) 100% 100% no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_tl {
        background: url(../../images/java_bar_tl.gif) 0 0 no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_tr {
        background: url(../../images/java_bar_tr.gif) 100% 0 no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar {
        background: #35556B url(../../images/java_bar.gif);
        margin: 10px 10px 0 10px;
        height:60px;
        min-width:700px;
        color: white;
        font-family: sans-serif; 
        font-weight: bold;
    }
    @media print {
        #BreadCrumbs, #Download {
            display: none;
        }
    }
    #TopBar_right {
        line-height: 14px;
        float: right;
        padding-top: 2px;
        padding-right: 30px;
        text-align: center;
    }
    @media print {
        #TopBar_right {
            display: none;
        }
    }
    #TopBar_right a {
        font-size: 12px;
        margin: 3px;
        padding: 0;
    }
    #TopBar a:visited, #TopBar a:link {
        color: white;
        text-decoration: none;
    }
    #TopBar a:hover, #TopBar a:active  {
        background-color: white;
        color: #35556B;
    }
    #BreadCrumbs {
        padding: 4px 5px 0.5em 0;
        font-family: sans-serif; 
        float: right;
    }
    #BreadCrumbs a {
        color: blue;
    }
    #BreadCrumbs a:visited, #BreadCrumbs a:link {
        text-decoration: none;
    }
    #BreadCrumbs a:hover, #BreadCrumbs a:active {
        text-decoration: underline;
    }
    #PageTitle {
        margin: 0 5px 0.5em 0;
        color: #F90000;
    }    
    #PageContent{
        margin: 0 5px 0 20px;
    }
    .LeftBar_shown {
        width: 13em;
        float: left;
        margin-left: 10px;
        margin-top: 4px;
        margin-bottom: 2em;
        margin-right: 10px;
    }
    @media print {
        .LeftBar_shown {
            display: none;
        }
    }
    .LeftBar_hidden {
        display: none;
    }
    #Footer {
        padding-top: 10px;
        padding-left: 10px;
        margin-right: 10px;
    }
    
    .footertext {
        font-size: 10px;
        font-family: sans-serif; 
        margin-top: 1px;
    }
    
    #Footer2 {
        padding-top: 10px;
        padding-left: 10px;
        margin-right: 10px;
    }
    .NavBit  {
        padding: 4px 5px 0.5em 0;
        font-family: sans-serif; 
    }
    @media print {
        .NavBit {
            display: none;
        }
    }
    #TagNotes {
        text-align: right;        
    }
    
    @media print {
        #TagNotes a:visited, #TagNotes a:link {
            color: #35556B;
            text-decoration: none;
        }
    }
    #Contents a, .NavBit a, #TagNotes a {
        color: blue
    }
    #TagNotes a:visited, #TagNotes a:link,
    #Contents a:visited, #Contents a:link,
    .NavBit a:visited, .NavBit a:link {
        text-decoration: none;
    }
    #TagNotes a:hover, #TagNotes a:active,   
    #Contents a:hover, #Contents a:active,   
    .NavBit a:hover, .NavBit a:active {  
        text-decoration: underline;
    }
    #Contents {
        float: left;
        font-family: sans-serif; 
    }
    @media print {
        #Contents {
            display: none;
        }
    }
    @media screen {
        div.PrintHeaders {
            display: none;
        }
    }
    .linkLESSON, .nolinkLESSON {
        margin-left: 0.5em;
        text-indent: -0.5em
    }
    .linkAHEAD, .nolinkAHEAD, .linkQUESTIONS, .nolinkQUESTIONS   {
        margin-left: 1.5em; 
        text-indent: -0.5em
    }
    .linkBHEAD, .nolinkBHEAD   {
        margin-left: 2.5em;
        text-indent: -0.5em
    }
    .linkCHEAD, .nolinkCHEAD   {
        margin-left: 3.5em;
        text-indent: -0.5em
    }
    .nolinkLESSON, .nolinkAHEAD, .nolinkBHEAD, .nolinkCHEAD,
    .nolinkQUESTIONS {
        font-weight: bold;
        color: #F90000;
    }
    .MainFlow_indented {
        margin-right: 10px;
        margin-left: 15em;
        margin-bottom: 2em;

    }
    .MainFlow_wide {
        margin-right: 10px;
        margin-left: 10px;
        margin-bottom: 2em;

    }
    @media print {
        .MainFlow_indented, .MainFlow_wide {
            padding-top: 0;
            margin-top: 10px;
            margin-right: 10px;
            margin-left: 0;
        }
    }
    h1, h2, h3, h4, h5 {
        color: #F90000;
        font-family: sans-serif;
    }

    h1 {
        font-weight: bold;
        font-size: 20px;
    }

    h2 {
        font-weight: bold;
        font-size: 17px;
    }

    h3 {
        font-weight: bold;
        font-size: 14px;
    }

    h4 {
        font-size: 15px;
    }

    h5 {
        font-size: 12px;
    }


    #ToggleLeft {
        display: none;
    }
    
    .note {
        margin: 0 30px 0px 30px;
    }
    
    .codeblock {
        margin: 0 30px 0px 30px;
    }

    /t

</style>
<script type="text/javascript">
    function leftBar() {
        var nameq = 'tutorial_showLeftBar='
        var cookies = document.cookie.split(';');
        for (var i = 0; i < cookies.length; i++) {
            var cookieString = cookies[i];
            while (cookieString.charAt(0) == ' ') {
                cookieString = cookieString.substring(1, cookieString.length);
            }
            if (cookieString.indexOf(nameq) == 0) {
                cookieValue =  cookieString.substring(nameq.length,
                        cookieString.length);
                return cookieValue == 'yes';
            }
        }
        return true;
    }

    function showLeft(b) {
        var contents = document.getElementById("LeftBar");
        var main = document.getElementById("MainFlow");
        var toggle = document.getElementById("ToggleLeft");
        if (b) {
            contents.className = "LeftBar_shown";
            main.className = "MainFlow_indented";
            toggle.innerHTML = "Hide the TOC";
            document.cookie = 'tutorial_showLeftBar=yes; path=/';
        } else {
            contents.className = "LeftBar_hidden";
            main.className = "MainFlow_wide";
            toggle.innerHTML = "Show the TOC";
            document.cookie = 'tutorial_showLeftBar=no; path=/';
        }
    }

    function toggleLeft() {
        showLeft(document.getElementById("LeftBar").className ==
                "LeftBar_hidden");
        document.getElementById("ToggleLeft").blur();
    }

    function load() {
        showLeft(leftBar());
        document.getElementById("ToggleLeft").style.display="inline";
    }
    
</script>
<noscript> 
A browser with JavaScript enabled is required for this page to operate properly.
</noscript>

    </head>
<body onload="load()">
    <div id=TopBar> <div id=TopBar_tr> <div id=TopBar_tl> <div id=TopBar_br> <div id=TopBar_bl> 
                        <div id=TopBar_right> 
                            <a target="_blank"
                                href="http://java.sun.com/javase/6/download.jsp">Download
                                the JDK</a>
                            <br>
                            <a href="../../search.html" target="_blank">Search the
                                Tutorials</a>
                            <br>
                            <a href="javascript:toggleLeft()"
                                id="ToggleLeft">Hide the TOC</a>
                        </div>
                    </div> </div> </div> </div> </div>
    <div class=PrintHeaders>
        <b>Trail:</b> Creating a GUI With JFC/Swing
        <br><b>Lesson:</b> Using Other Swing Features
    </div>

    <div id=LeftBar class=LeftBar_shown>
        <div id=Contents>
            <div class="linkLESSON"><a href="index.html">Using Other Swing Features</a></div>
<div class="linkAHEAD"><a href="desktop.html">How to Integrate with the Desktop Class</a></div>
<div class="nolinkAHEAD">How to Create Translucent and Shaped Windows</div>
<div class="linkAHEAD"><a href="jlayer.html">How to Decorate Components with the JLayer Class</a></div>
<div class="linkAHEAD"><a href="action.html">How to Use Actions</a></div>
<div class="linkAHEAD"><a href="timer.html">How to Use Swing Timers</a></div>
<div class="linkAHEAD"><a href="access.html">How to Support Assistive Technologies</a></div>
<div class="linkAHEAD"><a href="focus.html">How to Use the Focus Subsystem</a></div>
<div class="linkAHEAD"><a href="keybinding.html">How to Use Key Bindings</a></div>
<div class="linkAHEAD"><a href="modality.html">How to Use Modality in Dialogs</a></div>
<div class="linkAHEAD"><a href="printtable.html">How to Print Tables</a></div>
<div class="linkAHEAD"><a href="printtext.html">How to Print Text</a></div>
<div class="linkAHEAD"><a href="splashscreen.html">How to Create a Splash Screen</a></div>
<div class="linkAHEAD"><a href="systemtray.html">How to Use the System Tray</a></div>
<div class="linkAHEAD"><a href="problems.html">Solving Common Problems Using Other Swing Features</a></div>
</div>
    </div>
    <div id=MainFlow class=MainFlow_indented>
            <span id=BreadCrumbs>
                <a href=../../index.html target=_top>Home Page</a>
                &gt;
                <a href=../index.html target=_top>Creating a GUI With JFC/Swing</a>
                &gt;
                <a href=index.html target=_top>Using Other Swing Features</a>
            </span>
            <div class=NavBit>
                <a target=_top href=desktop.html>&laquo;&nbsp;Previous</a>&nbsp;&bull;&nbsp;<a target=_top href=../TOC.html>Trail</a>&nbsp;&bull;&nbsp;<a target=_top href=jlayer.html>Next&nbsp;&raquo;</a>
            </div>
            <div id=PageTitle><h1>How to Create Translucent and Shaped Windows</h1></div>
            <div id=PageContent>
<!-- How to Create Translucent and Shaped Windows -->

As of the Java Platform, Standard Edition 6 (Java SE 6)
Update 10 release, you can add translucent
and shaped windows to your Swing applications.
</ul>
This page covers the following topics:
<ul>
<li><a href="#supported">Supported Capabilities</a>
<li><a href="#capability">Determining a Platform's Capabilities</a>
<li><a href="#uniform">How to Implement Uniform Translucency</a>
<li><a href="#per-pixel">How to Implement Per-Pixel Translucency</a>
<li><a href="#shaped">How to Implement a Shaped Window</a>
<li><a href="#6u10">Java SE Release 6 Update 10 API</a>
<li><a href="#info">For More Information</a>
</ul>

<h2 fmstyle=C-HEAD><a name="supported">Supported Capabilities</a></h2>

This functionality,
which is part of the public AWT package in the JDK 7 release,
takes three forms, as follows:
<ul>
<li>You can create a window with <em>uniform</em> translucency, where each
pixel has the same translucency (or alpha) value.
The following screen capture shows a window with 45 percent translucency.
<p>
<p><center><IMG SRC="../../figures/uiswing/misc/TranslucentWindow.png" WIDTH="331" HEIGHT="225" ALIGN="BOTTOM" ALT="A translucent window"></center></p>
<p>
<li>You can create a window with <em>per-pixel</em> translucency,
where each pixel has its own alpha value.  With this feature you can,
for example, create a window that fades away to nothing by defining a gradient
in the alpha values. The following screen capture shows a 
window with gradient translucency from the top
(fully translucent) to the bottom (fully opaque)</center>.
<p>
<p><center><IMG SRC="../../figures/uiswing/misc/GradientWindow.png" WIDTH="333" HEIGHT="222" ALIGN="BOTTOM" ALT="A window with per-pixel translucency."></center></p><p>

<li>You can create a window with any <code>Shape</code> object
that you can define.
Shaped windows can be opaque, or they can use uniform,
or per-pixel, translucency.  The following screen capture shows an
oval-shaped window with 30 percent translucency.
<p>
<p><center><IMG SRC="../../figures/uiswing/misc/ShapedWindow.png" WIDTH="339" HEIGHT="229" ALIGN="BOTTOM" ALT="A oval-shaped window."></center></p>
<h2 fmstyle=C-HEAD><a name="capability">Determining a Platform's Capabilities</a></h2>

Not all platforms support all of these capabilities.
An <code>UnsupportedOperationException</code> exception is thrown when
code attempts to invoke the <code>setShape</code> or <code>setOpacity</code>
methods on a platform that does not support these capabilities.
Therefore, it is best practice to first check
that the platform supports the capability that you want to implement.
The <code>GraphicsDevice</code> class provides the
<a class="APILink" target="_blank" href="http://download.oracle.com/javase/7/docs/api/java/awt/GraphicsDevice.html#isWindowTranslucencySupported(java.awt.GraphicsDevice.WindowTranslucency)"><code>isWindowTranslucencySupported(GraphicsDevice.WindowTranslucency)</code></a> method that you can use for this purpose.  You pass one of three enum
values, defined in
<a class="APILink" target="_blank" href="http://download.oracle.com/javase/7/docs/api/java/awt/GraphicsDevice.WindowTranslucency.html"><code>GraphicsDevice.WindowTranslucency</code></a>, to this method:
<ul>
<li><code>TRANSLUCENT</code> &ndash; The
underlying platform supports windows with uniform translucency,
where each pixel has the same alpha value.
<li><code>PERPIXEL_TRANSLUCENT</code> &ndash; The
underlying platform supports windows with per-pixel translucency.
This capability is required to implement windows that fade away.
<li><code>PERPIXEL_TRANSPARENT</code> &ndash; The
underlying platform supports shaped windows.
</ul>

The <code>GraphicsConfiguration</code> class also provides the
<a class="APILink" target="_blank" href="http://download.oracle.com/javase/7/docs/api/java/awt/GraphicsConfiguration.html#isTranslucencyCapable()"><code>isTranslucencyCapable</code></a> method to determine if <code>PERPIXEL_TRANSLUCENT</code>
translucency is supported by the given <code>GraphicsConfiguration</code>
object.


<div class="note"><hr><strong>Version note:</strong>&nbsp;The translucent and shaped window API was first added to the
Java SE 6 Update 10 release as a private API.  This functionality was
moved to the public AWT package in the JDK 7 release.  This tutorial
describes the API that is available in the JDK 7 release. See
<a class="TutorialLink" target="_top" href="#6u10">Java SE 6 Update 10 API</a> for a mapping of the private API in the Java SE 6 Update 10 release
to the public API in the JDK 7 release.
<hr></div>
The following code shows how to check for all three capabilities:
<p>
<div class="codeblock"><pre>
import static java.awt.GraphicsDevice.WindowTranslucency.*;

// Determine what the default GraphicsDevice can support.
GraphicsEnvironment ge =
    GraphicsEnvironment.getLocalGraphicsEnvironment();
GraphicsDevice gd = ge.getDefaultScreenDevice();

boolean isUniformTranslucencySupported =
    gd.isWindowTranslucencySupported(TRANSLUCENT);
boolean isPerPixelTranslucencySupported =
    gd.isWindowTranslucencySupported(PERPIXEL_TRANSLUCENT);
boolean isShapedWindowSupported =
    gd.isWindowTranslucencySupported(PERPIXEL_TRANSPARENT);
</pre></div>

<div class="note"><hr><strong>Note:</strong>&nbsp;None of these capabilities work on windows in full-screen mode. Invoking
any of the relevant methods while in full-screen mode causes
an <code>IllegalComponentStateException</code> exception to be thrown.
<hr></div>

<h2 fmstyle=C-HEAD><a name="uniform">How to Implement Uniform Translucency</a></h2>
You can create a window where each pixel has the same translucency
by invoking the
<a class="APILink" target="_blank" href="http://download.oracle.com/javase/7/docs/api/java/awt/Window.html#setOpacity(float)"><code>setOpacity(float)</code></a> method in the <code>Window</code> class. The <code>float</code>
argument passed to this method represents the translucency of the window
and should be a value between 0 and 1, inclusive.
The smaller the number, the more transparent the window.
There is also a corresponding
<a class="APILink" target="_blank" href="http://download.oracle.com/javase/7/docs/api/java/awt/Window.html#getOpacity()"><code>getOpacity</code></a> method.
<p>
The following example creates a window that is 55 percent opaque
(45 percent translucent).
If the underlying platform does not support translucent windows, the example
exits.  The code relating to opacity is shown in bold.
<p>
<div class="codeblock"><pre>
import java.awt.*;
import javax.swing.*;
import static java.awt.GraphicsDevice.WindowTranslucency.*;

public class TranslucentWindow extends JFrame {
    public TranslucentWindow() {
        super("TranslucentWindow");
        setLayout(new GridBagLayout());

        setSize(300,200);
        setLocationRelativeTo(null);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        //Add a sample button.
        add(new JButton("I am a Button"));
    }

    public static void main(String[] args) {
        // Determine if the GraphicsDevice supports translucency.
        <b>GraphicsEnvironment ge = 
            GraphicsEnvironment.getLocalGraphicsEnvironment();
        GraphicsDevice gd = ge.getDefaultScreenDevice();</b>

        //If translucent windows aren't supported, exit.
        <b>if (!gd.isWindowTranslucencySupported(TRANSLUCENT)) {
            System.err.println(
                "Translucency is not supported");
                System.exit(0);
        }</b>

        // Create the GUI on the event-dispatching thread
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                TranslucentWindow tw = new TranslucentWindow();

		// Set the window to 55% opaque (45% translucent).
                <b>tw.setOpacity(0.55f);</b>

		// Display the window.
		tw.setVisible(true);
	    }
        });
    }
}
</pre></div>
<p>
Note that the button is also affected by the uniform translucency.
Setting the opacity affects the whole window, including any components
that the window contains.

<h2 fmstyle=C-HEAD><a name="per-pixel">How to Implement Per-Pixel Translucency</a></h2>

Creating a window that uses per-pixel translucency involves defining
alpha values over the rectangular area that the window occupies.
When a pixel's alpha value is zero, that pixel is fully transparent. 
When a pixel's alpha value is 255, that pixel is fully opaque.
When a pixel's alpha value is 128, that pixel is 50 percent translucent,
and so on.
An easy way to create a smooth interpolation between alpha values
is to use the 
<a class="APILink" target="_blank" href="http://download.oracle.com/javase/7/docs/api/java/awt/GradientPaint.html"><code>GradientPaint</code></a> class. The included example uses this approach.
<p>
Invoking
<a class="APILink" target="_blank" href="http://download.oracle.com/javase/7/docs/api/java/awt/Window.html#setBackground(java.awt.Color)"><code>setBackground(new Color(0,0,0,0))</code></a> on the window causes the software to use the alpha values to
render per-pixel translucency. In fact, invoking
<code>setBackground(new Color(0,0,0,alpha)</code>, where <code>alpha</code>
is less than 255, installs per-pixel transparency. So, if you
invoke <code>setBackground(new Color(0,0,0,128))</code> and do nothing else,
the window is rendered with 50 percent translucency for each background pixel.
However, if you are creating your own range of alpha values,
you most likely will want an alpha value of 0.
<p>
While not prohibited by the public API, you will generally want
to enable per-pixel translucency on undecorated windows.  In most
cases, using per-pixel translucency on decorated windows does not
make sense. Doing so can disable the decorations,
or cause other platform-dependent side effects.
<p>
To determine if a window is using per-pixel translucency, you can use the
<a class="APILink" target="_blank" href="http://download.oracle.com/javase/7/docs/api/java/awt/Window.html#isOpaque()"><code>isOpaque</code></a> method.
<p>
An example follows.
First, here are the steps required to implement the example:
<ol>
<li>Invoke <code>setBackground(new Color(0,0,0,0))</code> on the window.
<li>Create a <code>JPanel</code> instance that overrides the
<code>paintComponent</code> method. 
<li>In the <code>paintComponent</code> method, create a
<code>GradientPaint</code> instance. 
<li>In the example, the top of the rectangle
has an alpha value of 0 (the most transparent) and the bottom has an
alpha value of 255 (the most opaque).  The <code>GradientPaint</code>
class smoothly interpolates the alpha values from the top to the bottom
of the rectangle.
<li>Set the <code>GradientPaint</code> instance as the panel's paint
method.
</ol>
<p>
Here is the code for the <code>GradientWindow</code> example.
If the underlying platform does not support per-pixel translucency,
this example exits.
The code specifically relating to creating the gradient window
is shown in bold.
<p>
<div class="codeblock"><pre>
import java.awt.*;
import javax.swing.*;
import static java.awt.GraphicsDevice.WindowTranslucency.*;

public class GradientTranslucentWindow extends JFrame {
    public GradientTranslucentWindow() {
        super("GradientTranslucentWindow");

        <b>setBackground(new Color(0,0,0,0));</b>
        setSize(new Dimension(300,200));
        setLocationRelativeTo(null);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        <b>JPanel panel = new JPanel() {</b>
            <b>@Override
            protected void paintComponent(Graphics g) {
                if (g instanceof Graphics2D) {
                    final int R = 240;
                    final int G = 240;
                    final int B = 240;

                    Paint p =
                        new GradientPaint(0.0f, 0.0f, new Color(R, G, B, 0),
                            0.0f, getHeight(), new Color(R, G, B, 255), true);
                    Graphics2D g2d = (Graphics2D)g;
                    g2d.setPaint(p);
                    g2d.fillRect(0, 0, getWidth(), getHeight());
                }
            }
        };</b>
        setContentPane(panel);
        setLayout(new GridBagLayout());
        add(new JButton("I am a Button"));
    }

    public static void main(String[] args) {
        // Determine what the GraphicsDevice can support.
        <b>GraphicsEnvironment ge = 
            GraphicsEnvironment.getLocalGraphicsEnvironment();
        GraphicsDevice gd = ge.getDefaultScreenDevice();</b>
        boolean isPerPixelTranslucencySupported = 
            gd.isWindowTranslucencySupported(PERPIXEL_TRANSLUCENT);

        //If translucent windows aren't supported, exit.
        <b>if (!isPerPixelTranslucencySupported) {
            System.out.println(
                "Per-pixel translucency is not supported");
                System.exit(0);
        }</b>

        JFrame.setDefaultLookAndFeelDecorated(true);

        // Create the GUI on the event-dispatching thread
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                GradientTranslucentWindow gtw = new GradientTranslucentWindow();

		// Display the window.
		gtw.setVisible(true);
	    }
        });
    }
}
</pre></div>
<p>

Note that the button is not affected by the per-pixel translucency.
Setting the per-pixel translucency affects the background pixels only.
If you want a window that has a uniformly translucent effect on the
background pixels only,
you can invoke <code>setBackground(new Color(0,0,0,alpha))</code>
where <code>alpha</code> specifies your desired translucency.

<h2 fmstyle=C-HEAD><a name="shaped">How to Implement a Shaped Window</a></h2>

You can create a shaped window by invoking the
<a class="APILink" target="_blank" href="http://download.oracle.com/javase/7/docs/api/java/awt/Window.html#setShape(java.awt.Shape)"><code>setShape(Shape)</code></a> method in the <code>Window</code> class.  The <code>Shape</code> argument
that is passed to the method determines how the window is clipped.
When a shape is set on a window, the window
decorations are not re-formed to the new shape,
so setting a shape works best on undecorated windows.
<p>
The best practice for setting the window's shape is to
invoke <code>setShape</code> in the <code>componentResized</code>
method of the component event listener.  This practice will ensure that the
shape is correctly calculated for the actual size of the window.
The following example uses this approach.
<p>
The example creates an oval-shaped window with 70 percent
opacity.  If the underlying platform does not support shaped
windows, the example exits.  If the underlying platform does not support
translucency, the example uses a standard opaque window.
You could modify this example to create a shaped window that
also uses per-pixel translucency.
<p>
The code relating to shaping the window is shown in bold.
<p>
<div class="codeblock"><pre>
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import java.awt.geom.Ellipse2D;
import static java.awt.GraphicsDevice.WindowTranslucency.*;

public class ShapedWindow extends JFrame {
    public ShapedWindow() {
        super("ShapedWindow");
        setLayout(new GridBagLayout());

        // It is best practice to set the window's shape in
        // the componentResized method.  Then, if the window
        // changes size, the shape will be correctly recalculated.
        <b>addComponentListener(new ComponentAdapter() {</b>
            // Give the window an elliptical shape.
            // If the window is resized, the shape is recalculated here.
            <b>@Override
            public void componentResized(ComponentEvent e) {
	        setShape(new Ellipse2D.Double(0,0,getWidth(),getHeight()));
            }
        });</b>

        <b>setUndecorated(true);</b>
        setSize(300,200);
        setLocationRelativeTo(null);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        add(new JButton("I am a Button"));
    }

    public static void main(String[] args) {
        // Determine what the GraphicsDevice can support.
        <b>GraphicsEnvironment ge = 
            GraphicsEnvironment.getLocalGraphicsEnvironment();
        GraphicsDevice gd = ge.getDefaultScreenDevice();</b>
        final boolean isTranslucencySupported = 
            gd.isWindowTranslucencySupported(TRANSLUCENT);

        //If shaped windows aren't supported, exit.
        <b>if (!gd.isWindowTranslucencySupported(PERPIXEL_TRANSPARENT)) {
            System.err.println("Shaped windows are not supported");
            System.exit(0);
        }</b>

        //If translucent windows aren't supported, 
        //create an opaque window.
        if (!isTranslucencySupported) {
            System.out.println(
                "Translucency is not supported, creating an opaque window");
        }

        // Create the GUI on the event-dispatching thread
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                ShapedWindow sw = new ShapedWindow();

		// Set the window to 70% translucency, if supported.
		if (isTranslucencySupported) {
		    sw.setOpacity(0.7f);
		}

		// Display the window.
		sw.setVisible(true);
	    }
        });
    }
}
</pre></div>

<h2 fmstyle=C-HEAD><a name="6u10">Java SE 6 Update 10 API</a></h2>

Changing the public API in an update release is not allowed,
so when the translucent and shaped windows capability was added
to the Java SE 6 Update 10 release, it was implemented in the private 
<code>com.sun.awt.AWTUtilities</code> class.  For the JDK 7 release,
this functionality was moved to the public AWT package. 
The following table shows how the private methods map to the
public methods.
<p>
<table border="1"
summary="This table shows what the translucent and shaped
window functionality in Java SE 6 Update 10 maps in JDK 7.
cellspacing="2" cellpadding="0">
    <tr>
        <th id="h1">Method in Java SE 6 Update 10</th>
	<th id="h2">JDK 7 Equivalent</th>
    </tr>
    <tr>
        <td headers="h1"><code>AWTUtilities.isTranslucencySupported(Translucency)</code>
        <td headers="h2"><code>GraphicsDevice.isWindowTranslucencySupported(WindowTranslucency)</coe>
    </tr>
    <tr>
        <td headers="h1"><code>AWTUtilities.isTranslucencyCapable(GraphicsConfiguration)</code>
        <td headers="h2"><code>GraphicsConfiguration.isTranslucencyCapable()</code>
    </tr>
    <tr>
        <td headers="h1"><code>AWTUtilities.setWindowOpacity(Window, float)</code>
        <td headers="h2"><code>Window.setOpacity(float)</code>
    </tr>
    <tr>
        <td headers="h1"><code>AWTUtilities.setWindowShape(Window, Shape)</code>
        <td headers="h2"><code>Window.setShape(Shape)</code>
    </tr>
    <tr>
        <td headers="h1"><code>AWTUtilities.setWindowOpaque(boolean)</code>
        <td headers="h2"><code>Window.setBackground(Color)</code> 
        Passing <code>new Color(0,0,0,alpha)</code> to this method,
        where <code>alpha</code> is less than 255,
        installs per-pixel translucency.
    </tr>
</table>


<h2 fmstyle=C-HEAD><a name="info">For More Information</a></h2>

<ul>
<li>The
<a class="OutsideLink" target="_blank" href="http://java.sun.com/developer/technicalArticles/GUI/translucent_shaped_windows/">How to Create Translucent and Shaped Windows</a> article describes the Java SE 6 Update 10 API.
<li>The
<a class="OutsideLink" target="_blank" href="http://today.java.net/pub/a/today/2008/03/18/translucent-and-shaped-swing-windows.html">Translucent and Shaped Swing Windows</a> article describes the Java SE 6 Update 10 API.
<li>Romain Guy's 
<a class="OutsideLink" target="_blank" href="http://www.curious-creature.org/2007/09/28/translucent-shaped-windows-extreme-gui-makeover/">Curious Creature</a> blog entry shows a demo with an application of a translucent shaped window.
</ul>
        </div>
        <div class=NavBit>
            <a target=_top href=desktop.html>&laquo; Previous</a>
            &bull;
            <a target=_top href=../TOC.html>Trail</a>
            &bull;
            <a target=_top href=jlayer.html>Next &raquo;</a>
        </div>
    </div>
    <div id=Footer2>
<hr>
<div id=TagNotes>
    <p class="footertext">Problems with the examples? Try <a target="_blank"
        href=../../information/run-examples.html>Compiling and Running
        the Examples: FAQs</a>.
    <br>
    Complaints? Compliments? Suggestions? <a target="_blank"
        href="http://download.oracle.com/javase/feedback.html">Give
    us your feedback</a>.
    </p>
</div> 

<div id=Footer>
<p class="footertext"><a name="license_info">Your use of this</a> page and all the material on pages under &quot;The Java Tutorials&quot; banner,
and all the material on pages under &quot;The Java Tutorials&quot; banner is subject to the <a href="../../information/license.html">Java SE Tutorial Copyright
and License</a>.
Additionally, any example code contained in any of these Java
Tutorials pages is licensed under the
<a href="http://developers.sun.com/license/berkeley_license.html">Code
Sample License</a>.
</p>
<table border="0" cellspacing="0" cellpadding="5" summary="">
    <tr>
         <td headers="h101" width="20%">
	 <table width="100%" border="0" cellspacing="0" cellpadding="5">
            <tr>
              <td headers="h101" align="center"><img id=duke src=../../images/DukeWave.gif width=55 height=55 alt="duke image"></td>
              <td headers="h102" align="left" valign="middle"><img id=oracle src=../../images/logo_oracle_footer.gif width=100 height=29 alt="Oracle logo"></td>
           </tr>
          </table>
          </td>

          <td width="55%" valign="middle" align="center">
		<p class="footertext"><a href="http://www.oracle.com/us/corporate/index.html">About Oracle</a> | <a href="http://www.oracle.com/technology/index.html">Oracle Technology Network</a> | <a href="https://www.samplecode.oracle.com/servlets/CompulsoryClickThrough?type=TermsOfService">Terms of Service</a></p> 
	 </td>
          <td width="25%" valign="middle" align="right">
      		<p class="footertext">Copyright &copy; 1995, 2011 Oracle and/or its affiliates. All rights reserved.</p>
	 </td>
     </tr>     
</table>
</div>
    </div>
    <div class=PrintHeaders>
        <b>Previous page:</b> How to Integrate with the Desktop Class
        <br><b>Next page:</b> How to Decorate Components with the JLayer Class
    </div>

<!-- Start SiteCatalyst code   -->
<script language="JavaScript" src="http://www.oracle.com/ocom/groups/systemobject/@mktg_admin/documents/systemobject/s_code_download.js"></script>
<script language="JavaScript" src="http://www.oracle.com/ocom/groups/systemobject/@mktg_admin/documents/systemobject/s_code.js"></script>
<noscript> 
A browser with JavaScript enabled is required for this page to operate properly.
</noscript>
 
<!-- ********** DO NOT ALTER ANYTHING BELOW THIS LINE ! *********** -->
<!--  Below code will send the info to Omniture server -->
<script language="javascript">var s_code=s.t();if(s_code)document.write(s_code)</script>

 
<!-- End SiteCatalyst code -->

</body>
</html> 
