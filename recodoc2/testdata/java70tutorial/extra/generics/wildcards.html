<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html lang="en-US">
    <head>
        <title>Wildcards (The Java&trade; Tutorials &gt;        
            Bonus &gt; Generics)
</title>

     <meta name="description" content="This Java tutorial describes generics, full screen mode API, and Java certification related resources" />
     <meta name="keywords" content="java programming, learn java, java sample code, java generics, full screen mode API, certification" />
        
<style type="text/css">
    .FigureCaption   { 
        margin-left: 1in; 
        margin-right: 1in; 
        font-family: sans-serif; 
        font-size: smaller; 
        text-align: justify;
    }
    #TopBar_bl {
        background: url(../../images/java_bar_bl.gif) 0 100% no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_br {
        background: url(../../images/java_bar_br.gif) 100% 100% no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_tl {
        background: url(../../images/java_bar_tl.gif) 0 0 no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_tr {
        background: url(../../images/java_bar_tr.gif) 100% 0 no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar {
        background: #35556B url(../../images/java_bar.gif);
        margin: 10px 10px 0 10px;
        height:60px;
        min-width:700px;
        color: white;
        font-family: sans-serif; 
        font-weight: bold;
    }
    @media print {
        #BreadCrumbs, #Download {
            display: none;
        }
    }
    #TopBar_right {
        line-height: 14px;
        float: right;
        padding-top: 2px;
        padding-right: 30px;
        text-align: center;
    }
    @media print {
        #TopBar_right {
            display: none;
        }
    }
    #TopBar_right a {
        font-size: 12px;
        margin: 3px;
        padding: 0;
    }
    #TopBar a:visited, #TopBar a:link {
        color: white;
        text-decoration: none;
    }
    #TopBar a:hover, #TopBar a:active  {
        background-color: white;
        color: #35556B;
    }
    #BreadCrumbs {
        padding: 4px 5px 0.5em 0;
        font-family: sans-serif; 
        float: right;
    }
    #BreadCrumbs a {
        color: blue;
    }
    #BreadCrumbs a:visited, #BreadCrumbs a:link {
        text-decoration: none;
    }
    #BreadCrumbs a:hover, #BreadCrumbs a:active {
        text-decoration: underline;
    }
    #PageTitle {
        margin: 0 5px 0.5em 0;
        color: #F90000;
    }    
    #PageContent{
        margin: 0 5px 0 20px;
    }
    .LeftBar_shown {
        width: 13em;
        float: left;
        margin-left: 10px;
        margin-top: 4px;
        margin-bottom: 2em;
        margin-right: 10px;
    }
    @media print {
        .LeftBar_shown {
            display: none;
        }
    }
    .LeftBar_hidden {
        display: none;
    }
    #Footer {
        padding-top: 10px;
        padding-left: 10px;
        margin-right: 10px;
    }
    
    .footertext {
        font-size: 10px;
        font-family: sans-serif; 
        margin-top: 1px;
    }
    
    #Footer2 {
        padding-top: 10px;
        padding-left: 10px;
        margin-right: 10px;
    }
    .NavBit  {
        padding: 4px 5px 0.5em 0;
        font-family: sans-serif; 
    }
    @media print {
        .NavBit {
            display: none;
        }
    }
    #TagNotes {
        text-align: right;        
    }
    
    @media print {
        #TagNotes a:visited, #TagNotes a:link {
            color: #35556B;
            text-decoration: none;
        }
    }
    #Contents a, .NavBit a, #TagNotes a {
        color: blue
    }
    #TagNotes a:visited, #TagNotes a:link,
    #Contents a:visited, #Contents a:link,
    .NavBit a:visited, .NavBit a:link {
        text-decoration: none;
    }
    #TagNotes a:hover, #TagNotes a:active,   
    #Contents a:hover, #Contents a:active,   
    .NavBit a:hover, .NavBit a:active {  
        text-decoration: underline;
    }
    #Contents {
        float: left;
        font-family: sans-serif; 
    }
    @media print {
        #Contents {
            display: none;
        }
    }
    @media screen {
        div.PrintHeaders {
            display: none;
        }
    }
    .linkLESSON, .nolinkLESSON {
        margin-left: 0.5em;
        text-indent: -0.5em
    }
    .linkAHEAD, .nolinkAHEAD, .linkQUESTIONS, .nolinkQUESTIONS   {
        margin-left: 1.5em; 
        text-indent: -0.5em
    }
    .linkBHEAD, .nolinkBHEAD   {
        margin-left: 2.5em;
        text-indent: -0.5em
    }
    .linkCHEAD, .nolinkCHEAD   {
        margin-left: 3.5em;
        text-indent: -0.5em
    }
    .nolinkLESSON, .nolinkAHEAD, .nolinkBHEAD, .nolinkCHEAD,
    .nolinkQUESTIONS {
        font-weight: bold;
        color: #F90000;
    }
    .MainFlow_indented {
        margin-right: 10px;
        margin-left: 15em;
        margin-bottom: 2em;

    }
    .MainFlow_wide {
        margin-right: 10px;
        margin-left: 10px;
        margin-bottom: 2em;

    }
    @media print {
        .MainFlow_indented, .MainFlow_wide {
            padding-top: 0;
            margin-top: 10px;
            margin-right: 10px;
            margin-left: 0;
        }
    }
    h1, h2, h3, h4, h5 {
        color: #F90000;
        font-family: sans-serif;
    }

    h1 {
        font-weight: bold;
        font-size: 20px;
    }

    h2 {
        font-weight: bold;
        font-size: 17px;
    }

    h3 {
        font-weight: bold;
        font-size: 14px;
    }

    h4 {
        font-size: 15px;
    }

    h5 {
        font-size: 12px;
    }


    #ToggleLeft {
        display: none;
    }
    
    .note {
        margin: 0 30px 0px 30px;
    }
    
    .codeblock {
        margin: 0 30px 0px 30px;
    }

    /t

</style>
<script type="text/javascript">
    function leftBar() {
        var nameq = 'tutorial_showLeftBar='
        var cookies = document.cookie.split(';');
        for (var i = 0; i < cookies.length; i++) {
            var cookieString = cookies[i];
            while (cookieString.charAt(0) == ' ') {
                cookieString = cookieString.substring(1, cookieString.length);
            }
            if (cookieString.indexOf(nameq) == 0) {
                cookieValue =  cookieString.substring(nameq.length,
                        cookieString.length);
                return cookieValue == 'yes';
            }
        }
        return true;
    }

    function showLeft(b) {
        var contents = document.getElementById("LeftBar");
        var main = document.getElementById("MainFlow");
        var toggle = document.getElementById("ToggleLeft");
        if (b) {
            contents.className = "LeftBar_shown";
            main.className = "MainFlow_indented";
            toggle.innerHTML = "Hide the TOC";
            document.cookie = 'tutorial_showLeftBar=yes; path=/';
        } else {
            contents.className = "LeftBar_hidden";
            main.className = "MainFlow_wide";
            toggle.innerHTML = "Show the TOC";
            document.cookie = 'tutorial_showLeftBar=no; path=/';
        }
    }

    function toggleLeft() {
        showLeft(document.getElementById("LeftBar").className ==
                "LeftBar_hidden");
        document.getElementById("ToggleLeft").blur();
    }

    function load() {
        showLeft(leftBar());
        document.getElementById("ToggleLeft").style.display="inline";
    }
    
</script>
<noscript> 
A browser with JavaScript enabled is required for this page to operate properly.
</noscript>

    </head>
<body onload="load()">
    <div id=TopBar> <div id=TopBar_tr> <div id=TopBar_tl> <div id=TopBar_br> <div id=TopBar_bl> 
                        <div id=TopBar_right> 
                            <a target="_blank"
                                href="http://java.sun.com/javase/6/download.jsp">Download
                                the JDK</a>
                            <br>
                            <a href="../../search.html" target="_blank">Search the
                                Tutorials</a>
                            <br>
                            <a href="javascript:toggleLeft()"
                                id="ToggleLeft">Hide the TOC</a>
                        </div>
                    </div> </div> </div> </div> </div>
    <div class=PrintHeaders>
        <b>Trail:</b> Bonus
        <br><b>Lesson:</b> Generics
    </div>

    <div id=LeftBar class=LeftBar_shown>
        <div id=Contents>
            <div class="linkLESSON"><a href="index.html">Generics</a></div>
<div class="linkAHEAD"><a href="intro.html">Introduction</a></div>
<div class="linkAHEAD"><a href="simple.html">Defining Simple Generics</a></div>
<div class="linkAHEAD"><a href="subtype.html">Generics and Subtyping</a></div>
<div class="nolinkAHEAD">Wildcards</div>
<div class="linkAHEAD"><a href="methods.html">Generic Methods</a></div>
<div class="linkAHEAD"><a href="legacy.html">Interoperating with Legacy Code</a></div>
<div class="linkAHEAD"><a href="fineprint.html">The Fine Print</a></div>
<div class="linkAHEAD"><a href="literals.html">Class Literals as Runtime-Type Tokens</a></div>
<div class="linkAHEAD"><a href="morefun.html">More Fun with Wildcards</a></div>
<div class="linkAHEAD"><a href="convert.html">Converting Legacy Code to Use Generics</a></div>
<div class="linkAHEAD"><a href="acknowledgements.html">Acknowledgements</a></div>
</div>
    </div>
    <div id=MainFlow class=MainFlow_indented>
            <span id=BreadCrumbs>
                <a href=../../index.html target=_top>Home Page</a>
                &gt;
                <a href=../index.html target=_top>Bonus</a>
                &gt;
                <a href=index.html target=_top>Generics</a>
            </span>
            <div class=NavBit>
                <a target=_top href=subtype.html>&laquo;&nbsp;Previous</a>&nbsp;&bull;&nbsp;<a target=_top href=../TOC.html>Trail</a>&nbsp;&bull;&nbsp;<a target=_top href=methods.html>Next&nbsp;&raquo;</a>
            </div>
            <div id=PageTitle><h1>Wildcards</h1></div>
            <div id=PageContent>
<!--Wildcards-->

Consider the problem of writing a routine that prints out all the
elements in a collection. Here's how you might write it in an
older version of the language (i.e., a pre-5.0 release):

<div class="codeblock"><pre>
<b>void</b> printCollection(Collection c) {
    Iterator i = c.iterator();
    <b>for</b> (k = 0; k &lt; c.size(); k++) {
        System.out.println(i.next());
    }
}
</pre></div>

And here is a naive attempt at writing it using generics (and the new 
<code>for</code> loop syntax):

<div class="codeblock"><pre>
<b>void</b> printCollection(Collection&lt;Object&gt; c) {
    <b>for</b> (Object e : c) {
        System.out.println(e);
    }
}
</pre></div>


The problem is that this new version is much less useful than the old one.
Whereas the old code could be called with any kind of collection as a
parameter, the new code only takes <code>Collection&lt;Object&gt;</code>, which,
as we've just demonstrated, is <b>not</b> a supertype of all kinds of 
collections!
<P>
So what <b>is</b> the supertype of all kinds of collections? It's written
<code>Collection&lt;?&gt;</code> (pronounced "collection of unknown"), 
that is, a collection whose element type matches
anything. It's called a <b>wildcard type</b> for obvious reasons. We can
write:

<div class="codeblock"><pre>
<b>void</b> printCollection(Collection&lt;?&gt; c) {
    <b>for</b> (Object e : c) {
        System.out.println(e);
    }
}
</pre></div>

and now, we can call it with any type of collection.
Notice that inside <code>printCollection()</code>, we can still read elements
from <code>c</code> and give them type <code>Object</code>. This is always safe,
since whatever the actual type of the collection, it does contain
objects. It isn't safe to add arbitrary objects to it however:

<div class="codeblock"><pre>
Collection&lt;?&gt; c = new ArrayList&lt;String&gt;();
c.add(new Object()); // Compile time error
</pre></div>

Since we don't know what the element type of <code>c</code> stands for,
we cannot add objects to it. The <code>add()</code> method takes arguments
of type <code>E</code>, the element type of the collection. When the actual
type parameter is <code>?</code>, it stands for some unknown type. Any parameter
we pass to <code>add</code> would have to be a subtype of this unknown type.
Since we don't know what type that is, we cannot pass anything in. The sole
exception is <code>null</code>, which is a member of every type.
<P>
On the other hand, given a <code>List&lt;?&gt;</code>, we <b>can</b> call 
<code>get()</code> and make use of the result. The result type is an 
unknown type, but we always
know that it is an object. It is therefore safe to assign the result of
<code>get()</code> to a variable of type <code>Object</code> or pass it as a parameter
where the type <code>Object</code> is expected.

<h2>Bounded Wildcards</h2>

Consider a simple drawing application that can draw shapes such
as rectangles and circles. To represent these shapes within the
program, you could define a class hierarchy such as this:

<div class="codeblock"><pre>
<b>public abstract class</b> Shape {
    <b>public abstract void</b> draw(Canvas c);
}

<b>public class</b> Circle <b>extends</b> Shape {
    <b>private int</b> x, y, radius;
    <b>public void</b> draw(Canvas c) {
        ...
    }
}

<b>public class</b> Rectangle <b>extends</b> Shape {
    <b>private int</b> x, y, width, height;
    <b>public void</b> draw(Canvas c) {
        ...
    }
}
</pre></div>

These classes can be drawn on a canvas:

<div class="codeblock"><pre>
<b>public class</b> Canvas {
    <b>public void</b> draw(Shape s) {
        s.draw(<b>this</b>);
   }
}
</pre></div>

Any drawing will typically contain a number of shapes. Assuming that
they are represented as a list, it would be convenient to have a
method in <code>Canvas</code> that draws them all:

<div class="codeblock"><pre>
<b>public void</b> drawAll(List&lt;Shape&gt; shapes) {
    <b>for</b> (Shape s: shapes) {
        s.draw(<b>this</b>);
   }
}
</pre></div>

Now, the type rules say that <code>drawAll()</code> can only be called on
lists of exactly <code>Shape</code>: it cannot, for instance, be called on a
<code>List&lt;Circle&gt;</code>. That is unfortunate, since all the method does
is read shapes from the list, so it could just as well be called on a
<code>List&lt;Circle&gt;</code>. What we really want is for the method to accept
a list of <b>any</b> kind of shape:

<div class="codeblock"><pre>
<b>public void</b> drawAll(List&lt;? <b>extends</b> Shape&gt; shapes) {
    ...
}
</pre></div>

There is a small but very important difference here: we have replaced the type 
<code>List&lt;Shape&gt;</code> with <code>List&lt;? <b>extends</b> Shape&gt;</code>. Now
<code>drawAll()</code> will accept lists of any subclass of <code>Shape</code>, so
we can now call it on a <code>List&lt;Circle&gt;</code> if we want. 
<P>
<code>List&lt;? <b>extends</b> Shape&gt;</code> is an example of a <i>bounded wildcard</i>.
The <code>?</code> stands for an unknown type, just like the wildcards we saw
earlier. However, in this case, we know that this unknown type is in fact a subtype
of <code>Shape</code>. (Note: It could be <code>Shape</code> itself, 
or some subclass; it need not literally extend <code>Shape</code>.)  
We say that <code>Shape</code> is the 
<i>upper bound</i> of the wildcard.
<P>
There is, as usual, a price to be paid for the flexibility of using 
wildcards. That price is
that it is now illegal to write into <code>shapes</code> in the body of the
method. For instance, this is not allowed:

<div class="codeblock"><pre>
<b>public void</b> addRectangle(List&lt;? <b>extends</b> Shape&gt; shapes) {
    shapes.add(0, <b>new</b> Rectangle()); // <i>Compile-time error!</i>
}
</pre></div>

You should be able to figure out why the code above is disallowed. The type of
the second parameter to <code>shapes.add()</code> is <code>? <b>extends</b> Shape</code>-- 
an unknown subtype of <code>Shape</code>. Since we don't know what type it is,
we don't know if it is a supertype of <code>Rectangle</code>; it might or might not
be such a supertype, so it isn't safe to pass a <code>Rectangle</code> there.
<P>
Bounded wildcards are just what one needs to handle the example
of the DMV passing its data to the census bureau. Our example assumes
that the data is represented by mapping from names (represented as strings)
to people (represented by reference types such as <code>Person</code> or its
subtypes, such as <code>Driver</code>). <code>Map&lt;K,V&gt;</code> is 
an example of a generic type that takes two type arguments, representing 
the keys and values of the map.
<P>
Again, note the naming convention for formal type parameters--<code>K</code>
for keys and <code>V</code> for values.

<div class="codeblock"><pre>
<b>public class</b> Census {
    <b>public static void</b> addRegistry(Map&lt;String, ? <b>extends</b> Person&gt; registry) {
}
...

Map&lt;String, Driver&gt; allDrivers = ... ;
Census.addRegistry(allDrivers);
</pre></div>


        </div>
        <div class=NavBit>
            <a target=_top href=subtype.html>&laquo; Previous</a>
            &bull;
            <a target=_top href=../TOC.html>Trail</a>
            &bull;
            <a target=_top href=methods.html>Next &raquo;</a>
        </div>
    </div>
    <div id=Footer2>
<hr>
<div id=TagNotes>
    <p class="footertext">Problems with the examples? Try <a target="_blank"
        href=../../information/run-examples.html>Compiling and Running
        the Examples: FAQs</a>.
    <br>
    Complaints? Compliments? Suggestions? <a target="_blank"
        href="http://download.oracle.com/javase/feedback.html">Give
    us your feedback</a>.
    </p>
</div> 

<div id=Footer>
<p class="footertext"><a name="license_info">Your use of this</a> page and all the material on pages under &quot;The Java Tutorials&quot; banner,
and all the material on pages under &quot;The Java Tutorials&quot; banner is subject to the <a href="../../information/license.html">Java SE Tutorial Copyright
and License</a>.
Additionally, any example code contained in any of these Java
Tutorials pages is licensed under the
<a href="http://developers.sun.com/license/berkeley_license.html">Code
Sample License</a>.
</p>
<table border="0" cellspacing="0" cellpadding="5" summary="">
    <tr>
         <td headers="h1" width="20%">
	 <table width="100%" border="0" cellspacing="0" cellpadding="5">
            <tr>
              <td headers="h1" align="center"><img id=duke src=../../images/DukeWave.gif width=55 height=55 alt="duke image"></td>
              <td headers="h2" align="left" valign="middle"><img id=oracle src=../../images/logo_oracle_footer.gif width=100 height=29 alt="Oracle logo"></td>
           </tr>
          </table>
          </td>

          <td width="55%" valign="middle" align="center">
		<p class="footertext"><a href="http://www.oracle.com/us/corporate/index.html">About Oracle</a> | <a href="http://www.oracle.com/technology/index.html">Oracle Technology Network</a> | <a href="https://www.samplecode.oracle.com/servlets/CompulsoryClickThrough?type=TermsOfService">Terms of Service</a></p> 
	 </td>
          <td width="25%" valign="middle" align="right">
      		<p class="footertext">Copyright &copy; 1995, 2011 Oracle and/or its affiliates. All rights reserved.</p>
	 </td>
     </tr>     
</table>
</div>
    </div>
    <div class=PrintHeaders>
        <b>Previous page:</b> Generics and Subtyping
        <br><b>Next page:</b> Generic Methods
    </div>

<!-- Start SiteCatalyst code   -->
<script language="JavaScript" src="http://www.oracle.com/ocom/groups/systemobject/@mktg_admin/documents/systemobject/s_code_download.js"></script>
<script language="JavaScript" src="http://www.oracle.com/ocom/groups/systemobject/@mktg_admin/documents/systemobject/s_code.js"></script>
<noscript> 
A browser with JavaScript enabled is required for this page to operate properly.
</noscript>
 
<!-- ********** DO NOT ALTER ANYTHING BELOW THIS LINE ! *********** -->
<!--  Below code will send the info to Omniture server -->
<script language="javascript">var s_code=s.t();if(s_code)document.write(s_code)</script>

 
<!-- End SiteCatalyst code -->

</body>
</html> 
